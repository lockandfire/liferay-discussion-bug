<!DOCTYPE html><html><head>
      <title>lf_test</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <style>
      /*!
 * reveal.js
 * http://revealjs.com
 * MIT licensed
 *
 * Copyright (C) 2018 Hakim El Hattab, http://hakim.se
 */
/*********************************************
 * RESET STYLES
 *********************************************/
html, body, .reveal div, .reveal span, .reveal applet, .reveal object, .reveal iframe,
.reveal h1, .reveal h2, .reveal h3, .reveal h4, .reveal h5, .reveal h6, .reveal p, .reveal blockquote, .reveal pre,
.reveal a, .reveal abbr, .reveal acronym, .reveal address, .reveal big, .reveal cite, .reveal code,
.reveal del, .reveal dfn, .reveal em, .reveal img, .reveal ins, .reveal kbd, .reveal q, .reveal s, .reveal samp,
.reveal small, .reveal strike, .reveal strong, .reveal sub, .reveal sup, .reveal tt, .reveal var,
.reveal b, .reveal u, .reveal center,
.reveal dl, .reveal dt, .reveal dd, .reveal ol, .reveal ul, .reveal li,
.reveal fieldset, .reveal form, .reveal label, .reveal legend,
.reveal table, .reveal caption, .reveal tbody, .reveal tfoot, .reveal thead, .reveal tr, .reveal th, .reveal td,
.reveal article, .reveal aside, .reveal canvas, .reveal details, .reveal embed,
.reveal figure, .reveal figcaption, .reveal footer, .reveal header, .reveal hgroup,
.reveal menu, .reveal nav, .reveal output, .reveal ruby, .reveal section, .reveal summary,
.reveal time, .reveal mark, .reveal audio, .reveal video {
  margin: 0;
  padding: 0;
  border: 0;
  font-size: 100%;
  /* font: inherit; */
  vertical-align: baseline; }

.reveal article, .reveal aside, .reveal details, .reveal figcaption, .reveal figure,
.reveal footer, .reveal header, .reveal hgroup, .reveal menu, .reveal nav, .reveal section {
  display: block; }

/*********************************************
 * GLOBAL STYLES
 *********************************************/
html,
body {
  width: 100%;
  height: 100%;
  overflow: hidden; }

body {
  position: relative;
  line-height: 1;
  background-color: #fff;
  color: #000; }

/*********************************************
 * VIEW FRAGMENTS
 *********************************************/
.reveal .slides section .fragment {
  opacity: 0;
  visibility: hidden;
  transition: all .2s ease; }
  .reveal .slides section .fragment.visible {
    opacity: 1;
    visibility: inherit; }

.reveal .slides section .fragment.grow {
  opacity: 1;
  visibility: inherit; }
  .reveal .slides section .fragment.grow.visible {
    -webkit-transform: scale(1.3);
            transform: scale(1.3); }

.reveal .slides section .fragment.shrink {
  opacity: 1;
  visibility: inherit; }
  .reveal .slides section .fragment.shrink.visible {
    -webkit-transform: scale(0.7);
            transform: scale(0.7); }

.reveal .slides section .fragment.zoom-in {
  -webkit-transform: scale(0.1);
          transform: scale(0.1); }
  .reveal .slides section .fragment.zoom-in.visible {
    -webkit-transform: none;
            transform: none; }

.reveal .slides section .fragment.fade-out {
  opacity: 1;
  visibility: inherit; }
  .reveal .slides section .fragment.fade-out.visible {
    opacity: 0;
    visibility: hidden; }

.reveal .slides section .fragment.semi-fade-out {
  opacity: 1;
  visibility: inherit; }
  .reveal .slides section .fragment.semi-fade-out.visible {
    opacity: 0.5;
    visibility: inherit; }

.reveal .slides section .fragment.strike {
  opacity: 1;
  visibility: inherit; }
  .reveal .slides section .fragment.strike.visible {
    text-decoration: line-through; }

.reveal .slides section .fragment.fade-up {
  -webkit-transform: translate(0, 20%);
          transform: translate(0, 20%); }
  .reveal .slides section .fragment.fade-up.visible {
    -webkit-transform: translate(0, 0);
            transform: translate(0, 0); }

.reveal .slides section .fragment.fade-down {
  -webkit-transform: translate(0, -20%);
          transform: translate(0, -20%); }
  .reveal .slides section .fragment.fade-down.visible {
    -webkit-transform: translate(0, 0);
            transform: translate(0, 0); }

.reveal .slides section .fragment.fade-right {
  -webkit-transform: translate(-20%, 0);
          transform: translate(-20%, 0); }
  .reveal .slides section .fragment.fade-right.visible {
    -webkit-transform: translate(0, 0);
            transform: translate(0, 0); }

.reveal .slides section .fragment.fade-left {
  -webkit-transform: translate(20%, 0);
          transform: translate(20%, 0); }
  .reveal .slides section .fragment.fade-left.visible {
    -webkit-transform: translate(0, 0);
            transform: translate(0, 0); }

.reveal .slides section .fragment.fade-in-then-out,
.reveal .slides section .fragment.current-visible {
  opacity: 0;
  visibility: hidden; }
  .reveal .slides section .fragment.fade-in-then-out.current-fragment,
  .reveal .slides section .fragment.current-visible.current-fragment {
    opacity: 1;
    visibility: inherit; }

.reveal .slides section .fragment.fade-in-then-semi-out {
  opacity: 0;
  visibility: hidden; }
  .reveal .slides section .fragment.fade-in-then-semi-out.visible {
    opacity: 0.5;
    visibility: inherit; }
  .reveal .slides section .fragment.fade-in-then-semi-out.current-fragment {
    opacity: 1;
    visibility: inherit; }

.reveal .slides section .fragment.highlight-red,
.reveal .slides section .fragment.highlight-current-red,
.reveal .slides section .fragment.highlight-green,
.reveal .slides section .fragment.highlight-current-green,
.reveal .slides section .fragment.highlight-blue,
.reveal .slides section .fragment.highlight-current-blue {
  opacity: 1;
  visibility: inherit; }

.reveal .slides section .fragment.highlight-red.visible {
  color: #ff2c2d; }

.reveal .slides section .fragment.highlight-green.visible {
  color: #17ff2e; }

.reveal .slides section .fragment.highlight-blue.visible {
  color: #1b91ff; }

.reveal .slides section .fragment.highlight-current-red.current-fragment {
  color: #ff2c2d; }

.reveal .slides section .fragment.highlight-current-green.current-fragment {
  color: #17ff2e; }

.reveal .slides section .fragment.highlight-current-blue.current-fragment {
  color: #1b91ff; }

/*********************************************
 * DEFAULT ELEMENT STYLES
 *********************************************/
/* Fixes issue in Chrome where italic fonts did not appear when printing to PDF */
.reveal:after {
  content: '';
  font-style: italic; }

.reveal iframe {
  z-index: 1; }

/** Prevents layering issues in certain browser/transition combinations */
.reveal a {
  position: relative; }

.reveal .stretch {
  max-width: none;
  max-height: none; }

.reveal pre.stretch code {
  height: 100%;
  max-height: 100%;
  box-sizing: border-box; }

/*********************************************
 * CONTROLS
 *********************************************/
@-webkit-keyframes bounce-right {
  0%, 10%, 25%, 40%, 50% {
    -webkit-transform: translateX(0);
            transform: translateX(0); }
  20% {
    -webkit-transform: translateX(10px);
            transform: translateX(10px); }
  30% {
    -webkit-transform: translateX(-5px);
            transform: translateX(-5px); } }
@keyframes bounce-right {
  0%, 10%, 25%, 40%, 50% {
    -webkit-transform: translateX(0);
            transform: translateX(0); }
  20% {
    -webkit-transform: translateX(10px);
            transform: translateX(10px); }
  30% {
    -webkit-transform: translateX(-5px);
            transform: translateX(-5px); } }

@-webkit-keyframes bounce-down {
  0%, 10%, 25%, 40%, 50% {
    -webkit-transform: translateY(0);
            transform: translateY(0); }
  20% {
    -webkit-transform: translateY(10px);
            transform: translateY(10px); }
  30% {
    -webkit-transform: translateY(-5px);
            transform: translateY(-5px); } }

@keyframes bounce-down {
  0%, 10%, 25%, 40%, 50% {
    -webkit-transform: translateY(0);
            transform: translateY(0); }
  20% {
    -webkit-transform: translateY(10px);
            transform: translateY(10px); }
  30% {
    -webkit-transform: translateY(-5px);
            transform: translateY(-5px); } }

.reveal .controls {
  display: none;
  position: absolute;
  top: auto;
  bottom: 12px;
  right: 12px;
  left: auto;
  z-index: 1;
  color: #000;
  pointer-events: none;
  font-size: 10px; }
  .reveal .controls button {
    position: absolute;
    padding: 0;
    background-color: transparent;
    border: 0;
    outline: 0;
    cursor: pointer;
    color: currentColor;
    -webkit-transform: scale(0.9999);
            transform: scale(0.9999);
    transition: color 0.2s ease, opacity 0.2s ease, -webkit-transform 0.2s ease;
    transition: color 0.2s ease, opacity 0.2s ease, transform 0.2s ease;
    z-index: 2;
    pointer-events: auto;
    font-size: inherit;
    visibility: hidden;
    opacity: 0;
    -webkit-appearance: none;
    -webkit-tap-highlight-color: transparent; }
  .reveal .controls .controls-arrow:before,
  .reveal .controls .controls-arrow:after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 2.6em;
    height: 0.5em;
    border-radius: 0.25em;
    background-color: currentColor;
    transition: all 0.15s ease, background-color 0.8s ease;
    -webkit-transform-origin: 0.2em 50%;
            transform-origin: 0.2em 50%;
    will-change: transform; }
  .reveal .controls .controls-arrow {
    position: relative;
    width: 3.6em;
    height: 3.6em; }
    .reveal .controls .controls-arrow:before {
      -webkit-transform: translateX(0.5em) translateY(1.55em) rotate(45deg);
              transform: translateX(0.5em) translateY(1.55em) rotate(45deg); }
    .reveal .controls .controls-arrow:after {
      -webkit-transform: translateX(0.5em) translateY(1.55em) rotate(-45deg);
              transform: translateX(0.5em) translateY(1.55em) rotate(-45deg); }
    .reveal .controls .controls-arrow:hover:before {
      -webkit-transform: translateX(0.5em) translateY(1.55em) rotate(40deg);
              transform: translateX(0.5em) translateY(1.55em) rotate(40deg); }
    .reveal .controls .controls-arrow:hover:after {
      -webkit-transform: translateX(0.5em) translateY(1.55em) rotate(-40deg);
              transform: translateX(0.5em) translateY(1.55em) rotate(-40deg); }
    .reveal .controls .controls-arrow:active:before {
      -webkit-transform: translateX(0.5em) translateY(1.55em) rotate(36deg);
              transform: translateX(0.5em) translateY(1.55em) rotate(36deg); }
    .reveal .controls .controls-arrow:active:after {
      -webkit-transform: translateX(0.5em) translateY(1.55em) rotate(-36deg);
              transform: translateX(0.5em) translateY(1.55em) rotate(-36deg); }
  .reveal .controls .navigate-left {
    right: 6.4em;
    bottom: 3.2em;
    -webkit-transform: translateX(-10px);
            transform: translateX(-10px); }
  .reveal .controls .navigate-right {
    right: 0;
    bottom: 3.2em;
    -webkit-transform: translateX(10px);
            transform: translateX(10px); }
    .reveal .controls .navigate-right .controls-arrow {
      -webkit-transform: rotate(180deg);
              transform: rotate(180deg); }
    .reveal .controls .navigate-right.highlight {
      -webkit-animation: bounce-right 2s 50 both ease-out;
              animation: bounce-right 2s 50 both ease-out; }
  .reveal .controls .navigate-up {
    right: 3.2em;
    bottom: 6.4em;
    -webkit-transform: translateY(-10px);
            transform: translateY(-10px); }
    .reveal .controls .navigate-up .controls-arrow {
      -webkit-transform: rotate(90deg);
              transform: rotate(90deg); }
  .reveal .controls .navigate-down {
    right: 3.2em;
    bottom: 0;
    -webkit-transform: translateY(10px);
            transform: translateY(10px); }
    .reveal .controls .navigate-down .controls-arrow {
      -webkit-transform: rotate(-90deg);
              transform: rotate(-90deg); }
    .reveal .controls .navigate-down.highlight {
      -webkit-animation: bounce-down 2s 50 both ease-out;
              animation: bounce-down 2s 50 both ease-out; }
  .reveal .controls[data-controls-back-arrows="faded"] .navigate-left.enabled,
  .reveal .controls[data-controls-back-arrows="faded"] .navigate-up.enabled {
    opacity: 0.3; }
    .reveal .controls[data-controls-back-arrows="faded"] .navigate-left.enabled:hover,
    .reveal .controls[data-controls-back-arrows="faded"] .navigate-up.enabled:hover {
      opacity: 1; }
  .reveal .controls[data-controls-back-arrows="hidden"] .navigate-left.enabled,
  .reveal .controls[data-controls-back-arrows="hidden"] .navigate-up.enabled {
    opacity: 0;
    visibility: hidden; }
  .reveal .controls .enabled {
    visibility: visible;
    opacity: 0.9;
    cursor: pointer;
    -webkit-transform: none;
            transform: none; }
  .reveal .controls .enabled.fragmented {
    opacity: 0.5; }
  .reveal .controls .enabled:hover,
  .reveal .controls .enabled.fragmented:hover {
    opacity: 1; }

.reveal:not(.has-vertical-slides) .controls .navigate-left {
  bottom: 1.4em;
  right: 5.5em; }

.reveal:not(.has-vertical-slides) .controls .navigate-right {
  bottom: 1.4em;
  right: 0.5em; }

.reveal:not(.has-horizontal-slides) .controls .navigate-up {
  right: 1.4em;
  bottom: 5em; }

.reveal:not(.has-horizontal-slides) .controls .navigate-down {
  right: 1.4em;
  bottom: 0.5em; }

.reveal.has-dark-background .controls {
  color: #fff; }

.reveal.has-light-background .controls {
  color: #000; }

.reveal.no-hover .controls .controls-arrow:hover:before,
.reveal.no-hover .controls .controls-arrow:active:before {
  -webkit-transform: translateX(0.5em) translateY(1.55em) rotate(45deg);
          transform: translateX(0.5em) translateY(1.55em) rotate(45deg); }

.reveal.no-hover .controls .controls-arrow:hover:after,
.reveal.no-hover .controls .controls-arrow:active:after {
  -webkit-transform: translateX(0.5em) translateY(1.55em) rotate(-45deg);
          transform: translateX(0.5em) translateY(1.55em) rotate(-45deg); }

@media screen and (min-width: 500px) {
  .reveal .controls[data-controls-layout="edges"] {
    top: 0;
    right: 0;
    bottom: 0;
    left: 0; }
  .reveal .controls[data-controls-layout="edges"] .navigate-left,
  .reveal .controls[data-controls-layout="edges"] .navigate-right,
  .reveal .controls[data-controls-layout="edges"] .navigate-up,
  .reveal .controls[data-controls-layout="edges"] .navigate-down {
    bottom: auto;
    right: auto; }
  .reveal .controls[data-controls-layout="edges"] .navigate-left {
    top: 50%;
    left: 8px;
    margin-top: -1.8em; }
  .reveal .controls[data-controls-layout="edges"] .navigate-right {
    top: 50%;
    right: 8px;
    margin-top: -1.8em; }
  .reveal .controls[data-controls-layout="edges"] .navigate-up {
    top: 8px;
    left: 50%;
    margin-left: -1.8em; }
  .reveal .controls[data-controls-layout="edges"] .navigate-down {
    bottom: 8px;
    left: 50%;
    margin-left: -1.8em; } }

/*********************************************
 * PROGRESS BAR
 *********************************************/
.reveal .progress {
  position: absolute;
  display: none;
  height: 3px;
  width: 100%;
  bottom: 0;
  left: 0;
  z-index: 10;
  background-color: rgba(0, 0, 0, 0.2);
  color: #fff; }

.reveal .progress:after {
  content: '';
  display: block;
  position: absolute;
  height: 10px;
  width: 100%;
  top: -10px; }

.reveal .progress span {
  display: block;
  height: 100%;
  width: 0px;
  background-color: currentColor;
  transition: width 800ms cubic-bezier(0.26, 0.86, 0.44, 0.985); }

/*********************************************
 * SLIDE NUMBER
 *********************************************/
.reveal .slide-number {
  position: absolute;
  display: block;
  right: 8px;
  bottom: 8px;
  z-index: 31;
  font-family: Helvetica, sans-serif;
  font-size: 12px;
  line-height: 1;
  color: #fff;
  background-color: rgba(0, 0, 0, 0.4);
  padding: 5px; }

.reveal .slide-number a {
  color: currentColor; }

.reveal .slide-number-delimiter {
  margin: 0 3px; }

/*********************************************
 * SLIDES
 *********************************************/
.reveal {
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
  -ms-touch-action: none;
      touch-action: none; }

@media only screen and (orientation: landscape) {
  .reveal.ua-iphone {
    position: fixed; } }

.reveal .slides {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  margin: auto;
  pointer-events: none;
  overflow: visible;
  z-index: 1;
  text-align: center;
  -webkit-perspective: 600px;
          perspective: 600px;
  -webkit-perspective-origin: 50% 40%;
          perspective-origin: 50% 40%; }

.reveal .slides > section {
  -ms-perspective: 600px; }

.reveal .slides > section,
.reveal .slides > section > section {
  display: none;
  position: absolute;
  width: 100%;
  padding: 20px 0px;
  pointer-events: auto;
  z-index: 10;
  -webkit-transform-style: flat;
          transform-style: flat;
  transition: -webkit-transform-origin 800ms cubic-bezier(0.26, 0.86, 0.44, 0.985), -webkit-transform 800ms cubic-bezier(0.26, 0.86, 0.44, 0.985), visibility 800ms cubic-bezier(0.26, 0.86, 0.44, 0.985), opacity 800ms cubic-bezier(0.26, 0.86, 0.44, 0.985);
  transition: transform-origin 800ms cubic-bezier(0.26, 0.86, 0.44, 0.985), transform 800ms cubic-bezier(0.26, 0.86, 0.44, 0.985), visibility 800ms cubic-bezier(0.26, 0.86, 0.44, 0.985), opacity 800ms cubic-bezier(0.26, 0.86, 0.44, 0.985); }

/* Global transition speed settings */
.reveal[data-transition-speed="fast"] .slides section {
  transition-duration: 400ms; }

.reveal[data-transition-speed="slow"] .slides section {
  transition-duration: 1200ms; }

/* Slide-specific transition speed overrides */
.reveal .slides section[data-transition-speed="fast"] {
  transition-duration: 400ms; }

.reveal .slides section[data-transition-speed="slow"] {
  transition-duration: 1200ms; }

.reveal .slides > section.stack {
  padding-top: 0;
  padding-bottom: 0;
  pointer-events: none; }

.reveal .slides > section.present,
.reveal .slides > section > section.present {
  display: block;
  z-index: 11;
  opacity: 1; }

.reveal .slides > section:empty,
.reveal .slides > section > section:empty,
.reveal .slides > section[data-background-interactive],
.reveal .slides > section > section[data-background-interactive] {
  pointer-events: none; }

.reveal.center,
.reveal.center .slides,
.reveal.center .slides section {
  min-height: 0 !important; }

/* Don't allow interaction with invisible slides */
.reveal .slides > section.future,
.reveal .slides > section > section.future,
.reveal .slides > section.past,
.reveal .slides > section > section.past {
  pointer-events: none; }

.reveal.overview .slides > section,
.reveal.overview .slides > section > section {
  pointer-events: auto; }

.reveal .slides > section.past,
.reveal .slides > section.future,
.reveal .slides > section > section.past,
.reveal .slides > section > section.future {
  opacity: 0; }

/*********************************************
 * Mixins for readability of transitions
 *********************************************/
/*********************************************
 * SLIDE TRANSITION
 * Aliased 'linear' for backwards compatibility
 *********************************************/
.reveal.slide section {
  -webkit-backface-visibility: hidden;
          backface-visibility: hidden; }

.reveal .slides > section[data-transition=slide].past,
.reveal .slides > section[data-transition~=slide-out].past,
.reveal.slide .slides > section:not([data-transition]).past {
  -webkit-transform: translate(-150%, 0);
          transform: translate(-150%, 0); }

.reveal .slides > section[data-transition=slide].future,
.reveal .slides > section[data-transition~=slide-in].future,
.reveal.slide .slides > section:not([data-transition]).future {
  -webkit-transform: translate(150%, 0);
          transform: translate(150%, 0); }

.reveal .slides > section > section[data-transition=slide].past,
.reveal .slides > section > section[data-transition~=slide-out].past,
.reveal.slide .slides > section > section:not([data-transition]).past {
  -webkit-transform: translate(0, -150%);
          transform: translate(0, -150%); }

.reveal .slides > section > section[data-transition=slide].future,
.reveal .slides > section > section[data-transition~=slide-in].future,
.reveal.slide .slides > section > section:not([data-transition]).future {
  -webkit-transform: translate(0, 150%);
          transform: translate(0, 150%); }

.reveal.linear section {
  -webkit-backface-visibility: hidden;
          backface-visibility: hidden; }

.reveal .slides > section[data-transition=linear].past,
.reveal .slides > section[data-transition~=linear-out].past,
.reveal.linear .slides > section:not([data-transition]).past {
  -webkit-transform: translate(-150%, 0);
          transform: translate(-150%, 0); }

.reveal .slides > section[data-transition=linear].future,
.reveal .slides > section[data-transition~=linear-in].future,
.reveal.linear .slides > section:not([data-transition]).future {
  -webkit-transform: translate(150%, 0);
          transform: translate(150%, 0); }

.reveal .slides > section > section[data-transition=linear].past,
.reveal .slides > section > section[data-transition~=linear-out].past,
.reveal.linear .slides > section > section:not([data-transition]).past {
  -webkit-transform: translate(0, -150%);
          transform: translate(0, -150%); }

.reveal .slides > section > section[data-transition=linear].future,
.reveal .slides > section > section[data-transition~=linear-in].future,
.reveal.linear .slides > section > section:not([data-transition]).future {
  -webkit-transform: translate(0, 150%);
          transform: translate(0, 150%); }

/*********************************************
 * CONVEX TRANSITION
 * Aliased 'default' for backwards compatibility
 *********************************************/
.reveal .slides section[data-transition=default].stack,
.reveal.default .slides section.stack {
  -webkit-transform-style: preserve-3d;
          transform-style: preserve-3d; }

.reveal .slides > section[data-transition=default].past,
.reveal .slides > section[data-transition~=default-out].past,
.reveal.default .slides > section:not([data-transition]).past {
  -webkit-transform: translate3d(-100%, 0, 0) rotateY(-90deg) translate3d(-100%, 0, 0);
          transform: translate3d(-100%, 0, 0) rotateY(-90deg) translate3d(-100%, 0, 0); }

.reveal .slides > section[data-transition=default].future,
.reveal .slides > section[data-transition~=default-in].future,
.reveal.default .slides > section:not([data-transition]).future {
  -webkit-transform: translate3d(100%, 0, 0) rotateY(90deg) translate3d(100%, 0, 0);
          transform: translate3d(100%, 0, 0) rotateY(90deg) translate3d(100%, 0, 0); }

.reveal .slides > section > section[data-transition=default].past,
.reveal .slides > section > section[data-transition~=default-out].past,
.reveal.default .slides > section > section:not([data-transition]).past {
  -webkit-transform: translate3d(0, -300px, 0) rotateX(70deg) translate3d(0, -300px, 0);
          transform: translate3d(0, -300px, 0) rotateX(70deg) translate3d(0, -300px, 0); }

.reveal .slides > section > section[data-transition=default].future,
.reveal .slides > section > section[data-transition~=default-in].future,
.reveal.default .slides > section > section:not([data-transition]).future {
  -webkit-transform: translate3d(0, 300px, 0) rotateX(-70deg) translate3d(0, 300px, 0);
          transform: translate3d(0, 300px, 0) rotateX(-70deg) translate3d(0, 300px, 0); }

.reveal .slides section[data-transition=convex].stack,
.reveal.convex .slides section.stack {
  -webkit-transform-style: preserve-3d;
          transform-style: preserve-3d; }

.reveal .slides > section[data-transition=convex].past,
.reveal .slides > section[data-transition~=convex-out].past,
.reveal.convex .slides > section:not([data-transition]).past {
  -webkit-transform: translate3d(-100%, 0, 0) rotateY(-90deg) translate3d(-100%, 0, 0);
          transform: translate3d(-100%, 0, 0) rotateY(-90deg) translate3d(-100%, 0, 0); }

.reveal .slides > section[data-transition=convex].future,
.reveal .slides > section[data-transition~=convex-in].future,
.reveal.convex .slides > section:not([data-transition]).future {
  -webkit-transform: translate3d(100%, 0, 0) rotateY(90deg) translate3d(100%, 0, 0);
          transform: translate3d(100%, 0, 0) rotateY(90deg) translate3d(100%, 0, 0); }

.reveal .slides > section > section[data-transition=convex].past,
.reveal .slides > section > section[data-transition~=convex-out].past,
.reveal.convex .slides > section > section:not([data-transition]).past {
  -webkit-transform: translate3d(0, -300px, 0) rotateX(70deg) translate3d(0, -300px, 0);
          transform: translate3d(0, -300px, 0) rotateX(70deg) translate3d(0, -300px, 0); }

.reveal .slides > section > section[data-transition=convex].future,
.reveal .slides > section > section[data-transition~=convex-in].future,
.reveal.convex .slides > section > section:not([data-transition]).future {
  -webkit-transform: translate3d(0, 300px, 0) rotateX(-70deg) translate3d(0, 300px, 0);
          transform: translate3d(0, 300px, 0) rotateX(-70deg) translate3d(0, 300px, 0); }

/*********************************************
 * CONCAVE TRANSITION
 *********************************************/
.reveal .slides section[data-transition=concave].stack,
.reveal.concave .slides section.stack {
  -webkit-transform-style: preserve-3d;
          transform-style: preserve-3d; }

.reveal .slides > section[data-transition=concave].past,
.reveal .slides > section[data-transition~=concave-out].past,
.reveal.concave .slides > section:not([data-transition]).past {
  -webkit-transform: translate3d(-100%, 0, 0) rotateY(90deg) translate3d(-100%, 0, 0);
          transform: translate3d(-100%, 0, 0) rotateY(90deg) translate3d(-100%, 0, 0); }

.reveal .slides > section[data-transition=concave].future,
.reveal .slides > section[data-transition~=concave-in].future,
.reveal.concave .slides > section:not([data-transition]).future {
  -webkit-transform: translate3d(100%, 0, 0) rotateY(-90deg) translate3d(100%, 0, 0);
          transform: translate3d(100%, 0, 0) rotateY(-90deg) translate3d(100%, 0, 0); }

.reveal .slides > section > section[data-transition=concave].past,
.reveal .slides > section > section[data-transition~=concave-out].past,
.reveal.concave .slides > section > section:not([data-transition]).past {
  -webkit-transform: translate3d(0, -80%, 0) rotateX(-70deg) translate3d(0, -80%, 0);
          transform: translate3d(0, -80%, 0) rotateX(-70deg) translate3d(0, -80%, 0); }

.reveal .slides > section > section[data-transition=concave].future,
.reveal .slides > section > section[data-transition~=concave-in].future,
.reveal.concave .slides > section > section:not([data-transition]).future {
  -webkit-transform: translate3d(0, 80%, 0) rotateX(70deg) translate3d(0, 80%, 0);
          transform: translate3d(0, 80%, 0) rotateX(70deg) translate3d(0, 80%, 0); }

/*********************************************
 * ZOOM TRANSITION
 *********************************************/
.reveal .slides section[data-transition=zoom],
.reveal.zoom .slides section:not([data-transition]) {
  transition-timing-function: ease; }

.reveal .slides > section[data-transition=zoom].past,
.reveal .slides > section[data-transition~=zoom-out].past,
.reveal.zoom .slides > section:not([data-transition]).past {
  visibility: hidden;
  -webkit-transform: scale(16);
          transform: scale(16); }

.reveal .slides > section[data-transition=zoom].future,
.reveal .slides > section[data-transition~=zoom-in].future,
.reveal.zoom .slides > section:not([data-transition]).future {
  visibility: hidden;
  -webkit-transform: scale(0.2);
          transform: scale(0.2); }

.reveal .slides > section > section[data-transition=zoom].past,
.reveal .slides > section > section[data-transition~=zoom-out].past,
.reveal.zoom .slides > section > section:not([data-transition]).past {
  -webkit-transform: translate(0, -150%);
          transform: translate(0, -150%); }

.reveal .slides > section > section[data-transition=zoom].future,
.reveal .slides > section > section[data-transition~=zoom-in].future,
.reveal.zoom .slides > section > section:not([data-transition]).future {
  -webkit-transform: translate(0, 150%);
          transform: translate(0, 150%); }

/*********************************************
 * CUBE TRANSITION
 *
 * WARNING:
 * this is deprecated and will be removed in a
 * future version.
 *********************************************/
.reveal.cube .slides {
  -webkit-perspective: 1300px;
          perspective: 1300px; }

.reveal.cube .slides section {
  padding: 30px;
  min-height: 700px;
  -webkit-backface-visibility: hidden;
          backface-visibility: hidden;
  box-sizing: border-box;
  -webkit-transform-style: preserve-3d;
          transform-style: preserve-3d; }

.reveal.center.cube .slides section {
  min-height: 0; }

.reveal.cube .slides section:not(.stack):before {
  content: '';
  position: absolute;
  display: block;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
  background: rgba(0, 0, 0, 0.1);
  border-radius: 4px;
  -webkit-transform: translateZ(-20px);
          transform: translateZ(-20px); }

.reveal.cube .slides section:not(.stack):after {
  content: '';
  position: absolute;
  display: block;
  width: 90%;
  height: 30px;
  left: 5%;
  bottom: 0;
  background: none;
  z-index: 1;
  border-radius: 4px;
  box-shadow: 0px 95px 25px rgba(0, 0, 0, 0.2);
  -webkit-transform: translateZ(-90px) rotateX(65deg);
          transform: translateZ(-90px) rotateX(65deg); }

.reveal.cube .slides > section.stack {
  padding: 0;
  background: none; }

.reveal.cube .slides > section.past {
  -webkit-transform-origin: 100% 0%;
          transform-origin: 100% 0%;
  -webkit-transform: translate3d(-100%, 0, 0) rotateY(-90deg);
          transform: translate3d(-100%, 0, 0) rotateY(-90deg); }

.reveal.cube .slides > section.future {
  -webkit-transform-origin: 0% 0%;
          transform-origin: 0% 0%;
  -webkit-transform: translate3d(100%, 0, 0) rotateY(90deg);
          transform: translate3d(100%, 0, 0) rotateY(90deg); }

.reveal.cube .slides > section > section.past {
  -webkit-transform-origin: 0% 100%;
          transform-origin: 0% 100%;
  -webkit-transform: translate3d(0, -100%, 0) rotateX(90deg);
          transform: translate3d(0, -100%, 0) rotateX(90deg); }

.reveal.cube .slides > section > section.future {
  -webkit-transform-origin: 0% 0%;
          transform-origin: 0% 0%;
  -webkit-transform: translate3d(0, 100%, 0) rotateX(-90deg);
          transform: translate3d(0, 100%, 0) rotateX(-90deg); }

/*********************************************
 * PAGE TRANSITION
 *
 * WARNING:
 * this is deprecated and will be removed in a
 * future version.
 *********************************************/
.reveal.page .slides {
  -webkit-perspective-origin: 0% 50%;
          perspective-origin: 0% 50%;
  -webkit-perspective: 3000px;
          perspective: 3000px; }

.reveal.page .slides section {
  padding: 30px;
  min-height: 700px;
  box-sizing: border-box;
  -webkit-transform-style: preserve-3d;
          transform-style: preserve-3d; }

.reveal.page .slides section.past {
  z-index: 12; }

.reveal.page .slides section:not(.stack):before {
  content: '';
  position: absolute;
  display: block;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
  background: rgba(0, 0, 0, 0.1);
  -webkit-transform: translateZ(-20px);
          transform: translateZ(-20px); }

.reveal.page .slides section:not(.stack):after {
  content: '';
  position: absolute;
  display: block;
  width: 90%;
  height: 30px;
  left: 5%;
  bottom: 0;
  background: none;
  z-index: 1;
  border-radius: 4px;
  box-shadow: 0px 95px 25px rgba(0, 0, 0, 0.2);
  -webkit-transform: translateZ(-90px) rotateX(65deg); }

.reveal.page .slides > section.stack {
  padding: 0;
  background: none; }

.reveal.page .slides > section.past {
  -webkit-transform-origin: 0% 0%;
          transform-origin: 0% 0%;
  -webkit-transform: translate3d(-40%, 0, 0) rotateY(-80deg);
          transform: translate3d(-40%, 0, 0) rotateY(-80deg); }

.reveal.page .slides > section.future {
  -webkit-transform-origin: 100% 0%;
          transform-origin: 100% 0%;
  -webkit-transform: translate3d(0, 0, 0);
          transform: translate3d(0, 0, 0); }

.reveal.page .slides > section > section.past {
  -webkit-transform-origin: 0% 0%;
          transform-origin: 0% 0%;
  -webkit-transform: translate3d(0, -40%, 0) rotateX(80deg);
          transform: translate3d(0, -40%, 0) rotateX(80deg); }

.reveal.page .slides > section > section.future {
  -webkit-transform-origin: 0% 100%;
          transform-origin: 0% 100%;
  -webkit-transform: translate3d(0, 0, 0);
          transform: translate3d(0, 0, 0); }

/*********************************************
 * FADE TRANSITION
 *********************************************/
.reveal .slides section[data-transition=fade],
.reveal.fade .slides section:not([data-transition]),
.reveal.fade .slides > section > section:not([data-transition]) {
  -webkit-transform: none;
          transform: none;
  transition: opacity 0.5s; }

.reveal.fade.overview .slides section,
.reveal.fade.overview .slides > section > section {
  transition: none; }

/*********************************************
 * NO TRANSITION
 *********************************************/
.reveal .slides section[data-transition=none],
.reveal.none .slides section:not([data-transition]) {
  -webkit-transform: none;
          transform: none;
  transition: none; }

/*********************************************
 * PAUSED MODE
 *********************************************/
.reveal .pause-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: black;
  visibility: hidden;
  opacity: 0;
  z-index: 100;
  transition: all 1s ease; }

.reveal .pause-overlay .resume-button {
  position: absolute;
  bottom: 20px;
  right: 20px;
  color: #ccc;
  border-radius: 2px;
  padding: 6px 14px;
  border: 2px solid #ccc;
  font-size: 16px;
  background: transparent;
  cursor: pointer; }
  .reveal .pause-overlay .resume-button:hover {
    color: #fff;
    border-color: #fff; }

.reveal.paused .pause-overlay {
  visibility: visible;
  opacity: 1; }

/*********************************************
 * FALLBACK
 *********************************************/
.no-transforms {
  overflow-y: auto; }

.no-transforms .reveal .slides {
  position: relative;
  width: 80%;
  height: auto !important;
  top: 0;
  left: 50%;
  margin: 0;
  text-align: center; }

.no-transforms .reveal .controls,
.no-transforms .reveal .progress {
  display: none !important; }

.no-transforms .reveal .slides section {
  display: block !important;
  opacity: 1 !important;
  position: relative !important;
  height: auto;
  min-height: 0;
  top: 0;
  left: -50%;
  margin: 70px 0;
  -webkit-transform: none;
          transform: none; }

.no-transforms .reveal .slides section section {
  left: 0; }

.reveal .no-transition,
.reveal .no-transition * {
  transition: none !important; }

/*********************************************
 * PER-SLIDE BACKGROUNDS
 *********************************************/
.reveal .backgrounds {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  -webkit-perspective: 600px;
          perspective: 600px; }

.reveal .slide-background {
  display: none;
  position: absolute;
  width: 100%;
  height: 100%;
  opacity: 0;
  visibility: hidden;
  overflow: hidden;
  background-color: transparent;
  transition: all 800ms cubic-bezier(0.26, 0.86, 0.44, 0.985); }

.reveal .slide-background-content {
  position: absolute;
  width: 100%;
  height: 100%;
  background-position: 50% 50%;
  background-repeat: no-repeat;
  background-size: cover; }

.reveal .slide-background.stack {
  display: block; }

.reveal .slide-background.present {
  opacity: 1;
  visibility: visible;
  z-index: 2; }

.print-pdf .reveal .slide-background {
  opacity: 1 !important;
  visibility: visible !important; }

/* Video backgrounds */
.reveal .slide-background video {
  position: absolute;
  width: 100%;
  height: 100%;
  max-width: none;
  max-height: none;
  top: 0;
  left: 0;
  -o-object-fit: cover;
     object-fit: cover; }

.reveal .slide-background[data-background-size="contain"] video {
  -o-object-fit: contain;
     object-fit: contain; }

/* Immediate transition style */
.reveal[data-background-transition=none] > .backgrounds .slide-background,
.reveal > .backgrounds .slide-background[data-background-transition=none] {
  transition: none; }

/* Slide */
.reveal[data-background-transition=slide] > .backgrounds .slide-background,
.reveal > .backgrounds .slide-background[data-background-transition=slide] {
  opacity: 1;
  -webkit-backface-visibility: hidden;
          backface-visibility: hidden; }

.reveal[data-background-transition=slide] > .backgrounds .slide-background.past,
.reveal > .backgrounds .slide-background.past[data-background-transition=slide] {
  -webkit-transform: translate(-100%, 0);
          transform: translate(-100%, 0); }

.reveal[data-background-transition=slide] > .backgrounds .slide-background.future,
.reveal > .backgrounds .slide-background.future[data-background-transition=slide] {
  -webkit-transform: translate(100%, 0);
          transform: translate(100%, 0); }

.reveal[data-background-transition=slide] > .backgrounds .slide-background > .slide-background.past,
.reveal > .backgrounds .slide-background > .slide-background.past[data-background-transition=slide] {
  -webkit-transform: translate(0, -100%);
          transform: translate(0, -100%); }

.reveal[data-background-transition=slide] > .backgrounds .slide-background > .slide-background.future,
.reveal > .backgrounds .slide-background > .slide-background.future[data-background-transition=slide] {
  -webkit-transform: translate(0, 100%);
          transform: translate(0, 100%); }

/* Convex */
.reveal[data-background-transition=convex] > .backgrounds .slide-background.past,
.reveal > .backgrounds .slide-background.past[data-background-transition=convex] {
  opacity: 0;
  -webkit-transform: translate3d(-100%, 0, 0) rotateY(-90deg) translate3d(-100%, 0, 0);
          transform: translate3d(-100%, 0, 0) rotateY(-90deg) translate3d(-100%, 0, 0); }

.reveal[data-background-transition=convex] > .backgrounds .slide-background.future,
.reveal > .backgrounds .slide-background.future[data-background-transition=convex] {
  opacity: 0;
  -webkit-transform: translate3d(100%, 0, 0) rotateY(90deg) translate3d(100%, 0, 0);
          transform: translate3d(100%, 0, 0) rotateY(90deg) translate3d(100%, 0, 0); }

.reveal[data-background-transition=convex] > .backgrounds .slide-background > .slide-background.past,
.reveal > .backgrounds .slide-background > .slide-background.past[data-background-transition=convex] {
  opacity: 0;
  -webkit-transform: translate3d(0, -100%, 0) rotateX(90deg) translate3d(0, -100%, 0);
          transform: translate3d(0, -100%, 0) rotateX(90deg) translate3d(0, -100%, 0); }

.reveal[data-background-transition=convex] > .backgrounds .slide-background > .slide-background.future,
.reveal > .backgrounds .slide-background > .slide-background.future[data-background-transition=convex] {
  opacity: 0;
  -webkit-transform: translate3d(0, 100%, 0) rotateX(-90deg) translate3d(0, 100%, 0);
          transform: translate3d(0, 100%, 0) rotateX(-90deg) translate3d(0, 100%, 0); }

/* Concave */
.reveal[data-background-transition=concave] > .backgrounds .slide-background.past,
.reveal > .backgrounds .slide-background.past[data-background-transition=concave] {
  opacity: 0;
  -webkit-transform: translate3d(-100%, 0, 0) rotateY(90deg) translate3d(-100%, 0, 0);
          transform: translate3d(-100%, 0, 0) rotateY(90deg) translate3d(-100%, 0, 0); }

.reveal[data-background-transition=concave] > .backgrounds .slide-background.future,
.reveal > .backgrounds .slide-background.future[data-background-transition=concave] {
  opacity: 0;
  -webkit-transform: translate3d(100%, 0, 0) rotateY(-90deg) translate3d(100%, 0, 0);
          transform: translate3d(100%, 0, 0) rotateY(-90deg) translate3d(100%, 0, 0); }

.reveal[data-background-transition=concave] > .backgrounds .slide-background > .slide-background.past,
.reveal > .backgrounds .slide-background > .slide-background.past[data-background-transition=concave] {
  opacity: 0;
  -webkit-transform: translate3d(0, -100%, 0) rotateX(-90deg) translate3d(0, -100%, 0);
          transform: translate3d(0, -100%, 0) rotateX(-90deg) translate3d(0, -100%, 0); }

.reveal[data-background-transition=concave] > .backgrounds .slide-background > .slide-background.future,
.reveal > .backgrounds .slide-background > .slide-background.future[data-background-transition=concave] {
  opacity: 0;
  -webkit-transform: translate3d(0, 100%, 0) rotateX(90deg) translate3d(0, 100%, 0);
          transform: translate3d(0, 100%, 0) rotateX(90deg) translate3d(0, 100%, 0); }

/* Zoom */
.reveal[data-background-transition=zoom] > .backgrounds .slide-background,
.reveal > .backgrounds .slide-background[data-background-transition=zoom] {
  transition-timing-function: ease; }

.reveal[data-background-transition=zoom] > .backgrounds .slide-background.past,
.reveal > .backgrounds .slide-background.past[data-background-transition=zoom] {
  opacity: 0;
  visibility: hidden;
  -webkit-transform: scale(16);
          transform: scale(16); }

.reveal[data-background-transition=zoom] > .backgrounds .slide-background.future,
.reveal > .backgrounds .slide-background.future[data-background-transition=zoom] {
  opacity: 0;
  visibility: hidden;
  -webkit-transform: scale(0.2);
          transform: scale(0.2); }

.reveal[data-background-transition=zoom] > .backgrounds .slide-background > .slide-background.past,
.reveal > .backgrounds .slide-background > .slide-background.past[data-background-transition=zoom] {
  opacity: 0;
  visibility: hidden;
  -webkit-transform: scale(16);
          transform: scale(16); }

.reveal[data-background-transition=zoom] > .backgrounds .slide-background > .slide-background.future,
.reveal > .backgrounds .slide-background > .slide-background.future[data-background-transition=zoom] {
  opacity: 0;
  visibility: hidden;
  -webkit-transform: scale(0.2);
          transform: scale(0.2); }

/* Global transition speed settings */
.reveal[data-transition-speed="fast"] > .backgrounds .slide-background {
  transition-duration: 400ms; }

.reveal[data-transition-speed="slow"] > .backgrounds .slide-background {
  transition-duration: 1200ms; }

/*********************************************
 * OVERVIEW
 *********************************************/
.reveal.overview {
  -webkit-perspective-origin: 50% 50%;
          perspective-origin: 50% 50%;
  -webkit-perspective: 700px;
          perspective: 700px; }
  .reveal.overview .slides {
    -moz-transform-style: preserve-3d; }
  .reveal.overview .slides section {
    height: 100%;
    top: 0 !important;
    opacity: 1 !important;
    overflow: hidden;
    visibility: visible !important;
    cursor: pointer;
    box-sizing: border-box; }
  .reveal.overview .slides section:hover,
  .reveal.overview .slides section.present {
    outline: 10px solid rgba(150, 150, 150, 0.4);
    outline-offset: 10px; }
  .reveal.overview .slides section .fragment {
    opacity: 1;
    transition: none; }
  .reveal.overview .slides section:after,
  .reveal.overview .slides section:before {
    display: none !important; }
  .reveal.overview .slides > section.stack {
    padding: 0;
    top: 0 !important;
    background: none;
    outline: none;
    overflow: visible; }
  .reveal.overview .backgrounds {
    -webkit-perspective: inherit;
            perspective: inherit;
    -moz-transform-style: preserve-3d; }
  .reveal.overview .backgrounds .slide-background {
    opacity: 1;
    visibility: visible;
    outline: 10px solid rgba(150, 150, 150, 0.1);
    outline-offset: 10px; }
  .reveal.overview .backgrounds .slide-background.stack {
    overflow: visible; }

.reveal.overview .slides section,
.reveal.overview-deactivating .slides section {
  transition: none; }

.reveal.overview .backgrounds .slide-background,
.reveal.overview-deactivating .backgrounds .slide-background {
  transition: none; }

/*********************************************
 * RTL SUPPORT
 *********************************************/
.reveal.rtl .slides,
.reveal.rtl .slides h1,
.reveal.rtl .slides h2,
.reveal.rtl .slides h3,
.reveal.rtl .slides h4,
.reveal.rtl .slides h5,
.reveal.rtl .slides h6 {
  direction: rtl;
  font-family: sans-serif; }

.reveal.rtl pre,
.reveal.rtl code {
  direction: ltr; }

.reveal.rtl ol,
.reveal.rtl ul {
  text-align: right; }

.reveal.rtl .progress span {
  float: right; }

/*********************************************
 * PARALLAX BACKGROUND
 *********************************************/
.reveal.has-parallax-background .backgrounds {
  transition: all 0.8s ease; }

/* Global transition speed settings */
.reveal.has-parallax-background[data-transition-speed="fast"] .backgrounds {
  transition-duration: 400ms; }

.reveal.has-parallax-background[data-transition-speed="slow"] .backgrounds {
  transition-duration: 1200ms; }

/*********************************************
 * LINK PREVIEW OVERLAY
 *********************************************/
.reveal .overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1000;
  background: rgba(0, 0, 0, 0.9);
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease; }

.reveal .overlay.visible {
  opacity: 1;
  visibility: visible; }

.reveal .overlay .spinner {
  position: absolute;
  display: block;
  top: 50%;
  left: 50%;
  width: 32px;
  height: 32px;
  margin: -16px 0 0 -16px;
  z-index: 10;
  background-image: url(data:image/gif;base64,R0lGODlhIAAgAPMAAJmZmf%2F%2F%2F6%2Bvr8nJybW1tcDAwOjo6Nvb26ioqKOjo7Ozs%2FLy8vz8%2FAAAAAAAAAAAACH%2FC05FVFNDQVBFMi4wAwEAAAAh%2FhpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh%2BQQJCgAAACwAAAAAIAAgAAAE5xDISWlhperN52JLhSSdRgwVo1ICQZRUsiwHpTJT4iowNS8vyW2icCF6k8HMMBkCEDskxTBDAZwuAkkqIfxIQyhBQBFvAQSDITM5VDW6XNE4KagNh6Bgwe60smQUB3d4Rz1ZBApnFASDd0hihh12BkE9kjAJVlycXIg7CQIFA6SlnJ87paqbSKiKoqusnbMdmDC2tXQlkUhziYtyWTxIfy6BE8WJt5YJvpJivxNaGmLHT0VnOgSYf0dZXS7APdpB309RnHOG5gDqXGLDaC457D1zZ%2FV%2FnmOM82XiHRLYKhKP1oZmADdEAAAh%2BQQJCgAAACwAAAAAIAAgAAAE6hDISWlZpOrNp1lGNRSdRpDUolIGw5RUYhhHukqFu8DsrEyqnWThGvAmhVlteBvojpTDDBUEIFwMFBRAmBkSgOrBFZogCASwBDEY%2FCZSg7GSE0gSCjQBMVG023xWBhklAnoEdhQEfyNqMIcKjhRsjEdnezB%2BA4k8gTwJhFuiW4dokXiloUepBAp5qaKpp6%2BHo7aWW54wl7obvEe0kRuoplCGepwSx2jJvqHEmGt6whJpGpfJCHmOoNHKaHx61WiSR92E4lbFoq%2BB6QDtuetcaBPnW6%2BO7wDHpIiK9SaVK5GgV543tzjgGcghAgAh%2BQQJCgAAACwAAAAAIAAgAAAE7hDISSkxpOrN5zFHNWRdhSiVoVLHspRUMoyUakyEe8PTPCATW9A14E0UvuAKMNAZKYUZCiBMuBakSQKG8G2FzUWox2AUtAQFcBKlVQoLgQReZhQlCIJesQXI5B0CBnUMOxMCenoCfTCEWBsJColTMANldx15BGs8B5wlCZ9Po6OJkwmRpnqkqnuSrayqfKmqpLajoiW5HJq7FL1Gr2mMMcKUMIiJgIemy7xZtJsTmsM4xHiKv5KMCXqfyUCJEonXPN2rAOIAmsfB3uPoAK%2B%2BG%2Bw48edZPK%2BM6hLJpQg484enXIdQFSS1u6UhksENEQAAIfkECQoAAAAsAAAAACAAIAAABOcQyEmpGKLqzWcZRVUQnZYg1aBSh2GUVEIQ2aQOE%2BG%2BcD4ntpWkZQj1JIiZIogDFFyHI0UxQwFugMSOFIPJftfVAEoZLBbcLEFhlQiqGp1Vd140AUklUN3eCA51C1EWMzMCezCBBmkxVIVHBWd3HHl9JQOIJSdSnJ0TDKChCwUJjoWMPaGqDKannasMo6WnM562R5YluZRwur0wpgqZE7NKUm%2BFNRPIhjBJxKZteWuIBMN4zRMIVIhffcgojwCF117i4nlLnY5ztRLsnOk%2BaV%2BoJY7V7m76PdkS4trKcdg0Zc0tTcKkRAAAIfkECQoAAAAsAAAAACAAIAAABO4QyEkpKqjqzScpRaVkXZWQEximw1BSCUEIlDohrft6cpKCk5xid5MNJTaAIkekKGQkWyKHkvhKsR7ARmitkAYDYRIbUQRQjWBwJRzChi9CRlBcY1UN4g0%2FVNB0AlcvcAYHRyZPdEQFYV8ccwR5HWxEJ02YmRMLnJ1xCYp0Y5idpQuhopmmC2KgojKasUQDk5BNAwwMOh2RtRq5uQuPZKGIJQIGwAwGf6I0JXMpC8C7kXWDBINFMxS4DKMAWVWAGYsAdNqW5uaRxkSKJOZKaU3tPOBZ4DuK2LATgJhkPJMgTwKCdFjyPHEnKxFCDhEAACH5BAkKAAAALAAAAAAgACAAAATzEMhJaVKp6s2nIkolIJ2WkBShpkVRWqqQrhLSEu9MZJKK9y1ZrqYK9WiClmvoUaF8gIQSNeF1Er4MNFn4SRSDARWroAIETg1iVwuHjYB1kYc1mwruwXKC9gmsJXliGxc%2BXiUCby9ydh1sOSdMkpMTBpaXBzsfhoc5l58Gm5yToAaZhaOUqjkDgCWNHAULCwOLaTmzswadEqggQwgHuQsHIoZCHQMMQgQGubVEcxOPFAcMDAYUA85eWARmfSRQCdcMe0zeP1AAygwLlJtPNAAL19DARdPzBOWSm1brJBi45soRAWQAAkrQIykShQ9wVhHCwCQCACH5BAkKAAAALAAAAAAgACAAAATrEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq%2BE71SRQeyqUToLA7VxF0JDyIQh%2FMVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiRMDjI0Fd30%2FiI2UA5GSS5UDj2l6NoqgOgN4gksEBgYFf0FDqKgHnyZ9OX8HrgYHdHpcHQULXAS2qKpENRg7eAMLC7kTBaixUYFkKAzWAAnLC7FLVxLWDBLKCwaKTULgEwbLA4hJtOkSBNqITT3xEgfLpBtzE%2FjiuL04RGEBgwWhShRgQExHBAAh%2BQQJCgAAACwAAAAAIAAgAAAE7xDISWlSqerNpyJKhWRdlSAVoVLCWk6JKlAqAavhO9UkUHsqlE6CwO1cRdCQ8iEIfzFVTzLdRAmZX3I2SfZiCqGk5dTESJeaOAlClzsJsqwiJwiqnFrb2nS9kmIcgEsjQydLiIlHehhpejaIjzh9eomSjZR%2BipslWIRLAgMDOR2DOqKogTB9pCUJBagDBXR6XB0EBkIIsaRsGGMMAxoDBgYHTKJiUYEGDAzHC9EACcUGkIgFzgwZ0QsSBcXHiQvOwgDdEwfFs0sDzt4S6BK4xYjkDOzn0unFeBzOBijIm1Dgmg5YFQwsCMjp1oJ8LyIAACH5BAkKAAAALAAAAAAgACAAAATwEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq%2BE71SRQeyqUToLA7VxF0JDyIQh%2FMVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiUd6GGl6NoiPOH16iZKNlH6KmyWFOggHhEEvAwwMA0N9GBsEC6amhnVcEwavDAazGwIDaH1ipaYLBUTCGgQDA8NdHz0FpqgTBwsLqAbWAAnIA4FWKdMLGdYGEgraigbT0OITBcg5QwPT4xLrROZL6AuQAPUS7bxLpoWidY0JtxLHKhwwMJBTHgPKdEQAACH5BAkKAAAALAAAAAAgACAAAATrEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq%2BE71SRQeyqUToLA7VxF0JDyIQh%2FMVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiUd6GAULDJCRiXo1CpGXDJOUjY%2BYip9DhToJA4RBLwMLCwVDfRgbBAaqqoZ1XBMHswsHtxtFaH1iqaoGNgAIxRpbFAgfPQSqpbgGBqUD1wBXeCYp1AYZ19JJOYgH1KwA4UBvQwXUBxPqVD9L3sbp2BNk2xvvFPJd%2BMFCN6HAAIKgNggY0KtEBAAh%2BQQJCgAAACwAAAAAIAAgAAAE6BDISWlSqerNpyJKhWRdlSAVoVLCWk6JKlAqAavhO9UkUHsqlE6CwO1cRdCQ8iEIfzFVTzLdRAmZX3I2SfYIDMaAFdTESJeaEDAIMxYFqrOUaNW4E4ObYcCXaiBVEgULe0NJaxxtYksjh2NLkZISgDgJhHthkpU4mW6blRiYmZOlh4JWkDqILwUGBnE6TYEbCgevr0N1gH4At7gHiRpFaLNrrq8HNgAJA70AWxQIH1%2BvsYMDAzZQPC9VCNkDWUhGkuE5PxJNwiUK4UfLzOlD4WvzAHaoG9nxPi5d%2BjYUqfAhhykOFwJWiAAAIfkECQoAAAAsAAAAACAAIAAABPAQyElpUqnqzaciSoVkXVUMFaFSwlpOCcMYlErAavhOMnNLNo8KsZsMZItJEIDIFSkLGQoQTNhIsFehRww2CQLKF0tYGKYSg%2BygsZIuNqJksKgbfgIGepNo2cIUB3V1B3IvNiBYNQaDSTtfhhx0CwVPI0UJe0%2Bbm4g5VgcGoqOcnjmjqDSdnhgEoamcsZuXO1aWQy8KAwOAuTYYGwi7w5h%2BKr0SJ8MFihpNbx%2B4Erq7BYBuzsdiH1jCAzoSfl0rVirNbRXlBBlLX%2BBP0XJLAPGzTkAuAOqb0WT5AH7OcdCm5B8TgRwSRKIHQtaLCwg1RAAAOwAAAAAAAAAAAA%3D%3D);
  visibility: visible;
  opacity: 0.6;
  transition: all 0.3s ease; }

.reveal .overlay header {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 40px;
  z-index: 2;
  border-bottom: 1px solid #222; }

.reveal .overlay header a {
  display: inline-block;
  width: 40px;
  height: 40px;
  line-height: 36px;
  padding: 0 10px;
  float: right;
  opacity: 0.6;
  box-sizing: border-box; }

.reveal .overlay header a:hover {
  opacity: 1; }

.reveal .overlay header a .icon {
  display: inline-block;
  width: 20px;
  height: 20px;
  background-position: 50% 50%;
  background-size: 100%;
  background-repeat: no-repeat; }

.reveal .overlay header a.close .icon {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABkklEQVRYR8WX4VHDMAxG6wnoJrABZQPYBCaBTWAD2g1gE5gg6OOsXuxIlr40d81dfrSJ9V4c2VLK7spHuTJ/5wpM07QXuXc5X0opX2tEJcadjHuV80li/FgxTIEK/5QBCICBD6xEhSMGHgQPgBgLiYVAB1dpSqKDawxTohFw4JSEA3clzgIBPCURwE2JucBR7rhPJJv5OpJwDX+SfDjgx1wACQeJG1aChP9K/IMmdZ8DtESV1WyP3Bt4MwM6sj4NMxMYiqUWHQu4KYA/SYkIjOsm3BXYWMKFDwU2khjCQ4ELJUJ4SmClRArOCmSXGuKma0fYD5CbzHxFpCSGAhfAVSSUGDUk2BWZaff2g6GE15BsBQ9nwmpIGDiyHQddwNTMKkbZaf9fajXQca1EX44puJZUsnY0ObGmITE3GVLCbEhQUjGVt146j6oasWN+49Vph2w1pZ5EansNZqKBm1txbU57iRRcZ86RWMDdWtBJUHBHwoQPi1GV+JCbntmvok7iTX4/Up9mgyTc/FJYDTcndgH/AA5A/CHsyEkVAAAAAElFTkSuQmCC); }

.reveal .overlay header a.external .icon {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAcElEQVRYR+2WSQoAIQwEzf8f7XiOMkUQxUPlGkM3hVmiQfQR9GYnH1SsAQlI4DiBqkCMoNb9y2e90IAEJPAcgdznU9+engMaeJ7Azh5Y1U67gAho4DqBqmB1buAf0MB1AlVBek83ZPkmJMGc1wAR+AAqod/B97TRpQAAAABJRU5ErkJggg==); }

.reveal .overlay .viewport {
  position: absolute;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  top: 40px;
  right: 0;
  bottom: 0;
  left: 0; }

.reveal .overlay.overlay-preview .viewport iframe {
  width: 100%;
  height: 100%;
  max-width: 100%;
  max-height: 100%;
  border: 0;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease; }

.reveal .overlay.overlay-preview.loaded .viewport iframe {
  opacity: 1;
  visibility: visible; }

.reveal .overlay.overlay-preview.loaded .viewport-inner {
  position: absolute;
  z-index: -1;
  left: 0;
  top: 45%;
  width: 100%;
  text-align: center;
  letter-spacing: normal; }

.reveal .overlay.overlay-preview .x-frame-error {
  opacity: 0;
  transition: opacity 0.3s ease 0.3s; }

.reveal .overlay.overlay-preview.loaded .x-frame-error {
  opacity: 1; }

.reveal .overlay.overlay-preview.loaded .spinner {
  opacity: 0;
  visibility: hidden;
  -webkit-transform: scale(0.2);
          transform: scale(0.2); }

.reveal .overlay.overlay-help .viewport {
  overflow: auto;
  color: #fff; }

.reveal .overlay.overlay-help .viewport .viewport-inner {
  width: 600px;
  margin: auto;
  padding: 20px 20px 80px 20px;
  text-align: center;
  letter-spacing: normal; }

.reveal .overlay.overlay-help .viewport .viewport-inner .title {
  font-size: 20px; }

.reveal .overlay.overlay-help .viewport .viewport-inner table {
  border: 1px solid #fff;
  border-collapse: collapse;
  font-size: 16px; }

.reveal .overlay.overlay-help .viewport .viewport-inner table th,
.reveal .overlay.overlay-help .viewport .viewport-inner table td {
  width: 200px;
  padding: 14px;
  border: 1px solid #fff;
  vertical-align: middle; }

.reveal .overlay.overlay-help .viewport .viewport-inner table th {
  padding-top: 20px;
  padding-bottom: 20px; }

/*********************************************
 * PLAYBACK COMPONENT
 *********************************************/
.reveal .playback {
  position: absolute;
  left: 15px;
  bottom: 20px;
  z-index: 30;
  cursor: pointer;
  transition: all 400ms ease;
  -webkit-tap-highlight-color: transparent; }

.reveal.overview .playback {
  opacity: 0;
  visibility: hidden; }

/*********************************************
 * ROLLING LINKS
 *********************************************/
.reveal .roll {
  display: inline-block;
  line-height: 1.2;
  overflow: hidden;
  vertical-align: top;
  -webkit-perspective: 400px;
          perspective: 400px;
  -webkit-perspective-origin: 50% 50%;
          perspective-origin: 50% 50%; }

.reveal .roll:hover {
  background: none;
  text-shadow: none; }

.reveal .roll span {
  display: block;
  position: relative;
  padding: 0 2px;
  pointer-events: none;
  transition: all 400ms ease;
  -webkit-transform-origin: 50% 0%;
          transform-origin: 50% 0%;
  -webkit-transform-style: preserve-3d;
          transform-style: preserve-3d;
  -webkit-backface-visibility: hidden;
          backface-visibility: hidden; }

.reveal .roll:hover span {
  background: rgba(0, 0, 0, 0.5);
  -webkit-transform: translate3d(0px, 0px, -45px) rotateX(90deg);
          transform: translate3d(0px, 0px, -45px) rotateX(90deg); }

.reveal .roll span:after {
  content: attr(data-title);
  display: block;
  position: absolute;
  left: 0;
  top: 0;
  padding: 0 2px;
  -webkit-backface-visibility: hidden;
          backface-visibility: hidden;
  -webkit-transform-origin: 50% 0%;
          transform-origin: 50% 0%;
  -webkit-transform: translate3d(0px, 110%, 0px) rotateX(-90deg);
          transform: translate3d(0px, 110%, 0px) rotateX(-90deg); }

/*********************************************
 * SPEAKER NOTES
 *********************************************/
.reveal aside.notes {
  display: none; }

.reveal .speaker-notes {
  display: none;
  position: absolute;
  width: 25vw;
  height: 100%;
  top: 0;
  left: 100%;
  padding: 14px 18px 14px 18px;
  z-index: 1;
  font-size: 18px;
  line-height: 1.4;
  border: 1px solid rgba(0, 0, 0, 0.05);
  color: #222;
  background-color: #f5f5f5;
  overflow: auto;
  box-sizing: border-box;
  text-align: left;
  font-family: Helvetica, sans-serif;
  -webkit-overflow-scrolling: touch; }
  .reveal .speaker-notes .notes-placeholder {
    color: #ccc;
    font-style: italic; }
  .reveal .speaker-notes:focus {
    outline: none; }
  .reveal .speaker-notes:before {
    content: 'Speaker notes';
    display: block;
    margin-bottom: 10px;
    opacity: 0.5; }

.reveal.show-notes {
  max-width: 75vw;
  overflow: visible; }

.reveal.show-notes .speaker-notes {
  display: block; }

@media screen and (min-width: 1600px) {
  .reveal .speaker-notes {
    font-size: 20px; } }

@media screen and (max-width: 1024px) {
  .reveal.show-notes {
    border-left: 0;
    max-width: none;
    max-height: 70%;
    overflow: visible; }
  .reveal.show-notes .speaker-notes {
    top: 100%;
    left: 0;
    width: 100%;
    height: 42.8571428571%; } }

@media screen and (max-width: 600px) {
  .reveal.show-notes {
    max-height: 60%; }
  .reveal.show-notes .speaker-notes {
    top: 100%;
    height: 66.6666666667%; }
  .reveal .speaker-notes {
    font-size: 14px; } }

/*********************************************
 * ZOOM PLUGIN
 *********************************************/
.zoomed .reveal *,
.zoomed .reveal *:before,
.zoomed .reveal *:after {
  -webkit-backface-visibility: visible !important;
          backface-visibility: visible !important; }

.zoomed .reveal .progress,
.zoomed .reveal .controls {
  opacity: 0; }

.zoomed .reveal .roll span {
  background: none; }

.zoomed .reveal .roll span:after {
  visibility: hidden; }

      
      </style>
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@3.7.0/css/theme/beige.css">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">
      
      
      
        <script src="https://cdn.jsdelivr.net/npm/reveal.js@3.7.0/lib/js/head.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/reveal.js@3.7.0/js/reveal.js"></script>
      
      
      
      
      
      
      <style>
      pre{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;padding:1em;margin:.5em 0;overflow:auto;line-height:1.5;tab-size:4;hyphens:none;color:#c5c8c6;background-color:#27292c !important;border:#43484c;border-radius:3px}pre[class*="language-"]{padding:1em}code[class*="language-"] .token.comment,pre[class*="language-"] .token.comment,code[class*="language-"] .token.prolog,pre[class*="language-"] .token.prolog,code[class*="language-"] .token.doctype,pre[class*="language-"] .token.doctype,code[class*="language-"] .token.cdata,pre[class*="language-"] .token.cdata{color:#7C7C7C}code[class*="language-"] .token.punctuation,pre[class*="language-"] .token.punctuation{color:#96CBFE}code[class*="language-"] .namespace,pre[class*="language-"] .namespace{opacity:.7}code[class*="language-"] .token.constant,pre[class*="language-"] .token.constant{color:#99CC99}code[class*="language-"] .token.boolean,pre[class*="language-"] .token.boolean,code[class*="language-"] .token.number,pre[class*="language-"] .token.number,code[class*="language-"] .token.function-name,pre[class*="language-"] .token.function-name{color:#FF73FD}code[class*="language-"] .token.tag,pre[class*="language-"] .token.tag{color:#96CBFE}code[class*="language-"] .token.selector,pre[class*="language-"] .token.selector{color:#96CBFE}code[class*="language-"] .token.attr-name,pre[class*="language-"] .token.attr-name{color:#C6C5FE}code[class*="language-"] .token.string,pre[class*="language-"] .token.string{color:#A8FF60}code[class*="language-"] .token.char,pre[class*="language-"] .token.char{color:#FF8000}code[class*="language-"] .token.entity,pre[class*="language-"] .token.entity{color:#FFD2A7}code[class*="language-"] .token.url,pre[class*="language-"] .token.url{color:#7C7C7C}code[class*="language-"] .token.operator,pre[class*="language-"] .token.operator{color:#EDEDED}code[class*="language-"] .token.atrule,pre[class*="language-"] .token.atrule,code[class*="language-"] .token.attr-value,pre[class*="language-"] .token.attr-value,code[class*="language-"] .token.keyword,pre[class*="language-"] .token.keyword{color:#CFCB90}code[class*="language-"] .token.function,pre[class*="language-"] .token.function{color:#FFD2A7}code[class*="language-"] .token.class-name,pre[class*="language-"] .token.class-name{color:#FFD2A7}code[class*="language-"] .token.variable,pre[class*="language-"] .token.variable{color:#C6C5FE}code[class*="language-"] .token.regex,pre[class*="language-"] .token.regex,code[class*="language-"] .token.important,pre[class*="language-"] .token.important{color:#E9C062}code[class*="language-"] .token.important,pre[class*="language-"] .token.important,code[class*="language-"] .token.bold,pre[class*="language-"] .token.bold{font-weight:bold}code[class*="language-"] .token.italic,pre[class*="language-"] .token.italic{font-style:italic}code[class*="language-"] .token.entity,pre[class*="language-"] .token.entity{cursor:help}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:rgba(153,122,102,0.08);background:linear-gradient(to right, rgba(153,122,102,0.1) 70%, rgba(153,122,102,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:rgba(153,122,102,0.4);color:#f5f2f0;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px white}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview .pagebreak,.markdown-preview .newpage{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center !important}.markdown-preview:not([for="preview"]) .code-chunk .btn-group{display:none}.markdown-preview:not([for="preview"]) .code-chunk .status{display:none}.markdown-preview:not([for="preview"]) .code-chunk .output-div{margin-bottom:16px}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0}@media screen and (min-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{font-size:14px !important;padding:1em}}@media print{html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,0.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{padding:0 1.6em;margin-top:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc li{margin-bottom:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{list-style-type:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% -  300px);padding:2em calc(50% - 457px -  150px);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
html body .slides left-float {
  float: left;
}

      </style>
    </head>
    <body for="html-export" data-presentation-mode>
      <div class="mume markdown-preview  " data-presentation-mode>
      
    <div style="display:none;"><link rel="stylesheet" href="style.css">
</div>
    <div class="reveal">
      <div class="slides">
        <section lineno="9" class="slide " data-line="9" data-h="0" data-v="0">
<h2 class="mume-header" id="automatic-liferay-test">Automatic Liferay Test</h2>

<ul>
<li>with a few <strong>T</strong>est  <strong>D</strong>riven  <strong>D</strong> evelopment</li>
</ul>
</section><section><section lineno="13" class="slide " data-line="13" data-h="1" data-v="0">
<h2 class="mume-header" id="why-test">Why test</h2>

<ul>
<li>pass</li>
</ul>
</section><section vertical="true" lineno="17" class="slide " data-line="17" data-h="1" data-v="1">
<h2 class="mume-header" id="why-automatic">Why automatic</h2>

<ul>
<li>&#x524D;&#x306E;&#x8A71;: CleanCode&#x3092;&#x5B9F;&#x8DF5;&#x3059;&#x308B;&#x6700;&#x5927;&#x306E;&#x59A8;&#x3052;&#x306B;&#x306A;&#x308B;&#x306E;&#x306F;&#xFF1F;
<ul>
<li>&#x4E00;&#x56DE;&#x3060;&#x3051;&#x3067;&#x6B63;&#x78BA;&#x30FB;&#x7DBA;&#x9E97;&#x306A;&#x30B3;&#x30FC;&#x30C9;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;&#x306E;&#x306F;&#x4E0D;&#x53EF;&#x80FD;
<ul>
<li>&#x305D;&#x306E;&#x305F;&#x3081;&#x306E;Refactoring
<ul>
<li>Refactor&#x524D;&#x5F8C;&#x306E;&#x30B3;&#x30FC;&#x30C9;&#x306E;&#x52D5;&#x304D;&#x304C;&#x4E00;&#x81F4;&#x3059;&#x308B;&#x3053;&#x3068;&#x3092;&#x4FDD;&#x8A3C;&#x3059;&#x308B;&#x65B9;&#x6CD5;
<ul>
<li>Test
<ul>
<li>Refactor&#x6BCE;&#x306B;&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x3059;&#x308B;
<ul>
<li>&#x81A8;&#x5927;&#x306A;&#x6642;&#x9593;&#x3092;&#x304B;&#x304B;&#x308B;</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>&#x7D50;&#x5C40;&#x8AE6;&#x3081;&#x305F;</li>
<li>&#x304A;&#x3057;&#x307E;&#x3044;</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="29" class="slide " data-line="29" data-h="1" data-v="2">
<h2 class="mume-header" id="why-automatic-1">Why automatic</h2>

<ul>
<li>
<p>&#x304B;&#x306A;&#x3081;</p>
<ul>
<li>&#x624B;&#x8EFD;&#x306B;&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x5B9F;&#x884C;&#x3067;&#x304D;&#x306A;&#x3044;&#x3068;Refactoring&#x304C;&#x3067;&#x304D;&#x306A;&#x3044;</li>
<li>&#x81EA;&#x52D5;&#x5316;</li>
</ul>
</li>
<li>
<p>&#x4ECA;&#x56DE;&#x306F;Liferay&#x958B;&#x767A;&#x306E;&#x81EA;&#x52D5;&#x5316;&#x30C6;&#x30B9;&#x30C8;&#x306B;&#x95A2;&#x3059;&#x308B;Know-How&#xFF08;&#x5F53;&#x793E;&#x8ABF;&#x3079;&#xFF09;&#x3092;&#x5171;&#x6709;&#x3057;&#x305F;&#x3044;</p>
</li>
</ul>
</section><section vertical="true" lineno="37" class="slide " data-line="37" data-h="1" data-v="3">
<h2 class="mume-header" id="%E4%BB%8A%E5%9B%9E%E3%81%AE%E5%86%85%E5%AE%B9%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6">&#x4ECA;&#x56DE;&#x306E;&#x5185;&#x5BB9;&#x306B;&#x3064;&#x3044;&#x3066;</h2>

<ul>
<li>
<p>&#x30C6;&#x30B9;&#x30C8;&#x7528;&#x8A9E;&#xFF08;&#x65E5;&#x672C;IT&#x306E;&#x3042;&#x308C;&#x3058;&#x3083;&#x306A;&#x3044;&#x3001;by Freeman and Pryce&#xFF09;</p>
<ul>
<li>&#x5143;&#x306E;&#x5B9A;&#x7FA9;&#x3088;&#x308A;&#x5206;&#x304B;&#x308A;&#x3084;&#x3059;&#x3044;&#xFF08;&#x5F53;&#x793E;&#x8ABF;&#x3079;&#xFF09;</li>
<li>Unit Test &#xFF08;&#x5358;&#x4F53;&#x30C6;&#x30B9;&#x30C8;&#xFF09;
<ul>
<li>&#x30C6;&#x30B9;&#x30C8;&#x306E;&#x5BFE;&#x8C61;&#x306B;&#x3059;&#x308B;&#x30E2;&#x30B8;&#x30E5;&#x30FC;&#x30EB; <strong>&#x3060;&#x3051;</strong> &#x3067;&#x5B9F;&#x884C;&#x3067;&#x304D;&#x308B;&#x30C6;&#x30B9;&#x30C8;</li>
</ul>
</li>
<li>Integration Test &#xFF08;&#x63A5;&#x5408;&#x30C6;&#x30B9;&#x30C8;&#xFF09;
<ul>
<li>&#x958B;&#x767A;&#x8005;&#x304C;&#x5909;&#x66F4;&#x3067;&#x304D;&#x306A;&#x3044;&#x30E2;&#x30B8;&#x30E5;&#x30FC;&#x30EB;&#x3092;&#x542B;&#x307E;&#x308C;&#x308B;&#x6A5F;&#x80FD;&#x306E;&#x30C6;&#x30B9;&#x30C8;</li>
</ul>
</li>
<li>Acceptance Test &#xFF08;&#x53D7;&#x3051;&#x5165;&#x308C;&#x30C6;&#x30B9;&#x30C8;&#xFF09;
<ul>
<li>&#x7121;&#x8996;</li>
</ul>
</li>
</ul>
</li>
<li>
<p>&#x4ECA;&#x56DE;&#x306F;&#x300C;&#x30C6;&#x30B9;&#x30C8;&#x30B1;&#x30FC;&#x30B9;&#x306E;&#x30C7;&#x30B6;&#x30A4;&#x30F3;&#x300D;&#x3092;&#x8A00;&#x53CA;&#x3057;&#x306A;&#x3044;</p>
</li>
<li>
<p>&#x4ECA;&#x56DE;&#x306E;&#x30C6;&#x30B9;&#x30C8;&#x306E;&#x7740;&#x773C;&#x70B9;&#x306F;&#x300C;&#x958B;&#x767A;&#x8005;&#x300D;</p>
</li>
</ul>
</section><section vertical="true" lineno="51" class="slide " data-line="51" data-h="1" data-v="4">
<h2 class="mume-header" id="%E4%BB%8A%E5%9B%9E%E3%81%AE%E3%82%B7%E3%83%8A%E3%83%AA%E3%82%AA">&#x4ECA;&#x56DE;&#x306E;&#x30B7;&#x30CA;&#x30EA;&#x30AA;</h2>

<ul>
<li>&#x3068;&#x3042;&#x308B;DS&#x4F1A;&#x793E;&#x306E;AD&#x304B;&#x3089;Liferay&#x30E6;&#x30FC;&#x30B6;&#x306B;&#x30A4;&#x30F3;&#x30DD;&#x30FC;&#x30C8;
<ul>
<li>mapping</li>
</ul>
<pre data-role="codeBlock" data-info class="language-"><code>&#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;       &#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;
&#x2502; AD: DSI &#x2502;&#x2500;&#x2500;&#x2500;&#x2510;   &#x2502;        &#x2502;
&#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;   &#x2502;   &#x2502;        &#x2502;
              &#x2502;   &#x2502;        &#x2502;        &#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;
              &#x2502;   &#x2502;        &#x2502;        &#x2502; Liferay &#x2502;
              &#x2502;   &#x2502;        &#x2502;   &#x250C;&#x2500;&#x2500;&#x2500;&#x25B6;&#x2502;  User   &#x2502;
              &#x2502;   &#x2502;        &#x2502;   &#x2502;    &#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;
&#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;   &#x2502;   &#x2502;  User  &#x2502;   &#x2502;
&#x2502; AD:ARI  &#x2502;&#x2500;&#x2500;&#x2500;&#x253C;&#x2500;&#x2500;&#x25B6;&#x2502;Importer&#x2502;&#x2500;&#x2500;&#x2500;&#x2524;
&#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;   &#x2502;   &#x2502;        &#x2502;   &#x2502;    &#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;
              &#x2502;   &#x2502;        &#x2502;   &#x2502;    &#x2502;   DS    &#x2502;
              &#x2502;   &#x2502;        &#x2502;   &#x2514;&#x2500;&#x2500;&#x2500;&#x25B6;&#x2502;UserInfo &#x2502;
              &#x2502;   &#x2502;        &#x2502;        &#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;
              &#x2502;   &#x2502;        &#x2502;
&#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;   &#x2502;   &#x2502;        &#x2502;
&#x2502; AD:DSE  &#x2502;&#x2500;&#x2500;&#x2500;&#x2518;   &#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;
&#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;
</code></pre></li>
</ul>
</section><section vertical="true" lineno="76" class="slide " data-line="76" data-h="1" data-v="5">
<h2 class="mume-header" id="%E4%BB%8A%E5%9B%9E%E3%81%AE%E3%82%B7%E3%83%8A%E3%83%AA%E3%82%AA-1">&#x4ECA;&#x56DE;&#x306E;&#x30B7;&#x30CA;&#x30EA;&#x30AA;</h2>

<ul>
<li>
<p>AD&#x30D5;&#x30A3;&#x30FC;&#x30EB;&#x30C9;&#x3068;Liferay&#x30A8;&#x30F3;&#x30C6;&#x30A3;&#x30C6;&#x30A3;&#x306E;&#x30DE;&#x30C3;&#x30D4;&#x30F3;&#x30B0;</p>
<ul>
<li><code>ad.enabled = true</code>&#x306E;&#x5834;&#x5408;Liferay&#x306E;&#x30E6;&#x30FC;&#x30B6;&#x306F;&#x6709;&#x52B9;&#xFF08;status=0&#xFF09;</li>
<li><code>ad.enabled = false</code>&#x306E;&#x5834;&#x5408;Liferay&#x306E;&#x30E6;&#x30FC;&#x30B6;&#x306F;&#x7121;&#x52B9;&#xFF08;status=5&#xFF09;</li>
</ul>
<pre data-role="codeBlock" data-info class="language-"><code>                      User                    UserInfo
&#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;   &#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;
&#x2502;   AD    &#x2502; screen  &#x2502;  mail   &#x2502; enabled &#x2502;   &#x2502;  location   &#x2502;
&#x2502;location &#x2502;  Name   &#x2502; Address &#x2502;         &#x2502;   &#x2502;             &#x2502;
&#x251C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x253C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x253C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x253C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2524;   &#x251C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2524;
&#x2502;   DSI   &#x2502;windowsId&#x2502;  mail   &#x2502; status  &#x2502;   &#x2502;city+country &#x2502;
&#x251C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x253C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x253C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x253C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2524;   &#x251C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2524;
&#x2502;   DSE   &#x2502;windowsId&#x2502;  mail   &#x2502; status  &#x2502;   &#x2502;    city     &#x2502;
&#x251C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x253C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x253C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x253C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2524;   &#x251C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2524;
&#x2502;   ARI   &#x2502;windowsId&#x2502;  mail   &#x2502; status  &#x2502;   &#x2502;state+country&#x2502;
&#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;   &#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;
</code></pre></li>
<li>
<p>&#x3067;&#x306F;&#x3001;&#x59CB;&#x3081;&#x307E;&#x3057;&#x3087;&#x3046;</p>
</li>
</ul>
</section></section><section><section lineno="98" class="slide " data-line="98" data-h="2" data-v="0">
<h2 class="mume-header" id="prepare">Prepare</h2>

<ul>
<li>Liferay IDE / Workspace / IntelliJ &#x3092;&#x8D77;&#x52D5;&#x3057;
<ul>
<li>liferay-dxp-7.4-u102&#xFF08;&#x5B9F;&#x8CEA;2023q4.7&#xFF09;&#x306E;Workspace&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="103" class="slide " data-line="103" data-h="2" data-v="1">
<h2 class="mume-header" id="skeleton">Skeleton</h2>

<ul>
<li>&#x30B3;&#x30FC;&#x30C9;&#x304C;&#x306A;&#x3044;&#x3068;&#x30C6;&#x30B9;&#x30C8;&#x3067;&#x304D;&#x306A;&#x3044;&#x306E;&#x3067;&#x4ECA;&#x56DE;&#x306F;&#x307E;&#x305A;&#x300C;&#x6700;&#x3082;&#x30B7;&#x30F3;&#x30D7;&#x30EB;&#x306A;&#x52D5;&#x4F5C;&#x53EF;&#x80FD;&#x306E;&#x30B3;&#x30FC;&#x30C9;&#x300D;&#x3092;&#x66F8;&#x304D;&#x307E;&#x3057;&#x3087;&#x3046;</li>
<li>&#x30B7;&#x30CA;&#x30EA;&#x30AA;&#x306E;&#x300C;&#x6700;&#x3082;&#x30B7;&#x30F3;&#x30D7;&#x30EB;&#x306A;&#x52D5;&#x4F5C;&#x53EF;&#x80FD;&#x30E2;&#x30B8;&#x30E5;&#x30FC;&#x30EB;&#x300D;&#x306F;&#x3060;&#x3044;&#x305F;&#x3044;&#x3053;&#x3093;&#x306A;&#x611F;&#x3058;&#xFF08;&#x5F53;&#x793E;&#x8ABF;&#x3079;&#xFF09;
<ul>
<li>DsUserImport&#x30E2;&#x30B8;&#x30E5;&#x30FC;&#x30EB;</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DsiUserImporterImpl</span> <span class="token keyword">implements</span> <span class="token class-name">DsUserImporter</span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">importUser</span><span class="token punctuation">(</span><span class="token class-name">JSONObject</span> userObj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> screenName <span class="token operator">=</span> userObj<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;windowsId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> emailAddr <span class="token operator">=</span> userObj<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;mail&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> location <span class="token operator">=</span> <span class="token function">getLocation</span><span class="token punctuation">(</span>userObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">boolean</span> enabled <span class="token operator">=</span> userObj<span class="token punctuation">.</span><span class="token function">getBoolean</span><span class="token punctuation">(</span><span class="token string">&quot;enabled&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">createDsUser</span><span class="token punctuation">(</span>screenName<span class="token punctuation">,</span> emailAddr<span class="token punctuation">,</span> enabled<span class="token punctuation">,</span> location<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">getLocation</span><span class="token punctuation">(</span><span class="token class-name">JSONObject</span> userObj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">createDsUser</span><span class="token punctuation">(</span><span class="token class-name">String</span> screenName<span class="token punctuation">,</span> <span class="token class-name">String</span> emailAddr<span class="token punctuation">,</span> <span class="token class-name">Boolean</span> enabled<span class="token punctuation">,</span> <span class="token class-name">String</span> location<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</pre></li>
</ul>
</section><section vertical="true" lineno="131" class="slide " data-line="131" data-h="2" data-v="2">
<h2 class="mume-header" id="skeleton-1">Skeleton</h2>

<ul>
<li>&#x7D9A;&#x304D;&#x3001;DsUserInfo&#x30A8;&#x30F3;&#x30C6;&#x30A3;&#x30C6;&#x30A3;&#x306E;service-builder
<ul>
<li>service.xml<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>service-builder</span> <span class="token attr-name">dependency-injector</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ds<span class="token punctuation">&quot;</span></span> <span class="token attr-name">package-path</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>test.workaround.ds.user.info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>namespace</span><span class="token punctuation">&gt;</span></span>TeskWksp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>namespace</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entity</span> <span class="token attr-name">local-service</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>DsUserInfo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">remote-service</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">uuid</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>column</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dsUserInfoId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">primary</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>long<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>column</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>userId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>long<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>column</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>location<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>String<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>entity</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>service-builder</span><span class="token punctuation">&gt;</span></span>
</pre></li>
<li>build-service</li>
<li><code>DsUserInfoLocalServiceImpl</code>&#x306B;&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x3092;&#x8FFD;&#x52A0;&#x3059;&#x308B;<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token class-name">DsUserInfo</span> <span class="token function">addDsUserInfo</span><span class="token punctuation">(</span><span class="token keyword">long</span> userId<span class="token punctuation">,</span> <span class="token class-name">String</span> location<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">PortalException</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></li>
<li>build-service</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="154" class="slide " data-line="154" data-h="2" data-v="3">
<h2 class="mume-header" id="skeleton-2">Skeleton</h2>

<ul>
<li>DSUserImporter&#x306E;&#x6A5F;&#x80FD;&#x8981;&#x7D20;<pre data-role="codeBlock" data-info class="language-"><code>     &#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;
     &#x2502;    DsiUserImporterImpl    &#x2502;
     &#x2502;        importUser         &#x2502;
     &#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;
                   &#x2502;
        &#x250C;&#x2500;&#x2500;&#x2500;use&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;use&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;
&#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x25BC;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;       &#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x25BC;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;
&#x2502; getLocation  &#x2502;       &#x2502;  createUser  &#x2502;
&#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;       &#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;
</code></pre></li>
<li>&#x4ECA;&#x56DE;&#x306E;&#x5B9F;&#x88C5;&#x9806;&#x756A;&#xFF08;&#x30C6;&#x30B9;&#x30C8;&#x306E;&#x96E3;&#x6613;&#x5EA6;&#x9806;&#x756A;&#xFF09;
<ul>
<li>getLocation</li>
<li>createUser</li>
<li>importUser</li>
</ul>
</li>
<li>let&apos;s go</li>
</ul>
</section><section vertical="true" lineno="175" class="slide " data-line="175" data-h="2" data-v="4">
<h2 class="mume-header" id="%E5%AE%9F%E8%A3%85%E3%81%B8">&#x5B9F;&#x88C5;&#x3078;</h2>

<ul>
<li>&#x4ECA;&#x56DE;&#x306E;&#x5B9F;&#x88C5;&#x306E;&#x6D41;&#x308C;&#x306F;&#x3061;&#x3087;&#x3063;&#x3068;&#x5909;&#x308F;&#x3063;&#x3066;
<ul>
<li>&#x5B9F;&#x88C5;&#x3057;&#x305F;&#x3044;&#x6A5F;&#x80FD;&#x306E;&#x30E6;&#x30CB;&#x30C3;&#x30C8;&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x5148;&#x306B;&#x66F8;&#x304F;</li>
<li>&#x305D;&#x306E;&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x6210;&#x529F;&#x3067;&#x304D;&#x308B;&#x30B3;&#x30FC;&#x30C9;&#x3092;&#x5B9F;&#x88C5;/Refactoring&#x3059;&#x308B;</li>
<li>&#x7E70;&#x308A;&#x8FD4;&#x3057;</li>
</ul>
</li>
</ul>
</section></section><section><section lineno="182" class="slide " data-line="182" data-h="3" data-v="0">
<h2 class="mume-header" id="unit-test">Unit Test</h2>

<ul>
<li>&#x6A5F;&#x80FD;&#x306E;&#x8981;&#x7D20;&#x3092;&#x5B9F;&#x88C5;&#x3059;&#x308B;
<ul>
<li>getLocation &#x2190; &#x4ECA;&#x306F;&#x3053;&#x3053;</li>
<li>createUser</li>
<li>importUser</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="189" class="slide " data-line="189" data-h="3" data-v="1">
<h2 class="mume-header" id="unit-test-1">Unit Test</h2>

<ul>
<li>getLocation&#x306E;&#x30C6;&#x30B9;&#x30C8;&#x30B1;&#x30FC;&#x30B9;&#x3092;&#x8003;&#x3048;&#x3066;&#x307F;&#x307E;&#x3057;&#x3087;&#x3046;
<ul>
<li>&#x6B63;&#x5E38;&#x7CFB;
<ul>
<li>city + &quot; &quot; + country</li>
</ul>
</li>
<li>&#x7570;&#x5E38;&#x7CFB;
<ul>
<li>city == null</li>
<li>country == null</li>
<li>city == null &amp;&amp; country == null</li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="199" class="slide " data-line="199" data-h="3" data-v="2">
<h2 class="mume-header" id="lets-code">Let&apos;s Code</h2>

<ul>
<li>&#x4ECA;&#x56DE;&#x306F;JUnit4&#x3092;&#x5229;&#x7528;
<ul>
<li>kwsk&#x306F;<a href="https://junit.org/junit4/">HP</a>&#x307E;&#x3067;</li>
<li>5&#x3092;&#x907F;&#x3051;&#x308B;&#x7406;&#x7531;&#x306F;&#x5F8C;&#x3067;</li>
<li>workshop&#x306A;&#x306E;&#x3067;&#x30B3;&#x30FC;&#x30C9;&#x3092;&#x30B3;&#x30D4;&#x30DA;&#x30FC;&#x3057;&#x306A;&#x304C;&#x3089;&#x8AAC;&#x660E;
<ul>
<li>&#x4F59;&#x529B;&#x306E;&#x3042;&#x308B;&#x65B9;&#x306F;&#x81EA;&#x8EAB;&#x306E;&#x597D;&#x307F;&#x306E;&#x5B9F;&#x88C5;&#x3067;&#x3069;&#x3046;&#x305E;&#x3046;</li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="207" class="slide " data-line="207" data-h="3" data-v="3">
<h2 class="mume-header" id="lets-code-1">Let&apos;s Code</h2>

<ul>
<li><code>build.gradle</code>
<ul>
<li>&#x4F9D;&#x5B58;&#x30D1;&#x30C3;&#x30B1;&#x30FC;&#x30B8;&#x306E;&#x5C0E;&#x5165;</li>
<li>gradle&#x306E;&#x30C6;&#x30B9;&#x30C8;Runner&#x306E;&#x8A2D;&#x5B9A;</li>
<li><code>test</code> prefix&#x306B;&#x6CE8;&#x76EE;</li>
</ul>
<pre data-role="codeBlock" data-info class="language-"><code>dependencies {
  compileOnly group: &quot;com.liferay.portal&quot;, name: &quot;release.dxp.api&quot;
  testCompile &quot;com.liferay.portal:release.dxp.api&quot;
  testCompile (&apos;junit:junit:4.13&apos;)
}

test {
  useJUnit()
  testLogging {
    events &quot;passed&quot;, &quot;skipped&quot;, &quot;failed&quot;
  }
}
</code></pre></li>
</ul>
</section><section vertical="true" lineno="228" class="slide " data-line="228" data-h="3" data-v="4">
<h2 class="mume-header" id="lets-code-2">Let&apos;s Code</h2>

<ul>
<li>&#x30C6;&#x30B9;&#x30C8;&#x30B1;&#x30FC;&#x30B9;&#x306E;&#x4F5C;&#x6210;
<ul>
<li><code>ds-user-import</code>&#x30D1;&#x30C3;&#x30B1;&#x30FC;&#x30B8;&#x306B;<code>src/test/java</code>&#x30BD;&#x30FC;&#x30B9;&#x30D1;&#x30C3;&#x30B1;&#x30FC;&#x30B8;&#x306E;&#x8FFD;&#x52A0;</li>
<li><code>DsiLocationTest</code>&#x30AF;&#x30E9;&#x30B9;</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DsiLocationTest</span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@Before</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Test</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getLocationNormal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</pre></li>
</ul>
</section><section vertical="true" lineno="245" class="slide " data-line="245" data-h="3" data-v="5">
<h2 class="mume-header" id="lets-code-3">Let&apos;s Code</h2>

<ul>
<li>&#x3061;&#x3087;&#x3063;&#x3068;&#x8AAC;&#x660E;
<ul>
<li>JUnit&#x306E;&#x30C6;&#x30B9;&#x30C8;&#x30AF;&#x30E9;&#x30B9;&#x306F;&#x4E00;&#x822C;&#x30AF;&#x30E9;&#x30B9;&#x3068;&#x5909;&#x308F;&#x3089;&#x306A;&#x3044;</li>
<li>&#x30A2;&#x30CE;&#x30C6;&#x30FC;&#x30B7;&#x30E7;&#x30F3;&#x306B;&#x3088;&#x308A;&#x30C6;&#x30B9;&#x30C8;&#x306E;&#x30B7;&#x30CA;&#x30EA;&#x30AA;&#x3092;&#x5B9A;&#x7FA9;&#x3059;&#x308B;
<ul>
<li><code>@Test</code>&#xFF1A;&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x5B9F;&#x884C;&#x3059;&#x308B;&#x30E1;&#x30BD;&#x30C3;&#x30C9;
<ul>
<li>&#x4E00;&#x500B;&#x30AF;&#x30E9;&#x30B9;&#x306E;&#x4E2D;&#x306B;&#x8907;&#x6570;<code>@Test</code>&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x304C;&#x5B9A;&#x7FA9;&#x53EF;&#x80FD;</li>
</ul>
</li>
<li><code>@Before</code>&#x3001;<code>@BeforeClass</code>&#xFF1A;<code>@Test</code>&#x5B9F;&#x884C;&#x524D;&#x306E;&#x6E96;&#x5099;
<ul>
<li><code>@Before</code>&#xFF1A;&#x30C6;&#x30B9;&#x30C8;&#x3054;&#x3068;&#x90FD;&#x5EA6;&#x5B9F;&#x884C;</li>
<li><code>@BeforeClass</code>&#xFF1A;&#x5168;&#x3066;&#x306E;&#x30C6;&#x30B9;&#x30C8;&#x306E;&#x524D;&#x306B;&#x4E00;&#x56DE;&#x3060;&#x3051;</li>
</ul>
</li>
<li><code>@After</code>&#x3001;<code>@AfterClass</code>&#xFF1A;<code>@Before</code>&#x3068;&#x540C;&#x3058;</li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="258" class="slide " data-line="258" data-h="3" data-v="6">
<h2 class="mume-header" id="lets-code-4">Let&apos;s Code</h2>

<ul>
<li>&#x30C6;&#x30B9;&#x30C8;&#x30B3;&#x30FC;&#x30C9;&#x3092;&#x5165;&#x308C;&#x307E;&#x3057;&#x3087;&#x3046;<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DsiLocationTest</span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@Before</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    userImporter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DsiUserImporterImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Test</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getLocationNormal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">JSONObject</span> obj <span class="token operator">=</span> <span class="token class-name">JSONFactoryUtil</span><span class="token punctuation">.</span><span class="token function">createJSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;city&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;city1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;country&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;country1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> res <span class="token operator">=</span> userImporter<span class="token punctuation">.</span><span class="token function">getLocation</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;city1 country1&quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token class-name">DsiUserImporterImpl</span> userImporter<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></li>
<li>&#x306A;&#x306B;&#x304B;&#x554F;&#x984C;&#x3042;&#x308B;&#xFF1F;</li>
</ul>
</section><section vertical="true" lineno="284" class="slide " data-line="284" data-h="3" data-v="7">
<h2 class="mume-header" id="lets-code-5">Let&apos;s Code</h2>

<ul>
<li>Private / Protected &#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x306E;&#x30C6;&#x30B9;&#x30C8;&#x306E;&#x5FC5;&#x8981;&#x6027;
<ul>
<li>&#x5341;&#x6570;&#x5E74;&#x306E;&#x8B70;&#x8AD6;&#x3092;&#x7D4C;&#x3063;&#x3066;&#x307E;&#x3060;&#x7D50;&#x679C;&#x304C;&#x51FA;&#x306A;&#x3044;</li>
<li>&#x4E00;&#x5FDC;&#x3046;&#x3061;&#x306E;&#x30E6;&#x30FC;&#x30BA;&#x30B1;&#x30FC;&#x30B9;&#xFF08;&#xFF1D;&#x30D3;&#x30B8;&#x30CD;&#x30B9;&#x30ED;&#x30B8;&#x30C3;&#x30AF;&#x8D85;&#x9762;&#x5012;&#xFF09;&#x3092;&#x8003;&#x3048;&#x308B;&#x3068;&#x5FC5;&#x8981;&#x306E;&#x5834;&#x5408;&#x30C6;&#x30B9;&#x30C8;&#x3059;&#x308B;&#x65B9;&#x304C;&#x826F;&#x3055;&#x305D;&#x3046;</li>
<li>how to ?
<ul>
<li>Reflection
<ul>
<li><code>getDeclaredMethod(</code>&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x540D;&#x3001;&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x306E;&#x30D1;&#x30E9;&#x30E1;&#x30FC;&#x30BF;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x306E;&#x30EA;&#x30B9;&#x30C8;<code>)</code></li>
</ul>
</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getLocationNormal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token class-name">String</span> res <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>userImporter<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;city1 country1&quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token class-name">Method</span> <span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
  <span class="token class-name">Method</span> m <span class="token operator">=</span> <span class="token class-name">DsiUserImporterImpl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token string">&quot;getLocation&quot;</span><span class="token punctuation">,</span> <span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  m<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> m<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="306" class="slide " data-line="306" data-h="3" data-v="8">
<h2 class="mume-header" id="lets-code-6">Let&apos;s Code</h2>

<ul>
<li>Reflection&#x3067;&#x30C6;&#x30B9;&#x30C8;<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DsiLocationTest</span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@Before</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    userImporter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DsiUserImporterImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Test</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getLocationNormal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">JSONObject</span> obj <span class="token operator">=</span> <span class="token class-name">JSONFactoryUtil</span><span class="token punctuation">.</span><span class="token function">createJSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;city&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;city1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;country&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> res <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>userImporter<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;city1 country1&quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token class-name">Method</span> <span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">Method</span> m <span class="token operator">=</span> <span class="token class-name">DsiUserImporterImpl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token string">&quot;getLocation&quot;</span><span class="token punctuation">,</span> <span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> m<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token class-name">DsiUserImporterImpl</span> userImporter<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</pre></li>
</ul>
</section><section vertical="true" lineno="337" class="slide " data-line="337" data-h="3" data-v="9">
<h2 class="mume-header" id="lets-run">Let&apos;s Run</h2>

<ul>
<li>
<p>JUnit&#x3067;&#x30E6;&#x30CB;&#x30C3;&#x30C8;&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x5B9F;&#x884C;&#x3059;&#x308B;</p>
<ul>
<li>Eclipse&#xFF08;&#x591A;&#x5206;&#x4ED6;&#x306E;JUnit&#x3092;&#x30B5;&#x30DD;&#x30FC;&#x30C8;&#x3059;&#x308B;IDE&#x3082;&#xFF09;&#x3060;&#x3068;&#x3001;<code>scr/test/java</code>&#x30D1;&#x30C3;&#x30B1;&#x30FC;&#x30B8;&#x306B;&#x30DE;&#x30A6;&#x30B9;&#x53F3;&#x30AF;&#x30EA;&#x30C3;&#x30AF;&#x3057;&#x3001;&#x300C;Run as&#x300D;&#x306B;<code>JUnit</code>&#x3092;&#x6307;&#x5B9A;&#x3059;&#x308C;&#x3070;JUnit&#x3067;&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x5B9F;&#x884C;&#x3067;&#x304D;&#x308B;</li>
<li>&#x3067;&#x304D;&#x306A;&#x3044;&#x5834;&#x5408;&#x306F;<code>gradle</code>&#x306E;<code>test</code>&#x30BF;&#x30B9;&#x30AF;&#x3092;&#x5B9F;&#x884C;</li>
</ul>
<pre data-role="codeBlock" data-info class="language-"><code>./gradlew :modules:[path_to_your_project]:test
</code></pre></li>
<li>
<p>&#x306A;&#x306B;&#x304B;&#x554F;&#x984C;&#x3042;&#x308B;&#xFF1F;</p>
<pre data-role="codeBlock" data-info class="language-"><code>java.lang.NullPointerException
  at com.liferay.portal.kernel.json.JSONFactoryUtil.createJSONObject(JSONFactoryUtil.java:61)
</code></pre><ul>
<li>why?
<ul>
<li><code>JSONFactoryUtil</code>&#x306E;&#x5185;&#x90E8;&#x306E;&#x30D1;&#x30E9;&#x30E1;&#x30FC;&#x30BF;&#x306F;Liferay&#x30DD;&#x30FC;&#x30BF;&#x30EB;&#x306B;&#x4F9D;&#x5B58;&#x3057;&#x3066;&#x3044;&#x308B;</li>
</ul>
</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// JSONFactoryUtil</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">JSONFactory</span> _jsonFactory<span class="token punctuation">;</span>
</pre></li>
</ul>
</section><section vertical="true" lineno="359" class="slide " data-line="359" data-h="3" data-v="10">
<h2 class="mume-header" id="issue-of-testing-in-liferay-no-1">Issue of testing in Liferay, No. 1</h2>

<ul>
<li>&#x30E6;&#x30CB;&#x30C3;&#x30C8;&#x30C6;&#x30B9;&#x30C8;&#x306E;&#x57FA;&#x672C;
<ul>
<li>&#x305D;&#x306E;&#x30E2;&#x30B8;&#x30E5;&#x30FC;&#x30EB;&#x3060;&#x3051;&#x3067;&#x5B9F;&#x884C;&#x3067;&#x304D;&#x308B;
<ul>
<li>&#x5916;&#x90E8;&#x306E;&#x30E6;&#x30FC;&#x30B6;&#x304C;&#x5909;&#x66F4;&#x3067;&#x304D;&#x306A;&#x3044;&#x30B3;&#x30FC;&#x30C9;&#x3092;&#x542B;&#x307E;&#x306A;&#x3044;</li>
</ul>
</li>
<li>&#x305F;&#x3060;&#x3057;&#x3001;Liferay&#x306E;&#x958B;&#x767A;&#x306B;&#x4F34;&#x3044;&#x3001;&#x5C11;&#x306A;&#x304F;&#x3067;&#x3082;<code>com.liferay.portal</code>&#x7CFB;&#x306E;&#x30D1;&#x30C3;&#x30B1;&#x30FC;&#x30B8;&#x3092;&#x5229;&#x7528;&#x3057;&#x306A;&#x3044;&#x3068;&#x3044;&#x3051;&#x306A;&#x3044;</li>
<li><strong>Liferay&#x958B;&#x767A;&#x306B;&#x304A;&#x3051;&#x308B;&#x30E6;&#x30CB;&#x30C3;&#x30C8;&#x30C6;&#x30B9;&#x30C8;&#x306F;&#x57FA;&#x672C;&#x7684;&#x306B;&#x539F;&#x7406;&#x4E3B;&#x7FA9;&#x306E;&#x7D50;&#x5408;&#x30C6;&#x30B9;&#x30C8;&#x306B;&#x306A;&#x308B;</strong></li>
</ul>
</li>
<li>&#x5BFE;&#x7B56;&#x306F;&#xFF1F;</li>
</ul>
</section><section vertical="true" lineno="368" class="slide " data-line="368" data-h="3" data-v="11">
<h2 class="mume-header" id="issue-of-testing-in-liferay-no-1-1">Issue of testing in Liferay, No. 1</h2>

<ul>
<li>&#x5BFE;&#x7B56;&#xFF11;&#xFF1A;&#x624B;&#x4F5C;&#x696D;&#x3067;&#x5FC5;&#x8981;&#x306A;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3092;&#x5229;&#x7528;&#x3059;&#x308B;<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token class-name">JSONObject</span> obj <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JsonFactoryImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createJSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><ul>
<li>&#x7D50;&#x679C;&#x306F;&#xFF1F;</li>
</ul>
<pre data-role="codeBlock" data-info class="language-"><code>java.lang.NoClassDefFoundError: org/jabsorb/serializer/MarshallException
at test.workaround.ds.user.importer.test.DsiLocationTest.getLocationNormal(DsiLocationTest.java:25)
</code></pre><ul>
<li>Why?
<ul>
<li>&#x30C6;&#x30B9;&#x30C8;&#x306E;&#x5B9F;&#x884C;&#x74B0;&#x5883;&#x306F;<code>testCompile</code>&#x4E2D;&#x306E;jar&#x306E;&#x307F;&#x306B;&#x56FA;&#x5B9A;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;</li>
<li><code>JsonFactoryImpl</code>&#x306E;&#x4F9D;&#x5B58;&#x30D1;&#x30C3;&#x30B1;&#x30FC;&#x30B8;&#x3082;<code>testCompile</code>&#x306B;&#x5165;&#x308C;&#x306A;&#x3044;&#x3068;&#x3044;&#x3051;&#x306A;&#x3044;</li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="383" class="slide " data-line="383" data-h="3" data-v="12">
<h2 class="mume-header" id="issue-of-testing-in-liferay-no-1-2">Issue of testing in Liferay, No. 1</h2>

<ul>
<li><code>JsonFactory</code>&#x306F;&#x9762;&#x5012;&#x306A;&#x306E;&#x3067;&#x76F4;&#x63A5;<code>JSONObjectImpl</code>&#x3092;&#x4F5C;&#x3063;&#x3066;&#x307F;&#x307E;&#x3057;&#x3087;&#x3046;
<ul>
<li><code>@Test</code>&#x30E1;&#x30BD;&#x30C3;&#x30C9;</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token class-name">JSONObject</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSONObjectImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><ul>
<li><code>build.gradle</code></li>
</ul>
<pre data-role="codeBlock" data-info class="language-"><code>testCompile &apos;org.json:json:20231013&apos;
</code></pre><ul>
<li>&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x3059;&#x308B;
<ul>
<li>&#x6210;&#x529F;&#xFF08;&#xFF1F;&#xFF09;</li>
</ul>
</li>
</ul>
<pre data-role="codeBlock" data-info class="language-"><code>java.lang.AssertionError: expected:&lt;city1 country1&gt; but was:&lt;null&gt;
</code></pre></li>
</ul>
</section><section vertical="true" lineno="400" class="slide " data-line="400" data-h="3" data-v="13">
<h2 class="mume-header" id="refactoring">Refactoring</h2>

<ul>
<li><code>getLocationNormal</code>&#x3092;&#x6210;&#x529F;&#x3055;&#x305B;&#x308B;&#x305F;&#x3081;&#x306B;&#x3001;<code>DsiUserImporterImpl</code>&#x3092;&#x3069;&#x3046;&#x5909;&#x66F4;&#x3059;&#x308B;&#x306E;&#x304B;&#xFF1F;<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// DsiUserImporterImpl.java</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">getLocation</span><span class="token punctuation">(</span><span class="token class-name">JSONObject</span> userObj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> city <span class="token operator">=</span> userObj<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;city&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> country <span class="token operator">=</span> userObj<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;country&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> city <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> country<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></li>
<li>&#x3082;&#x3046;&#x4E00;&#x56DE;&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x3059;&#x308B;
<ul>
<li>all green</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="414" class="slide " data-line="414" data-h="3" data-v="14">
<h2 class="mume-header" id="issue-of-testing-in-liferay-no-1-3">Issue of testing in Liferay, No. 1</h2>

<ul>
<li>&#x5BFE;&#x7B56;&#xFF11;&#x306E;&#x554F;&#x984C;&#x70B9;
<ul>
<li>&#x5168;&#x3066;&#x5916;&#x90E8;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3068;&#x305D;&#x306E;&#x4F9D;&#x5B58;&#x30D1;&#x30C3;&#x30B1;&#x30FC;&#x30B8;&#x3092;<code>testCompile</code>&#x306B;&#x5165;&#x308C;&#x306A;&#x3044;&#x3068;&#x3044;&#x3051;&#x306A;&#x3044;</li>
<li>&#x30C6;&#x30B9;&#x30C8;&#x30B3;&#x30FC;&#x30C9;&#x3092;&#x6C5A;&#x67D3;&#x3057;&#x3066;&#x3044;&#x308B;
<ul>
<li>&#x5916;&#x90E8;&#x30D1;&#x30C3;&#x30B1;&#x30FC;&#x30B8;&#x306E;&#x4F9D;&#x5B58;&#x95A2;&#x4FC2;&#x304C;&#x66F4;&#x65B0;&#x3055;&#x308C;&#x308B;&#x3068;&#x30C6;&#x30B9;&#x30C8;&#x304C;&#x901A;&#x308C;&#x306A;&#x3044;</li>
</ul>
</li>
</ul>
</li>
<li>&#x5BFE;&#x7B56;&#xFF12;
<ul>
<li><code>Mock</code>
<ul>
<li>&#x4F9D;&#x5B58;&#x3059;&#x308B;&#x5916;&#x90E8;&#x30AF;&#x30E9;&#x30B9;<strong>&#x307D;&#x304F;</strong>&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;</li>
<li><code>Mockito</code>&#x3001;<code>PowerMock</code>&#x306A;&#x3069;&#x30C4;&#x30FC;&#x30EB;&#x3092;&#x5229;&#x7528;&#x3059;&#x308B;</li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="425" class="slide " data-line="425" data-h="3" data-v="15">
<h2 class="mume-header" id="lets-code-7">Let&apos;s Code</h2>

<ul>
<li>
<p>&#x4ECA;&#x56DE;&#x306F;<code>Mockito</code>&#x3092;&#x5229;&#x7528;&#x3059;&#x308B;</p>
<ul>
<li>Liferay&#x304C;&#x4F7F;&#x3063;&#x3066;&#x3044;&#x308B;</li>
<li>Powermock&#x306F;&#x53E4;&#x3044;&#x3001;&#x65B0;&#x30D0;&#x30FC;&#x30B8;&#x30E7;&#x30F3;&#x306E;Mockito&#x3067;&#x52D5;&#x4F5C;&#x3067;&#x304D;&#x306A;&#x3044;</li>
</ul>
</li>
<li>
<p><code>build.gradle</code>&#xFF08;<code>org.json</code>&#x3092;&#x524A;&#x9664;&#x3059;&#x308B;&#xFF09;</p>
<pre data-role="codeBlock" data-info class="language-"><code>testCompile &apos;org.mockito:mockito-core:3.12.4&apos;
</code></pre></li>
<li>
<p><code>DsiLocationTest</code></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">MockitoJUnitRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DsiLocationTest</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token annotation punctuation">@Test</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getLocationNormal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token function">when</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;city&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span><span class="token string">&quot;city1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">when</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;country&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span><span class="token string">&quot;country1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> res <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>userImporter<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;city1 country1&quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
  <span class="token annotation punctuation">@Mock</span>
  <span class="token keyword">private</span> <span class="token class-name">JSONObject</span> obj<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</pre></li>
</ul>
</section><section vertical="true" lineno="453" class="slide " data-line="453" data-h="3" data-v="16">
<h2 class="mume-header" id="lets-code-8">Let&apos;s Code</h2>

<ul>
<li>&#x3061;&#x3087;&#x3063;&#x3068;&#x8AAC;&#x660E;
<ul>
<li><code>@RunWith</code>&#xFF1A;JUnit&#x306E;&#x30D7;&#x30E9;&#x30B0;&#x30A4;&#x30F3;&#x307F;&#x305F;&#x3044;&#x306A;&#x3082;&#x306E;&#x3001;&#x30B3;&#x30FC;&#x30C9;&#x3092;&#x30B7;&#x30F3;&#x30D7;&#x30EB;&#x5316;&#x304B;&#x306B;&#x3059;&#x308B;
<ul>
<li>&#x4ECA;&#x56DE;&#x306F;<code>Mockito</code>&#x304C;&#x63D0;&#x4F9B;&#x3059;&#x308B;<code>MockitoJUnitRunner</code>&#x3092;&#x6307;&#x5B9A;&#x3059;&#x308B;</li>
<li>&#x8907;&#x6570;<code>Runner</code>&#x6307;&#x5B9A;&#x4E0D;&#x53EF;</li>
</ul>
</li>
<li>Mock&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x306E;&#x6307;&#x5B9A;</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token annotation punctuation">@Mock</span>
<span class="token keyword">private</span> <span class="token class-name">JSONObject</span> obj<span class="token punctuation">;</span>
</pre><ul>
<li>Mock&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3092;&#x52D5;&#x4F5C;&#x3055;&#x305B;&#x308B;
<ul>
<li>eg&#xFF1A;<code>JSONObject.getString(String key)</code>&#x304C;&#x547C;&#x3070;&#x308C;&#x308B;&#x6642;&#x3001;Mock&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x306E;&#x52D5;&#x4F5C;</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token function">when</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;city&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span><span class="token string">&quot;city1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// in getLocation(): obj.getString(&quot;city&quot;);</span>
</pre><ul>
<li>&#x672C;&#x7269;&#x3068;&#x6BD4;&#x8F03;&#x3057;&#x3066;&#x307F;&#x307E;&#x3057;&#x3087;&#x3046;</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token class-name">JSONObject</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSONObjectImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;city&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;city1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// in getLocation(): obj.getString(&quot;city&quot;);</span>
</pre></li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="477" class="slide " data-line="477" data-h="3" data-v="17">
<h2 class="mume-header" id="lets-run-1">Let&apos;s Run</h2>

<ul>
<li><code>country</code>&#x306E;mock&#x3082;&#x8FFD;&#x52A0;&#x3057;&#x3066;junit run</li>
<li>all green</li>
</ul>
</section><section vertical="true" lineno="482" class="slide " data-line="482" data-h="3" data-v="18">
<h2 class="mume-header" id="%E3%81%A1%E3%82%87%E3%81%A3%E3%81%A8%E3%83%87%E3%82%A3%E3%82%B9%E3%82%AB%E3%82%B7%E3%83%A7%E3%83%B3">&#x3061;&#x3087;&#x3063;&#x3068;&#x30C7;&#x30A3;&#x30B9;&#x30AB;&#x30B7;&#x30E7;&#x30F3;</h2>

<ul>
<li>Mock&#x306E;&#x5229;&#x70B9;
<ul>
<li>&#x5916;&#x90E8;API&#x306E;Mock&#x5316;&#x306B;&#x3088;&#x308A;&#x3001;&#x30C6;&#x30B9;&#x30C8;&#x30B3;&#x30FC;&#x30C9;&#x306F;&#x5916;&#x90E8;&#x306E;&#x5B9F;&#x88C5;&#x3092;&#x4F9D;&#x5B58;&#x3057;&#x306A;&#x304F;&#x306A;&#x308B;
<ul>
<li>the hell of dependencies</li>
</ul>
</li>
</ul>
</li>
<li>Mock&#x306E;&#x554F;&#x984C;&#x70B9;
<ul>
<li>&#x30C6;&#x30B9;&#x30C8;&#x30B3;&#x30FC;&#x30C9;&#xFF08;Mock&#x306E;&#x90E8;&#x5206;&#xFF09;&#x306F;&#x30C6;&#x30B9;&#x30C8;&#x5BFE;&#x8C61;&#x306E;&#x5B9F;&#x88C5;&#x65B9;&#x5F0F;&#x306B;&#x4F9D;&#x5B58;&#x3059;&#x308B;
<ul>
<li>eg: <code>getLocation</code>&#x4E2D;&#x306E;<code>obj.getString()</code>&#x3092;<code>jsonObject.get()</code>&#x306B;&#x5909;&#x66F4;&#x3059;&#x308B;
<ul>
<li>Mock&#x306E;&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x3082;<code>when(obj.get())</code>&#x306B;&#x5909;&#x66F4;&#x3057;&#x306A;&#x3044;&#x3068;&#x3044;&#x3051;&#x306A;&#x3044;</li>
</ul>
</li>
<li>&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x5316;&#x3067;&#x5909;&#x66F4;&#x5FC5;&#x8981;&#x306A;&#x90E8;&#x5206;&#x3092;&#x96C6;&#x7D04;&#x3067;&#x304D;&#x308B;&#x304C;&#x3001;&#x30C6;&#x30B9;&#x30C8;&#x30B3;&#x30FC;&#x30C9;&#x81EA;&#x4F53;&#x304C;&#x8907;&#x96D1;&#x5316;&#x306B;&#x306A;&#x308B;</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">doMock</span><span class="token punctuation">(</span><span class="token class-name">String</span> city<span class="token punctuation">,</span> <span class="token class-name">String</span> country<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">when</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;city&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span>city<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">when</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;country&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span>country<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="499" class="slide " data-line="499" data-h="3" data-v="19">
<h2 class="mume-header" id="%E7%B6%9A%E3%81%8D%E3%81%BE%E3%81%97%E3%82%87%E3%81%86">&#x7D9A;&#x304D;&#x307E;&#x3057;&#x3087;&#x3046;</h2>

<ul>
<li>getLocation&#x306E;&#x30C6;&#x30B9;&#x30C8;&#x5185;&#x5BB9;
<ul>
<li>&#x6B63;&#x5E38;&#x7CFB;
<ul>
<li>city + &quot; &quot; + country</li>
</ul>
</li>
<li>&#x7570;&#x5E38;&#x7CFB;
<ul>
<li>city == null &#x2190; &#x4ECA;&#x3053;&#x3053;</li>
<li>country == null</li>
<li>city == null &amp;&amp; country == null</li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="509" class="slide " data-line="509" data-h="3" data-v="20">
<h2 class="mume-header" id="unit-test-2">Unit Test</h2>

<ul>
<li><code>city == null</code>
<ul>
<li>&#x3068;&#x306B;&#x304B;&#x304F;&#x304A;&#x5BA2;&#x3055;&#x3093;&#x306B;&#x805E;&#x3044;&#x3066;&#x307F;&#x305F;&#x3089;&#x300C;&#x305D;&#x306E;&#x6642;country&#x3060;&#x3051;&#x306B;&#x3057;&#x3088;&#x3046;&#x300D;&#x3068;&#x56DE;&#x7B54;</li>
<li>&#x30C6;&#x30B9;&#x30C8;&#x30B1;&#x30FC;&#x30B9;&#x3092;&#x66F8;&#x304D;&#x307E;&#x3057;&#x3087;&#x3046;</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getLocationCityNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
  <span class="token function">doMock</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;country1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> res <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>userImporter<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;country1&quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><ul>
<li>run</li>
</ul>
<pre data-role="codeBlock" data-info class="language-"><code>org.junit.ComparisonFailure: expected:&lt;[]country1&gt; but was:&lt;[null ]country1&gt;
</code></pre></li>
</ul>
</section><section vertical="true" lineno="527" class="slide " data-line="527" data-h="3" data-v="21">
<h2 class="mume-header" id="refactoring-1">Refactoring</h2>

<ul>
<li>&#x8FFD;&#x52A0;&#x3055;&#x308C;&#x308B;&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x901A;&#x3059;&#x306E;&#x305F;&#x3081;<code>DsiUserImporterImpl</code>&#x3092;&#x5909;&#x66F4;&#x3057;&#x307E;&#x3057;&#x3087;&#x3046;<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">getLocation</span><span class="token punctuation">(</span><span class="token class-name">JSONObject</span> userObj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> city <span class="token operator">=</span> userObj<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;city&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> country <span class="token operator">=</span> userObj<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;country&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> spacer <span class="token operator">=</span> city<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> city <span class="token operator">+</span> spacer <span class="token operator">+</span> country<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></li>
<li>&#x524D;&#x8FF0;&#x306E;Mock&#x554F;&#x984C;&#x70B9;&#x3092;&#x89E3;&#x6D88;&#x3057;&#x307E;&#x3057;&#x3087;&#x3046;<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">doMock</span><span class="token punctuation">(</span><span class="token class-name">String</span> city<span class="token punctuation">,</span> <span class="token class-name">String</span> country<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">when</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;city&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span>city <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> city<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">when</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;country&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span>country <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> country<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></li>
<li>Run Test
<ul>
<li>all green</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="548" class="slide " data-line="548" data-h="3" data-v="22">
<h2 class="mume-header" id="%E7%B6%9A%E3%81%8D%E3%81%BE%E3%81%97%E3%82%87%E3%81%86-1">&#x7D9A;&#x304D;&#x307E;&#x3057;&#x3087;&#x3046;</h2>

<ul>
<li><code>country == null</code>
<ul>
<li>city&#x3060;&#x3051;</li>
</ul>
</li>
<li><code>city == null &amp;&amp; country == null</code>
<ul>
<li>&#x7A7A;&#x767D;</li>
</ul>
</li>
<li>&#x5B9F;&#x88C5;&#x3057;&#x3066;&#x307F;&#x307E;&#x3057;&#x3087;&#x3046;</li>
</ul>
</section><section vertical="true" lineno="557" class="slide " data-line="557" data-h="3" data-v="23">
<h2 class="mume-header" id="%E6%9C%80%E5%BE%8C%E3%81%AF%E3%81%93%E3%81%86%E3%81%AA%E3%82%8B">&#x6700;&#x5F8C;&#x306F;&#x3053;&#x3046;&#x306A;&#x308B;</h2>

<ul>
<li><code>DsiUserImporterImpl.java</code><pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">getLocation</span><span class="token punctuation">(</span><span class="token class-name">JSONObject</span> userObj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> city <span class="token operator">=</span> userObj<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;city&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> country <span class="token operator">=</span> userObj<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;country&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> spacer <span class="token operator">=</span> <span class="token punctuation">(</span>city<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> country<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> city <span class="token operator">+</span> spacer <span class="token operator">+</span> country<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></li>
<li><code>DsiLocationTest.java</code><pre data-role="codeBlock" data-info="java" class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getLocationCountryNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
  <span class="token function">doMock</span><span class="token punctuation">(</span><span class="token string">&quot;city1&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> res <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>userImporter<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;city1&quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getLocationBothNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
  <span class="token function">doMock</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> res <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>userImporter<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></li>
<li>Run Test</li>
</ul>
</section></section><section><section lineno="586" class="slide " data-line="586" data-h="4" data-v="0">
<h2 class="mume-header" id="where-am-i">Where am I?</h2>

<ul>
<li>DSUserImporter&#x306E;&#x6A5F;&#x80FD;&#x8981;&#x7D20;<pre data-role="codeBlock" data-info class="language-"><code>     &#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;
     &#x2502;    DsiUserImporterImpl    &#x2502;
     &#x2502;        importUser         &#x2502;
     &#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;
                   &#x2502;
        &#x250C;&#x2500;&#x2500;&#x2500;use&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;use&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;
&#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x25BC;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;       &#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x25BC;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;
&#x2502; getLocation  &#x2502;       &#x2502;  createUser  &#x2502;
&#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;       &#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;
</code></pre><ul>
<li>&#x30E6;&#x30CB;&#x30C3;&#x30C8;&#x30C6;&#x30B9;&#x30C8;&#x9806;&#x756A;
<ul>
<li>getLocation</li>
<li>createUser &#x2190; &#x4ECA;&#x306F;&#x3053;&#x3053;</li>
<li>importUser</li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="606" class="slide " data-line="606" data-h="4" data-v="1">
<h2 class="mume-header" id="skeleton-3">Skeleton</h2>

<ul>
<li>&#x540C;&#x3058;&#x304F;&#x307E;&#x305A;&#x306F;&#x57FA;&#x672C;&#x306A;&#x5B9F;&#x88C5;&#x3092;&#x66F8;&#x304F;<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">createUser</span><span class="token punctuation">(</span><span class="token class-name">String</span> screenName<span class="token punctuation">,</span> <span class="token class-name">String</span> emailAddr<span class="token punctuation">,</span> <span class="token keyword">boolean</span> enabled<span class="token punctuation">,</span> <span class="token class-name">String</span> location<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></li>
</ul>
</section><section vertical="true" lineno="614" class="slide " data-line="614" data-h="4" data-v="2">
<h2 class="mume-header" id="test-list">Test List</h2>

<ul>
<li><code>createUser</code>&#x306E;&#x30C6;&#x30B9;&#x30C8;&#x9805;&#x76EE;
<ul>
<li>Liferay&#x30E6;&#x30FC;&#x30B6;&#x304C;&#x6B63;&#x3057;&#x304F;&#x4F5C;&#x6210;&#x3055;&#x308C;&#x308B;&#x306E;&#x304B;
<ul>
<li>Liferay&#x30E6;&#x30FC;&#x30B6;&#x306E;&#x500B;&#x4EBA;&#x60C5;&#x5831;&#x306F;&#x6B63;&#x3057;&#x304F;&#x8A18;&#x5165;&#x3055;&#x308C;&#x308B;&#x306E;&#x304B;</li>
<li>Liferay&#x30E6;&#x30FC;&#x30B6;&#x306E;&#x6709;&#x52B9;/&#x7121;&#x52B9;&#x304C;&#x6B63;&#x3057;&#x304F;&#x8A2D;&#x5B9A;&#x3055;&#x308C;&#x308B;&#x306E;&#x304B;</li>
</ul>
</li>
<li>DsUserInfo&#x304C;&#x6B63;&#x3057;&#x304F;&#x4F5C;&#x6210;&#x3055;&#x308C;&#x308B;&#x306E;&#x304B;
<ul>
<li>DsUesrInfo&#x306E;&#x60C5;&#x5831;&#x306F;&#x6B63;&#x3057;&#x304F;&#x8A18;&#x5165;&#x3055;&#x308C;&#x308B;&#x306E;&#x304B;</li>
<li>DsuserInfo&#x306E;userId&#x306F;&#x6B63;&#x3057;&#x304F;Liferay&#x30E6;&#x30FC;&#x30B6;&#x3068;&#x9023;&#x643A;&#x3055;&#x308C;&#x308B;&#x306E;&#x304B;</li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="624" class="slide " data-line="624" data-h="4" data-v="3">
<h2 class="mume-header" id="lets-code-9">Let&apos;s Code</h2>

<ul>
<li>&#x30C6;&#x30B9;&#x30C8;&#x30B3;&#x30FC;&#x30C9;
<ul>
<li><code>DsiCreateUserTest.java</code></li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">createUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</pre><ul>
<li>???
<ul>
<li>&#x30C6;&#x30B9;&#x30C8;&#x3067;&#x304D;&#x308B;&#x308F;&#x3051;&#x3058;&#x3083;&#x306A;&#x3044;&#xFF08;&#x73FE;&#x6642;&#x70B9;&#xFF09;</li>
<li>&#x305D;&#x3082;&#x305D;&#x3082;Single-responsibility Principle&#x9055;&#x53CD;</li>
<li>&#x3069;&#x3046;&#x3059;&#x308B;&#xFF1F;</li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="639" class="slide " data-line="639" data-h="4" data-v="4">
<h2 class="mume-header" id="lets-code-10">Let&apos;s Code</h2>

<ul>
<li>Refactoring<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">createUser</span><span class="token punctuation">(</span><span class="token class-name">String</span> screenName<span class="token punctuation">,</span> <span class="token class-name">String</span> emailAddr<span class="token punctuation">,</span> <span class="token keyword">boolean</span> enabled<span class="token punctuation">,</span> <span class="token class-name">String</span> location<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">User</span> u <span class="token operator">=</span> <span class="token function">createLfUser</span><span class="token punctuation">(</span>screenName<span class="token punctuation">,</span> emailAddr<span class="token punctuation">,</span> enabled<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">DsUserInfo</span> ui <span class="token operator">=</span> <span class="token function">createUserInfo</span><span class="token punctuation">(</span>u<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> location<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token class-name">User</span> <span class="token function">createLfUser</span><span class="token punctuation">(</span><span class="token class-name">String</span> screenName<span class="token punctuation">,</span> <span class="token class-name">String</span> emailAddr<span class="token punctuation">,</span> <span class="token keyword">boolean</span> enabled<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token class-name">DsUserInfo</span> <span class="token function">createUserInfo</span><span class="token punctuation">(</span><span class="token keyword">long</span> userId<span class="token punctuation">,</span> <span class="token class-name">String</span> location<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></li>
</ul>
</section><section vertical="true" lineno="657" class="slide " data-line="657" data-h="4" data-v="5">
<h2 class="mume-header" id="lets-code-11">Let&apos;s Code</h2>

<ul>
<li><code>createLfUser</code>&#x306E;&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x66F8;&#x304D;&#x307E;&#x3057;&#x3087;&#x3046;
<ol>
<li>&#x6B63;&#x3057;&#x3044;<code>User</code>&#x30A8;&#x30F3;&#x30C6;&#x30A3;&#x30C6;&#x30A3;&#x3092;&#x4F5C;&#x6210;&#x3057;&#x305F;&#x306E;&#x304B;
<ul>
<li><code>User</code>&#x30A8;&#x30F3;&#x30C6;&#x30A3;&#x30C6;&#x30A3;&#x306E;&#x4F5C;&#x6210;&#x306F;&#x30E6;&#x30CB;&#x30C3;&#x30C8;&#x30C6;&#x30B9;&#x30C8;&#x5BFE;&#x8C61;&#x5916;&#xFF08;Integration&#x30C6;&#x30B9;&#x30C8;&#x306B;&#x306A;&#x308B;&#xFF09;</li>
</ul>
</li>
<li>&#x30E6;&#x30CB;&#x30C3;&#x30C8;&#x30C6;&#x30B9;&#x30C8;&#x304C;&#x3067;&#x304D;&#x308B;&#x306E;&#x306F;<code>User</code>&#x306E;<code>status</code>&#x304C;&#x6B63;&#x3057;&#x304F;&#x8A2D;&#x5B9A;&#x3057;&#x305F;&#x306E;&#x304B;</li>
</ol>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">createLfUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
  <span class="token class-name">User</span> u <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span><span class="token function">getCreateLfUserMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>userImporter<span class="token punctuation">,</span> <span class="token string">&quot;testName&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;testmail@dsi.com&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><ul>
<li>&#x540C;&#x3058;&#x304F;Reflection&#x3067;<code>createLfUser</code>&#x3092;&#x53D6;&#x5F97;&#x3057;&#x30C6;&#x30B9;&#x30C8;&#x3059;&#x308B;</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">private</span> <span class="token class-name">Method</span> <span class="token function">getCreateLfUserMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
  <span class="token class-name">Method</span> m <span class="token operator">=</span> <span class="token class-name">DsiUserImporterImpl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token string">&quot;createLfUser&quot;</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token keyword">boolean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  m<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> m<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><ul>
<li>&#x5F53;&#x7136;&#x30C6;&#x30B9;&#x30C8;&#x304C;&#x901A;&#x308C;&#x306A;&#x3044;&#x306E;&#x3067;<code>createLfUser</code>&#x3092;refactoring&#x3057;&#x307E;&#x3057;&#x3087;&#x3046;</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="680" class="slide " data-line="680" data-h="4" data-v="6">
<h2 class="mume-header" id="lets-code-12">Let&apos;s Code</h2>

<ul>
<li><code>createLfUser</code><pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">private</span> <span class="token class-name">User</span> <span class="token function">createLfUser</span><span class="token punctuation">(</span><span class="token class-name">String</span> screenName<span class="token punctuation">,</span> <span class="token class-name">String</span> emailAddr<span class="token punctuation">,</span> <span class="token keyword">boolean</span> enabled<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
  <span class="token class-name">User</span> u <span class="token operator">=</span> userLocalService<span class="token punctuation">.</span><span class="token function">addUser</span><span class="token punctuation">(</span>
      ADMIN_ID<span class="token punctuation">,</span> COMP_ID<span class="token punctuation">,</span>
      <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      screenName<span class="token punctuation">,</span> emailAddr<span class="token punctuation">,</span> <span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string">&quot;first&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;last&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1999</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  u<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span>enabled <span class="token operator">?</span> <span class="token class-name">WorkflowConstants</span><span class="token punctuation">.</span>STATUS_APPROVED <span class="token operator">:</span> <span class="token class-name">WorkflowConstants</span><span class="token punctuation">.</span>STATUS_INACTIVE<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> userLocalService<span class="token punctuation">.</span><span class="token function">updateUser</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">static</span> <span class="token keyword">long</span> ADMIN_ID <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> <span class="token keyword">long</span> COMP_ID <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Reference</span>
<span class="token class-name">UserLocalService</span> userLocalService<span class="token punctuation">;</span>
</pre></li>
<li>&#x30C6;&#x30B9;&#x30C8;
<ul>
<li>what&apos;s wrong?</li>
<li>&#x5F53;&#x7136;&#x306A;NPE
<ul>
<li>&#x30C6;&#x30B9;&#x30C8;&#x306B;OSGI&#x306E;&#x74B0;&#x5883;&#x304C;&#x306A;&#x3044;&#xFF08;=<code>UserLocalService</code>&#x3092;&#x6CE8;&#x5165;&#x3057;&#x308B;&#x6A5F;&#x80FD;&#x304C;&#x306A;&#x3044;&#xFF09;</li>
</ul>
</li>
<li>&#x5BFE;&#x7B56;&#xFF1A;<code>Mock</code></li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="706" class="slide " data-line="706" data-h="4" data-v="7">
<h2 class="mume-header" id="mockito%E3%81%A7%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%82%92%E3%83%A2%E3%83%83%E3%82%AF%E3%81%99%E3%82%8B">Mockito&#x3067;&#x30B5;&#x30FC;&#x30D3;&#x30B9;&#x3092;&#x30E2;&#x30C3;&#x30AF;&#x3059;&#x308B;</h2>

<ul>
<li>UserLocalService&#x306E;&#x30E2;&#x30C3;&#x30AF;&#x3057;&#x3001;&#x30C6;&#x30B9;&#x30C8;&#x4E2D;&#x3001;<code>DsiUserImporterImpl</code>&#x306B;&#x30A2;&#x30B5;&#x30A4;&#x30F3;&#x3059;&#x308B;
<ul>
<li>OSGI framework&#x306E;&#x4ED5;&#x4E8B;&#x3092;&#x771F;&#x4F3C;&#x3059;&#x308B;</li>
<li>Reflection&#x304C;&#x5FC5;&#x8981;</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token annotation punctuation">@Before</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
  userImporter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DsiUserImporterImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">Field</span> f <span class="token operator">=</span> <span class="token class-name">DsiUserImporterImpl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;userLocalService&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  f<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  f<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>userImporter<span class="token punctuation">,</span> userLocalService<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Mock</span>
<span class="token keyword">private</span> <span class="token class-name">UserLocalService</span> userLocalService<span class="token punctuation">;</span>
</pre><ul>
<li><code>@Mock</code>&#x30A2;&#x30CE;&#x30C6;&#x30FC;&#x30B7;&#x30E7;&#x30F3;
<ul>
<li>JUnit&#x306E;<code>@Runwith</code>&#x306B;<code>MockitoJUnitRunner</code>&#x306E;&#x6307;&#x5B9A;&#x304C;&#x5FC5;&#x8981;</li>
</ul>
</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token annotation punctuation">@Mock</span> <span class="token class-name">UserlOcalService</span> userLocalService<span class="token punctuation">;</span>
<span class="token comment">// equals:</span>
<span class="token class-name">UserLocalService</span> userLocalService <span class="token operator">=</span> <span class="token class-name">Mockito</span><span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token class-name">UserLocalService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></li>
</ul>
</section><section vertical="true" lineno="731" class="slide " data-line="731" data-h="4" data-v="8">
<h2 class="mume-header" id="mockito%E3%81%A7%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%82%92%E3%83%A2%E3%83%83%E3%82%AF%E3%81%99%E3%82%8B-1">Mockito&#x3067;&#x30B5;&#x30FC;&#x30D3;&#x30B9;&#x3092;&#x30E2;&#x30C3;&#x30AF;&#x3059;&#x308B;</h2>

<ul>
<li>&#x307E;&#x305F;&#x7D42;&#x308F;&#x3063;&#x3066;&#x3044;&#x306A;&#x3044;
<ul>
<li>&#x5148;&#x307B;&#x3068;&#x306E;<code>JSONObject</code>&#x306E;&#x30E2;&#x30C3;&#x30AF;&#x3068;&#x540C;&#x3058;&#x3001;<code>UserLocalService</code>&#x306E;&#x30E2;&#x30C3;&#x30AF;&#x3082;&#x4F55;&#x3082;&#x3067;&#x304D;&#x306A;&#x3044;</li>
<li>&#x300C;&#x4F55;&#x304C;&#x3067;&#x304D;&#x308B;&#x300D;&#x3092;&#x5B9A;&#x7FA9;&#xFF08;&#x2248;mock&#xFF09;&#x3057;&#x306A;&#x3044;&#x3068;&#x3044;&#x3051;&#x306A;&#x3044;
<ul>
<li><code>createLfUser</code>&#x306E;&#x30E1;&#x30BD;&#x30C3;&#x30C9;
<ul>
<li>mock&#x5BFE;&#x8C61;&#xFF1A;<code>addUser</code>&#x3068;<code>updateUser</code></li>
</ul>
</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token class-name">User</span> u <span class="token operator">=</span> userLocalService<span class="token punctuation">.</span><span class="token function">addUser</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> userLocalService<span class="token punctuation">.</span><span class="token function">updateUser</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><ul>
<li>mock&#xFF08;<code>DsiCreateUserTest.setUp()</code>&#xFF09;</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token class-name">User</span> userMock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">when</span><span class="token punctuation">(</span>userLocalService<span class="token punctuation">.</span><span class="token function">addUser</span><span class="token punctuation">(</span>
    <span class="token function">anyLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">anyLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">anyBoolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">anyBoolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">anyLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">anyLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">anyBoolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">anyInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">anyInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">anyInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">anyInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">anyBoolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span>userMock<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">when</span><span class="token punctuation">(</span>userLocalService<span class="token punctuation">.</span><span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span>userMock<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><ul>
<li>&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x5B9F;&#x884C;&#x3059;&#x308B;&#x3068;&#xFF1F;</li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="760" class="slide " data-line="760" data-h="4" data-v="9">
<h2 class="mume-header" id="mockito%E3%81%A7%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%82%92%E3%83%A2%E3%83%83%E3%82%AF%E3%81%99%E3%82%8B-2">Mockito&#x3067;&#x30B5;&#x30FC;&#x30D3;&#x30B9;&#x3092;&#x30E2;&#x30C3;&#x30AF;&#x3059;&#x308B;</h2>

<ul>
<li>Liferay&#x306E;Impl&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x5229;&#x7528;&#x306E;&#x554F;&#x984C;&#x3001;&#x518D;&#x3073;
<ul>
<li>hell of dependencies</li>
<li>Mock&#x3059;&#x308B;&#x2757;&#xFE0F;</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// User userMock = Mockito.mock(User.class);</span>
<span class="token annotation punctuation">@Mock</span>
<span class="token class-name">User</span> userMock<span class="token punctuation">;</span>
</pre><ul>
<li>&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x5B9F;&#x884C;&#x3059;&#x308B;
<ul>
<li>&#x6210;&#x529F;&#x3057;&#x305F;&#xFF01;</li>
</ul>
</li>
<li>&#x672C;&#x5F53;&#x306B;&#xFF1F;&#xFF08;&#x4F55;&#x304C;&#x304A;&#x304B;&#x3057;&#x3044;&#x3068;&#x601D;&#x3046;&#x65B9;&#x306F;&#x3044;&#x3089;&#x3063;&#x3057;&#x3083;&#x3063;&#x3066;&#x3044;&#x307E;&#x3059;&#x304B;&#xFF1F;&#xFF09;</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="775" class="slide " data-line="775" data-h="4" data-v="10">
<h2 class="mume-header" id="%E3%83%86%E3%82%B9%E3%83%88%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%97%E3%81%BE%E3%81%97%E3%82%87%E3%81%86">&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x8FFD;&#x52A0;&#x3057;&#x307E;&#x3057;&#x3087;&#x3046;</h2>

<ul>
<li><code>enabled = false</code>&#x306E;&#x30E6;&#x30FC;&#x30B6;<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">createLfInactiveUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
  <span class="token class-name">User</span> u <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span><span class="token function">getCreateLfUserMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>userImporter<span class="token punctuation">,</span> <span class="token string">&quot;testName&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;testmail@dsi.com&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><ul>
<li>&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x5B9F;&#x884C;&#x3059;&#x308B;
<ul>
<li>&#x3042;&#x308C;&#xFF1F;</li>
<li>why&#xFF1F;</li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="789" class="slide " data-line="789" data-h="4" data-v="11">
<h2 class="mume-header" id="mockito%E3%81%A7%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%82%92%E3%83%A2%E3%83%83%E3%82%AF%E3%81%99%E3%82%8B-3">Mockito&#x3067;&#x30B5;&#x30FC;&#x30D3;&#x30B9;&#x3092;&#x30E2;&#x30C3;&#x30AF;&#x3059;&#x308B;</h2>

<ul>
<li>&#x300C;&#x306A;&#x306B;&#x304C;&#x304A;&#x304B;&#x3057;&#x3044;&#x300D;&#x306E;&#x6B63;&#x4F53;
<ul>
<li><code>Mock</code>&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x306B;&#x306F;&#x3001;&#x300C;&#x771F;&#x4F3C;&#x3092;&#x3059;&#x308B;&#x300D;&#x507D;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x306E;&#x305F;&#x3081;&#x3001;&#x4E2D;&#x8EAB;&#x306F;&#x4F55;&#x3082;&#x306A;&#x3044;
<ul>
<li><code>setter</code>&#x3068;<code>getter</code>&#x304C;&#x52D5;&#x4F5C;&#x3057;&#x306A;&#x3044;&#xFF08;<code>getXXX</code>&#x3068;<code>setXXX</code>&#x306E;&#x5BFE;&#x8C61;&#x304C;&#x5B58;&#x5728;&#x3057;&#x306A;&#x3044;&#xFF09;</li>
</ul>
</li>
<li>Mockito&#x306E;&#x30E2;&#x30C3;&#x30AF;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x306E;<code>getter</code>&#x306F;&#x300C;&#x30C7;&#x30D5;&#x30A9;&#x30EB;&#x30C8;&#x5024;&#x300D;&#x3092;&#x8FD4;&#x3059;&#x4ED5;&#x69D8;
<ul>
<li><code>int</code>&#x30BF;&#x30A4;&#x30D7;&#x306E;<code>user.getStatus()</code>&#x306F;&#x5E38;&#x306B;&#x300C;&#x30C7;&#x30D5;&#x30A9;&#x30EB;&#x30C8;&#x5024;=0&#x300D;&#x3092;&#x8FD4;&#x3059;</li>
</ul>
</li>
</ul>
</li>
<li><code>Mock</code>&#x65B9;&#x5F0F;&#x306E;&#x539F;&#x5247;&#xFF08;<code>Mockito</code>&#x306E;&#x516C;&#x5F0F;&#x30C9;&#x30AD;&#x30E5;&#x30E1;&#x30F3;&#x30C8;&#x3088;&#x308A;&#xFF09;
<ul>
<li><strong>Do Not Interact with Mock Objects</strong></li>
<li>getter&#x3068;setter&#x3092;&#x7D44;&#x307F;&#x5408;&#x308F;&#x305B;&#x3063;&#x3066;&#x5229;&#x7528;&#x3059;&#x308B; = interaction&#x3000;&#x274C;</li>
<li>&#x3069;&#x3046;&#x3059;&#x308B;&#xFF1F;</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="801" class="slide " data-line="801" data-h="4" data-v="12">
<h2 class="mume-header" id="mockito%E3%81%A7%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%82%92%E3%83%A2%E3%83%83%E3%82%AF%E3%81%99%E3%82%8B-4">Mockito&#x3067;&#x30B5;&#x30FC;&#x30D3;&#x30B9;&#x3092;&#x30E2;&#x30C3;&#x30AF;&#x3059;&#x308B;</h2>

<ul>
<li>Mockito&#x306E;&#x63D0;&#x6848;
<ul>
<li><strong>interaction</strong> &#x306E; <strong>&#x7D50;&#x679C;</strong> &#x3067;&#x306F;&#x306A;&#x304F;&#x3001;&#x305D;&#x306E; <strong>&#x904E;&#x7A0B;</strong> &#x3092;&#x30C1;&#x30A7;&#x30C3;&#x30AF;&#x3059;&#x308B;</li>
<li><code>verify</code>&#xFF1A;<a href="https://www.baeldung.com/mockito-verify">https://www.baeldung.com/mockito-verify</a></li>
<li>&#x4ECA;&#x56DE;&#x306E;&#x4F8B;&#x3060;&#x3068;&#x3001;&#x300C;user&#x306E;getStatus = 0&#x300D;&#x3092;&#x30C1;&#x30A7;&#x30C3;&#x30AF;&#x3059;&#x308B;&#x3053;&#x3069;&#x3067;&#x306F;&#x306A;&#x304F;&#x3001;&#x300C;user&#x306E;setStatus()&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x304C;&#x547C;&#x3070;&#x3089;&#x308C;&#x308B;&#x5834;&#x5408;&#x3001;&#x8EE2;&#x9001;&#x3055;&#x308C;&#x305F;&#x5F15;&#x6570; = 0&#x300D;&#x306B;&#x3059;&#x308B;<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">createLfUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
  <span class="token class-name">User</span> u <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span><span class="token function">getCreateLfUserMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>userImporter<span class="token punctuation">,</span> <span class="token string">&quot;testName&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;testmail@dsi.com&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">verify</span><span class="token punctuation">(</span>userMock<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">createLfInactiveUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
  <span class="token class-name">User</span> u <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span><span class="token function">getCreateLfUserMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>userImporter<span class="token punctuation">,</span> <span class="token string">&quot;testName&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;testmail@dsi.com&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">verify</span><span class="token punctuation">(</span>userMock<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></li>
<li>run test
<ul>
<li>all green</li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="823" class="slide " data-line="823" data-h="4" data-v="13">
<h2 class="mume-header" id="%E3%81%A1%E3%82%87%E3%81%A3%E3%81%A8%E3%81%BE%E3%81%A8%E3%82%81">&#x3061;&#x3087;&#x3063;&#x3068;&#x307E;&#x3068;&#x3081;</h2>

<ul>
<li>Liferay&#x30B5;&#x30FC;&#x30D0;&#x306A;&#x3057;&#xFF08;OSGI&#x74B0;&#x5883;&#x304C;&#x306A;&#x3044;&#xFF09;&#x6761;&#x4EF6;&#x3067;&#x30E6;&#x30CB;&#x30C3;&#x30C8;&#x30C6;&#x30B9;&#x30C8;&#x307D;&#x3044;&#x7D50;&#x5408;&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x5B9F;&#x884C;&#x3059;&#x308B;&#x305F;&#x3081;
<ul>
<li>&#x5FC5;&#x8981;&#x306A;OSGI&#x30B5;&#x30FC;&#x30D3;&#x30B9;&#x3092;Mock&#x3059;&#x308B;</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token annotation punctuation">@Mock</span> <span class="token class-name">UserLocalService</span> userLocalService<span class="token punctuation">;</span>
</pre><ul>
<li>&#x5F53;&#x8A72;&#x30B5;&#x30FC;&#x30D3;&#x30B9;&#x306E;&#x5229;&#x7528;&#x3055;&#x308C;&#x308B;&#x6A5F;&#x80FD;&#xFF08;&#x2248;&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#xFF09;&#x3092;&#x30E2;&#x30C3;&#x30AF;&#x3059;&#x308B;
<ul>
<li>&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x306E;&#x884C;&#x70BA;&#x3092;&#x6307;&#x5B9A;&#x3059;&#x308B;&#x3001;eg: &#x4F55;&#x3092;&#x623B;&#x3059;</li>
<li>&#xFF08;Mockito&#x306E;&#x554F;&#x984C;&#xFF09;&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x30B7;&#x30B0;&#x30CD;&#x30C1;&#x30E3;&#x30FC;&#x3092;&#x6B63;&#x3057;&#x304F;&#x6307;&#x5B9A;&#x3057;&#x306A;&#x3044;&#x3068;&#x3044;&#x3051;&#x306A;&#x3044;</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token function">when</span><span class="token punctuation">(</span>userLocalService<span class="token punctuation">.</span><span class="token function">addUser</span><span class="token punctuation">(</span>
    <span class="token function">anyLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">anyLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">anyBoolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">anyBoolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">anyLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">anyLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">anyBoolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">anyInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">anyInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">anyInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">anyInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">anyBoolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span>userMock<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></li>
<li>Injection
<ul>
<li>Reflection&#x3067;&#xFF08;JUnit5&#x3060;&#x3068;<code>ReflectionTestUtils</code>&#x3067;&#x697D;&#x306B;&#x306A;&#x308C;&#x308B;&#x304B;&#x3002;&#x3002;&#xFF09;</li>
</ul>
</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token class-name">DsiUserImporterImpl</span><span class="token punctuation">.</span>userLocalService <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token annotation punctuation">@Mock</span> <span class="token class-name">UserLocalService</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></li>
</ul>
</section><section vertical="true" lineno="847" class="slide " data-line="847" data-h="4" data-v="14">
<h2 class="mume-header" id="lets-test">Let&apos;s Test</h2>

<ul>
<li>&#x7D9A;&#x3044;&#x3066;&#x3001;<code>createUserInfo</code>&#x306E;&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x8FFD;&#x52A0;&#x3057;&#x307E;&#x3057;&#x3087;&#x3046;
<ul>
<li><code>userId</code>&#x3068;<code>location</code>&#x3092;&#x5229;&#x7528;&#x3057;&#x3001;<code>dsUserInfo</code>&#x3092;&#x6B63;&#x3057;&#x304F;&#x4F5C;&#x6210;&#x3057;&#x305F;&#x306E;&#x304B;
<ul>
<li><code>ds-user-info-service</code>&#x306B;&#x7F6E;&#x304F;&#x3079;&#x304D;</li>
<li>service-builder&#x306E;&#x30E6;&#x30CB;&#x30C3;&#x30C8;&#x30C6;&#x30B9;&#x30C8;</li>
</ul>
</li>
<li><code>createUserInfo</code>&#x306B;&#x6E21;&#x3057;&#x305F;<code>userId</code>&#x306F;<code>createLfUser</code>&#x306E;&#x7D50;&#x679C;&#x306A;&#x306E;&#x304B;</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="855" class="slide " data-line="855" data-h="4" data-v="15">
<h2 class="mume-header" id="lets-test-1">Let&apos;s Test</h2>

<ul>
<li><code>addDsUserInfo(userId, location)</code>&#x306E;&#x30C6;&#x30B9;&#x30C8;
<ul>
<li><code>ds-user-info-service</code>&#x306B;<code>src/test/java</code>&#x30BD;&#x30FC;&#x30B9;&#x30D5;&#x30A9;&#x30EB;&#x30C0;&#x3092;&#x8FFD;&#x52A0;&#x3059;&#x308B;</li>
<li><code>test.workaround.ds.user.info.service.test</code>&#x30D1;&#x30C3;&#x30B1;&#x30FC;&#x30B8;&#x3092;&#x4F5C;&#x6210;</li>
<li><code>build.gradle</code>&#x306B;
<ul>
<li><code>dependencies</code>&#x8FFD;&#x52A0;</li>
</ul>
<pre data-role="codeBlock" data-info class="language-"><code>testCompile &quot;com.liferay.portal:release.dxp.api&quot;
testCompile (&apos;junit:junit:4.13&apos;)
testCompile &apos;org.mockito:mockito-core:4.5.1&apos;
testCompile project(&apos;:modules:ds-user-info:ds-user-info-api&apos;)
</code></pre><ul>
<li><code>test</code>&#x74B0;&#x5883;&#x6307;&#x5B9A;</li>
</ul>
<pre data-role="codeBlock" data-info class="language-"><code>test {
    useJUnit()
    testLogging {
        events &quot;passed&quot;, &quot;skipped&quot;, &quot;failed&quot;
    }
}
</code></pre></li>
<li><code>DsUserInfoLocalServiceImplTest</code>&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="880" class="slide " data-line="880" data-h="4" data-v="16">
<h2 class="mume-header" id="lets-test-2">Let&apos;s Test</h2>

<ul>
<li>&#x30C6;&#x30B9;&#x30C8;&#x30B3;&#x30FC;&#x30C9;
<ul>
<li>OSGI&#x74B0;&#x5883;&#x304C;&#x306A;&#x3044;&#x306E;&#x305F;&#x3081;&#x3001;<code>DsUserInfoLocalServiceImpl</code>&#x3092;&#x76F4;&#x63A5;&#x306B;&#x5229;&#x7528;&#x3059;&#x308B;</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">MockitoJUnitRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DsUserInfoLocalServiceImplTest</span> <span class="token punctuation">{</span>

  <span class="token class-name">DsUserInfoLocalServiceImpl</span> service <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DsUserInfoLocalServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Test</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addDsUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">DsUserInfo</span> info <span class="token operator">=</span> service<span class="token punctuation">.</span><span class="token function">addDsUserInfo</span><span class="token punctuation">(</span><span class="token number">12345L</span><span class="token punctuation">,</span> <span class="token string">&quot;testLocation&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">12345L</span><span class="token punctuation">,</span> info<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;testLocation&quot;</span><span class="token punctuation">,</span> info<span class="token punctuation">.</span><span class="token function">getLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><ul>
<li>&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x5B9F;&#x884C;&#x3059;&#x308B;&#xFF08;&#x5F53;&#x7136;NPE&#xFF09;</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="900" class="slide " data-line="900" data-h="4" data-v="17">
<h2 class="mume-header" id="lets-code-13">Let&apos;s Code</h2>

<ul>
<li><code>DsUserInfoLocalServiceImpl</code>&#x3092;Refactor&#x3059;&#x308B;<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token class-name">DsUserInfo</span> <span class="token function">addDsUserInfo</span><span class="token punctuation">(</span><span class="token keyword">long</span> userId<span class="token punctuation">,</span> <span class="token class-name">String</span> location<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">PortalException</span> <span class="token punctuation">{</span>
  <span class="token class-name">DsUserInfo</span> dui <span class="token operator">=</span> dsUserInfoLocalService<span class="token punctuation">.</span><span class="token function">createDsUserInfo</span><span class="token punctuation">(</span>counterLocalService<span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  dui<span class="token punctuation">.</span><span class="token function">setUserId</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  dui<span class="token punctuation">.</span><span class="token function">setLocation</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> dsUserInfoLocalService<span class="token punctuation">.</span><span class="token function">addDsUserInfo</span><span class="token punctuation">(</span>dui<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></li>
<li>&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x5B9F;&#x884C;&#x3059;&#x308B;
<ul>
<li>NPE</li>
<li><code>DsUserInfoLocalServiceImpl extends DsUserInfoLocalServiceBaseImpl</code>&#x306E;OSGI&#x4F9D;&#x5B58;&#x30D1;&#x30C3;&#x30B1;&#x30FC;&#x30B8;&#x306F;&#xFF1F;
<ul>
<li>Liferay&#x306E;kernel&#x30B5;&#x30FC;&#x30D3;&#x30B9;
<ul>
<li><code>CounterLocalService</code>&#x3001;<code>UserLocalService</code>&#x3001;<code>ClassNameLocalService</code></li>
</ul>
</li>
<li>service-builder&#x306E;&#x53C2;&#x7167;&#x30B5;&#x30FC;&#x30D3;&#x30B9;
<ul>
<li><code>DsUserInfoPersistence</code>&#x3001;<code>DsUserInfoLocalService</code></li>
</ul>
</li>
<li><code>mock</code>&#x3059;&#x308B;&#xFF1F;</li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="921" class="slide " data-line="921" data-h="4" data-v="18">
<h2 class="mume-header" id="lets-code-14">Let&apos;s Code</h2>

<ul>
<li>&#x3082;&#x3046;&#x3061;&#x3087;&#x3063;&#x3068;&#x8003;&#x3048;&#x3066;&#x307F;&#x308B;
<ul>
<li>service-builder&#x3068;Liferay&#x306E;&#x30C7;&#x30D5;&#x30A9;&#x30EB;&#x30C8;&#x30E1;&#x30BD;&#x30C3;&#x30C9;</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token class-name">DsUserInfo</span> dui <span class="token operator">=</span> dsUserInfoLocalService<span class="token punctuation">.</span><span class="token function">createDsUserInfo</span><span class="token punctuation">(</span>counterLocalService<span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><ul>
<li>serivce-builder&#x306E;&#x30C7;&#x30D5;&#x30A9;&#x30EB;&#x30C8;&#x30E1;&#x30BD;&#x30C3;&#x30C9;</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">return</span> dsUserInfoLocalService<span class="token punctuation">.</span><span class="token function">addDsUserInfo</span><span class="token punctuation">(</span>dui<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><ul>
<li>&#x672C;&#x5F53;&#x306B;&#x30C6;&#x30B9;&#x30C8;&#x5FC5;&#x8981;&#x540D;&#x90E8;&#x5206;&#xFF08;&#x8A00;&#x308F;&#x3070;&#x30D3;&#x30B8;&#x30CD;&#x30B9;&#x30ED;&#x30B8;&#x30C3;&#x30AF;&#xFF09;</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java">dui<span class="token punctuation">.</span><span class="token function">setUserId</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
dui<span class="token punctuation">.</span><span class="token function">setLocation</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></li>
<li>Mockito&#x306E;&#x3082;&#x3046;&#x4E00;&#x3064;&#x6A5F;&#x80FD;&#xFF1A;<code>spy</code>
<ul>
<li>&#x7279;&#x5B9A;<strong>object instance</strong>&#x306E;&#x4E00;&#x90E8;&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x3092;<code>Mock</code>&#x3059;&#x308B;&#x6A5F;&#x80FD;</li>
<li>&#x4F7F;&#x3044;&#x65B9;
<ul>
<li>serivce-builder&#x3068;Liferay&#x306E;&#x30C7;&#x30D5;&#x30A9;&#x30EB;&#x30C8;&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x3092;<code>Mock</code>&#x3059;&#x308B;</li>
<li>&#x30C6;&#x30B9;&#x30C8;&#x5FC5;&#x8981;&#x306A;&#x30D3;&#x30B8;&#x30CD;&#x30B9;&#x30ED;&#x30B8;&#x30C3;&#x30AF;&#x306E;&#x5B9F;&#x969B;&#x306E;&#x30B3;&#x30FC;&#x30C9;&#x3092;&#x30C6;&#x30B9;&#x30C8;&#x3059;&#x308B;</li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="943" class="slide " data-line="943" data-h="4" data-v="19">
<h2 class="mume-header" id="lets-code-15">Let&apos;s Code</h2>

<ul>
<li>Partial Mock
<ul>
<li><code>CounterLocalService</code>&#x306F;&#x4ECA;&#x307E;&#x3067;&#x306E;&#x901A;&#x308A;<code>Mock</code>&#x3059;&#x308B;</li>
<li><code>service = new DsUserInfoLocalServiceImpl</code>&#x306E;&#x6307;&#x5B9A;&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x3082;<code>Mock</code>&#x3059;&#x308B;
<ul>
<li><code>createDsUserInfo(long id)</code></li>
<li><code>addDsUserInfo(DsUserInfo object)</code></li>
</ul>
</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DsUserInfoLocalServiceImplTest</span> <span class="token punctuation">{</span>
  <span class="token class-name">DsUserInfoLocalServiceImpl</span> service <span class="token operator">=</span> <span class="token function">spy</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DsUserInfoLocalServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Before</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">prepare</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

    <span class="token class-name">DsUserInfo</span> info <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DsUserInfoImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">CounterLocalService</span> mockCounter <span class="token operator">=</span> <span class="token function">mock</span><span class="token punctuation">(</span><span class="token class-name">CounterLocalService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">when</span><span class="token punctuation">(</span>mockCounter<span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span><span class="token number">123456L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">doReturn</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">when</span><span class="token punctuation">(</span>service<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createDsUserInfo</span><span class="token punctuation">(</span><span class="token function">anyLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">doReturn</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">when</span><span class="token punctuation">(</span>service<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addDsUserInfo</span><span class="token punctuation">(</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre></li>
</ul>
</section><section vertical="true" lineno="968" class="slide " data-line="968" data-h="4" data-v="20">
<h2 class="mume-header" id="lets-code-16">Let&apos;s Code</h2>

<ul>
<li>&#x6CE8;&#x610F;&#x70B9;
<ul>
<li><code>spy</code>&#x3068;<code>mock</code>&#x306E;&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x306E;&#x5B9A;&#x7FA9;&#x65B9;&#x5F0F;&#x304C;&#x9055;&#x3046;</li>
<li><code>spy</code>&#x306E;&#x5BFE;&#x8C61;&#x306F;&#x672C;&#x7269;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x305F;&#x3081;&#x3001;&#x4EE5;&#x4E0B;&#x306E;&#x30B3;&#x30FC;&#x30C9;&#x3060;&#x3068;&#x672C;&#x7269;&#x306E;<code>service.createDsUserInfo</code>&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x3092;&#x5229;&#x7528;&#x3059;&#x308B;&#x3088;&#x3046;&#x306B;&#x306A;&#x308B;
<ul>
<li>&#x8AA4;</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token function">when</span><span class="token punctuation">(</span>service<span class="token punctuation">.</span><span class="token function">createDsUserInfo</span><span class="token punctuation">(</span><span class="token function">anyLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><ul>
<li>&#x6B63;</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token function">doReturn</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">when</span><span class="token punctuation">(</span>service<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createDsUserInfo</span><span class="token punctuation">(</span><span class="token function">anyLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="983" class="slide " data-line="983" data-h="4" data-v="21">
<h2 class="mume-header" id="lets-code-17">Let&apos;s Code</h2>

<ul>
<li>
<p><code>service = spy(new DsUserInfoLocalServiceImpl)</code>&#x306B;&#x4F9D;&#x5B58;&#x30B5;&#x30FC;&#x30D3;&#x30B9;&#x3092;&#x6CE8;&#x5165;&#x3059;&#x308B;</p>
<ul>
<li>&#x6CE8;&#x610F;&#xFF1A;&#x6CE8;&#x5165;&#x5148;&#x306E;&#x30D5;&#x30A3;&#x30FC;&#x30EB;&#x30C9;&#x306F;Base&#x30AF;&#x30E9;&#x30B9;&#x306E;<code>DsUserInfoLocalServiceBaseImpl</code>&#x306B;&#x3042;&#x308B;&#x306E;&#x305F;&#x3081;Reflection&#x3092;&#x3059;&#x308B;&#x6642;<code>.getSuperclass()</code>&#x304C;&#x5FC5;&#x8981;</li>
<li>JUnit5&#x306A;&#x3089;&#x3088;&#x308A;&#x697D;&#x306B;&#x3067;&#x304D;&#x308B;</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token annotation punctuation">@Before</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">prepare</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token function">injectDependencies</span><span class="token punctuation">(</span><span class="token string">&quot;counterLocalService&quot;</span><span class="token punctuation">,</span> mockCounter<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">injectDependencies</span><span class="token punctuation">(</span><span class="token string">&quot;dsUserInfoLocalService&quot;</span><span class="token punctuation">,</span> service<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">injectDependencies</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Object</span> dep<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
  <span class="token class-name">Field</span> f <span class="token operator">=</span> <span class="token class-name">DsUserInfoLocalServiceImpl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getSuperclass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  f<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  f<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>service<span class="token punctuation">,</span> dep<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></li>
<li>
<p>&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x884C;&#x3046;</p>
<ul>
<li>all green</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1006" class="slide " data-line="1006" data-h="4" data-v="22">
<h2 class="mume-header" id="%E3%81%A1%E3%82%87%E3%81%A3%E3%81%A8%E3%81%BE%E3%81%A8%E3%82%81-1">&#x3061;&#x3087;&#x3063;&#x3068;&#x307E;&#x3068;&#x3081;</h2>

<ul>
<li>&#x30C6;&#x30B9;&#x30C8;&#x9805;&#x76EE;&#xFF1A;<code>DsUserInfo</code>&#x306E;&#x4F5C;&#x6210;
<ul>
<li><code>service-builder</code>&#x30D7;&#x30ED;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3067;&#x30C6;&#x30B9;&#x30C8;&#x3059;&#x308B;</li>
<li>&#x30E6;&#x30CB;&#x30C3;&#x30C8;&#x30C6;&#x30B9;&#x30C8;&#x306E;&#x305F;&#x3081;&#x3001;&#x30D3;&#x30B8;&#x30CD;&#x30B9;&#x30ED;&#x30B8;&#x30C3;&#x30AF;&#x4EE5;&#x5916;&#x306E;&#x30C7;&#x30D5;&#x30A9;&#x30EB;&#x30C8;&#x30B3;&#x30FC;&#x30C9;&#x3092;&#x5168;&#x3066;<code>Mock</code>&#x3059;&#x308B;
<ul>
<li>Liferay&#x306E;&#x30B3;&#x30FC;&#x30C9;&#xFF1A;<code>mock</code></li>
<li>service-builder&#x304C;&#x4F5C;&#x6210;&#x3055;&#x308C;&#x308B;&#x30B3;&#x30FC;&#x30C9;&#xFF1A;<code>spy</code>&#x307E;&#x305F;&#x306F;<code>mock</code>
<ul>
<li>interface&#x3092;<code>mock</code>&#x3059;&#x308B;
<ul>
<li><code>when(interface.method()).thenReturn()</code></li>
</ul>
</li>
<li>&#x30AF;&#x30E9;&#x30B9;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;<code>spy</code>&#x3067;&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x3092;<code>mock</code>&#x3059;&#x308B;
<ul>
<li><code>doReturn().when(instance).method()</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>service-builder&#x306E;&#x30E6;&#x30CB;&#x30C3;&#x30C8;&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x66F8;&#x304F;&#x306E;&#x305F;&#x3081;&#x3001;&#x3042;&#x308B;&#x7A0B;&#x5EA6;serivce-builder&#x304C;&#x4F5C;&#x6210;&#x3055;&#x308C;&#x305F;&#x30AF;&#x30E9;&#x30B9;&#x306E;&#x69CB;&#x9020;&#x3078;&#x306E;&#x7406;&#x89E3;&#x304C;&#x5FC5;&#x8981;</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1020" class="slide " data-line="1020" data-h="4" data-v="23">
<h2 class="mume-header" id="lets-test-3">Let&apos;s Test</h2>

<ul>
<li>&#x7D9A;&#x304D;&#x307E;&#x3057;&#x3087;&#x3046;
<ul>
<li>Liferay&#x30E6;&#x30FC;&#x30B6;&#x304C;&#x6B63;&#x3057;&#x304F;&#x4F5C;&#x6210;&#x3055;&#x308C;&#x308B;&#x306E;&#x304B;
<ul>
<li>Liferay&#x30E6;&#x30FC;&#x30B6;&#x306E;&#x500B;&#x4EBA;&#x60C5;&#x5831;&#x306F;&#x6B63;&#x3057;&#x304F;&#x8A18;&#x5165;&#x3055;&#x308C;&#x308B;&#x306E;&#x304B;</li>
<li>Liferay&#x30E6;&#x30FC;&#x30B6;&#x306E;&#x6709;&#x52B9;/&#x7121;&#x52B9;&#x304C;&#x6B63;&#x3057;&#x304F;&#x8A2D;&#x5B9A;&#x3055;&#x308C;&#x308B;&#x306E;&#x304B;</li>
</ul>
</li>
<li>DsUserInfo&#x304C;&#x6B63;&#x3057;&#x304F;&#x4F5C;&#x6210;&#x3055;&#x308C;&#x308B;&#x306E;&#x304B;
<ul>
<li>DsUesrInfo&#x306E;&#x60C5;&#x5831;&#x306F;&#x6B63;&#x3057;&#x304F;&#x8A18;&#x5165;&#x3055;&#x308C;&#x308B;&#x306E;&#x304B;</li>
<li>DsuserInfo&#x306E;userId&#x306F;&#x6B63;&#x3057;&#x304F;Liferay&#x30E6;&#x30FC;&#x30B6;&#x3068;&#x9023;&#x643A;&#x3055;&#x308C;&#x308B;&#x306E;&#x304B; &#x2190; &#x4ECA;&#x3053;&#x3053;</li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1030" class="slide " data-line="1030" data-h="4" data-v="24">
<h2 class="mume-header" id="lets-test-4">Let&apos;s Test</h2>

<ul>
<li><code>createUserInfo</code>&#x306B;&#x6E21;&#x3057;&#x305F;<code>userId</code>&#x306F;<code>createLfUser</code>&#x306E;&#x7D50;&#x679C;&#x306A;&#x306E;&#x304B;
<ul>
<li>&#x540C;&#x3058;&#x304F;&#x3001;<code>DsUserInfoLocalService.addDsUserInfo</code>&#x306E;&#x7D50;&#x679C;&#x3067;&#x306F;&#x306A;&#x304F;&#x3001;&#x305D;&#x306E;&#x904E;&#x7A0B;&#x3092;<code>verify</code>&#x3059;&#x308B;</li>
<li>&#x30C6;&#x30B9;&#x30C8;&#x30B3;&#x30FC;&#x30C9;<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">createUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
  <span class="token function">getCreateUserMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>
    userImporter<span class="token punctuation">,</span> <span class="token string">&quot;testName&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;testmail@dsi.com&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string">&quot;testLocation&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">verify</span><span class="token punctuation">(</span>dsUserInfoLocalService<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addDsUserInfo</span><span class="token punctuation">(</span><span class="token number">12345L</span><span class="token punctuation">,</span> <span class="token string">&quot;testLocation&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token class-name">Method</span> <span class="token function">getCreateUserMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
  <span class="token class-name">Method</span> m <span class="token operator">=</span> <span class="token class-name">DsiUserImporterImpl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token string">&quot;createUser&quot;</span><span class="token punctuation">,</span>
    <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token keyword">boolean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  m<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> m<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1051" class="slide " data-line="1051" data-h="4" data-v="25">
<h2 class="mume-header" id="lets-code-18">Let&apos;s Code</h2>

<ul>
<li><code>DsUserInfoLocalService</code>&#x306E;<code>Mock</code>&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3092;<code>DsiUserImporterImpl</code>&#x306B;&#x6CE8;&#x5165;&#x3059;&#x308B;<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// DsiCreateUserTest</span>
<span class="token annotation punctuation">@Before</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token function">injectDependencies</span><span class="token punctuation">(</span><span class="token string">&quot;userLocalService&quot;</span><span class="token punctuation">,</span> userLocalService<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">injectDependencies</span><span class="token punctuation">(</span><span class="token string">&quot;dsUserInfoLocalService&quot;</span><span class="token punctuation">,</span> dsUserInfoLocalService<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">injectDependencies</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Object</span> dep<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
  <span class="token class-name">Field</span> f <span class="token operator">=</span> <span class="token class-name">DsiUserImporterImpl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  f<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  f<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>userImporter<span class="token punctuation">,</span> dep<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Mock</span> <span class="token class-name">DsUserInfoLocalService</span> dsUserInfoLocalService<span class="token punctuation">;</span>
</pre></li>
</ul>
</section><section vertical="true" lineno="1072" class="slide " data-line="1072" data-h="4" data-v="26">
<h2 class="mume-header" id="lets-code-19">Let&apos;s Code</h2>

<ul>
<li>&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x5B9F;&#x884C;&#x3059;&#x308B;
<ul>
<li>all green</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1077" class="slide " data-line="1077" data-h="4" data-v="27">
<h2 class="mume-header" id="lets-test-5">Let&apos;s Test</h2>

<ul>
<li>&#x30C6;&#x30B9;&#x30C8;&#x30EA;&#x30B9;&#x30C8;
<ul>
<li>getLocation&#x306E;&#x30C6;&#x30B9;&#x30C8; &#x2190; all green</li>
<li>Liferay&#x30E6;&#x30FC;&#x30B6;&#x304C;&#x6B63;&#x3057;&#x304F;&#x4F5C;&#x6210;&#x3055;&#x308C;&#x308B;&#x306E;&#x304B; &#x2190; all green</li>
<li>DsUserInfo&#x304C;&#x6B63;&#x3057;&#x304F;&#x4F5C;&#x6210;&#x3055;&#x308C;&#x308B;&#x306E;&#x304B; &#x2190; all green</li>
<li>importUser &#x2190; &#x3044;&#x307E;&#x3053;&#x3053;</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1085" class="slide " data-line="1085" data-h="4" data-v="28">
<h2 class="mume-header" id="lets-test-6">Let&apos;s Test</h2>

<ul>
<li><code>importUser</code>&#x306E;&#x30C6;&#x30B9;&#x30C8;&#x306E;&#x554F;&#x984C;
<ul>
<li>&#x30C6;&#x30B9;&#x30C8;&#x9805;&#x76EE;&#xFF1A;<code>json</code>&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x304B;&#x3089;&#x306E;&#x60C5;&#x5831;&#x3092;&#x6B63;&#x3057;&#x304F;<code>createUser</code>&#x306B;&#x8EE2;&#x9001;&#x3055;&#x308C;&#x308B;&#x306E;&#x304B;</li>
<li><code>void</code>&#x516C;&#x958B;&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x304C;&#x79C1;&#x6709;&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x3092;&#x8AAD;&#x3093;&#x3067;&#x3044;&#x308B;
<ul>
<li><code>Mockito</code>&#x306F;&#x3067;&#x304D;&#x306A;&#x3044;</li>
</ul>
</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">importUser</span><span class="token punctuation">(</span><span class="token class-name">JSONObject</span> userObj<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

  <span class="token class-name">String</span> screenName <span class="token operator">=</span> userObj<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;windowsId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> emailAddr <span class="token operator">=</span> userObj<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;mail&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">boolean</span> enabled <span class="token operator">=</span> userObj<span class="token punctuation">.</span><span class="token function">getBoolean</span><span class="token punctuation">(</span><span class="token string">&quot;enabled&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> location <span class="token operator">=</span> <span class="token function">getLocation</span><span class="token punctuation">(</span>userObj<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">createUser</span><span class="token punctuation">(</span>screenName<span class="token punctuation">,</span> emailAddr<span class="token punctuation">,</span> enabled<span class="token punctuation">,</span> location<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><ul>
<li>&#x53E4;&#x3044;&#x30D0;&#x30FC;&#x30B8;&#x30E7;&#x30F3;&#x306E;<code>Mockito</code>&#x3060;&#x3068;&#x3001;<code>PowerMock</code>&#x3092;&#x5C0E;&#x5165;&#x3057;&#x3066;&#x30C6;&#x30B9;&#x30C8;&#x3067;&#x304D;&#x308B;&#x304C;&#x3001;&#x73FE;&#x5728;&#x306E;Mockito4&#x306B;&#x306F;<code>PowerMock</code>&#x3068;&#x306E;&#x9023;&#x643A;&#x304C;&#x58CA;&#x308C;&#x305F;&#x306E;&#x3067;&#x4ECA;&#x56DE;&#x306F;&#x30D1;&#x30B9;</li>
<li>&#x76F4;&#x63A5;integration&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x3059;&#x308B;&#x65B9;&#x304C;&#x826F;&#x3044;&#xFF08;&#x5F8C;&#x3067;&#xFF09;</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1106" class="slide " data-line="1106" data-h="4" data-v="29">
<h2 class="mume-header" id="one-more-thing">One more thing</h2>

<ul>
<li>&#x4ECA;&#x307E;&#x3067;<code>DsiUserImporterImpl</code>&#x306E;&#x4E2D;&#x306E;<code>COMP_ID</code>&#x306F;&#x305A;&#x3063;&#x3068;0&#x306B;&#x306A;&#x3063;&#x3066;&#x3044;&#x308B;
<ul>
<li><code>PortalUtil.getDefaultCompanyId()</code>&#x306B;&#x3059;&#x308B;&#x3068;&#xFF1F;
<ul>
<li><code>PortalUtil = NPE</code>&#x306B;&#x306A;&#x308B;</li>
<li><code>Mock</code>&#xFF1F;</li>
</ul>
</li>
<li>&#x4ED6;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x306E;&#x9759;&#x7684;&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x3092;&#x547C;&#x3076;&#x3053;&#x3068;&#x3092;&#x30E2;&#x30C3;&#x30AF;&#x3059;&#x308B;
<ul>
<li><code>Mockito.mockStatic</code></li>
<li>&#x4EE5;&#x4E0B;&#x306E;&#x30B3;&#x30FC;&#x30C9;&#x3092;<code>DsiLocationTest.java</code>&#x3068;<code>DsiCreateUserTest.java</code>&#x4E21;&#x65B9;&#x306B;&#x8FFD;&#x52A0;&#x3059;&#x308B;</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token annotation punctuation">@Before</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  portalUtilMock <span class="token operator">=</span> <span class="token class-name">Mockito</span><span class="token punctuation">.</span><span class="token function">mockStatic</span><span class="token punctuation">(</span><span class="token class-name">PortalUtil</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  portalUtilMock<span class="token punctuation">.</span><span class="token function">when</span><span class="token punctuation">(</span><span class="token class-name">PortalUtil</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">getDefaultCompanyId</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span><span class="token number">12345L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  userImporter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DsiUserImporterImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@After</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  portalUtilMock<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token class-name">MockedStatic</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PortalUtil</span><span class="token punctuation">&gt;</span></span> portalUtilMock<span class="token punctuation">;</span>
</pre></li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1131" class="slide " data-line="1131" data-h="4" data-v="30">
<h2 class="mume-header" id="one-more-thing-1">One more thing</h2>

<ul>
<li><code>Mockito.mockStatic</code>&#x306E;&#x305F;&#x3081;&#x306E;&#x4F9D;&#x5B58;&#x95A2;&#x4FC2;
<ul>
<li>build.gradle&#x306B;
<ul>
<li><code>mockito-core</code>&#x3092;&#x524A;&#x9664;&#x3059;&#x308B;</li>
<li>&#x4EE5;&#x4E0B;&#x306E;&#x4F9D;&#x5B58;&#x30D1;&#x30C3;&#x30B1;&#x30FC;&#x30B8;&#x3092;&#x8FFD;&#x52A0;&#x3059;&#x308B;</li>
</ul>
<pre data-role="codeBlock" data-info class="language-"><code>testCompile &apos;org.mockito:mockito-inline:4.5.1&apos;
testCompile &apos;net.java.dev.jna:jna:5.8.0&apos;
</code></pre></li>
</ul>
</li>
<li>Run test
<ul>
<li>all green</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1144" class="slide " data-line="1144" data-h="4" data-v="31">
<h2 class="mume-header" id="unit-test-discussion">Unit Test Discussion</h2>

<ul>
<li>
<p>&#x3044;&#x307E;&#x307E;&#x3067;&#x305A;&#x3063;&#x3068;&#x8B70;&#x8AD6;&#x3057;&#x3066;&#x3044;&#x308B;&#x8AB2;&#x984C;</p>
<ul>
<li><strong>Should I test all methods?</strong></li>
<li><strong>Should I test private methods?</strong></li>
</ul>
</li>
<li>
<p>&#x500B;&#x4EBA;&#x306E;&#x610F;&#x898B;</p>
<ul>
<li>interface&#x306E;&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x3092;&#x30C6;&#x30B9;&#x30C8;&#xFF08;&#x3059;&#x306A;&#x308F;&#x3061;public&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#xFF09;&#x3068;&#x306F;&#x6B63;&#x8AD6;
<ul>
<li>&#x3061;&#x3083;&#x3093;&#x3068;&#x30C7;&#x30B6;&#x30A4;&#x30F3;&#x3055;&#x308C;&#x305F;interface&#x306F;&#x6A5F;&#x80FD;&#x3068;&#x305D;&#x306E;&#x30ED;&#x30B8;&#x30C3;&#x30AF;&#x3092;&#x53CD;&#x6620;&#x3067;&#x304D;&#x308B;</li>
</ul>
</li>
<li>&#x305F;&#x3060;&#x3057;&#x3001;Liferay&#x958B;&#x767A;&#x306B;&#x304A;&#x3044;&#x3067;&#x3001;&#x30D3;&#x30B8;&#x30CD;&#x30B9;&#x30ED;&#x30B8;&#x30C3;&#x30AF;&#x306F;&#x3042;&#x308B;&#x30AF;&#x30E9;&#x30B9;&#x5185;&#x90E8;&#x306E;&#x307F;&#x306B;&#x5B9F;&#x88C5;&#x3055;&#x308C;&#x308B;&#x5834;&#x5408;&#x304C;&#x591A;&#x3044;
<ul>
<li>private&#x306B;&#x3059;&#x308B;&#x6642;&#x3001;private&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x306E;&#x30C6;&#x30B9;&#x30C8;&#x304C;&#x5FC5;&#x8981;</li>
<li>util/helper&#x30AF;&#x30E9;&#x30B9;&#x306B;&#x5207;&#x308A;&#x96E2;&#x3059;&#x6642;&#x306B;&#x306F;&#x4ED6;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x306E;public&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x306B;&#x306A;&#x308B;</li>
</ul>
</li>
<li>&#x307E;&#x3068;&#x3081;&#xFF1A;&#x30D3;&#x30B8;&#x30CD;&#x30B9;&#x30ED;&#x30B8;&#x30C3;&#x30AF;&#x3092;&#x5F93;&#x3063;&#x305F;&#x3089;&#x3044;&#x3044;</li>
</ul>
</li>
<li>
<p>&#x539F;&#x7406;&#x4E3B;&#x7FA9;&#x306E;Unit Test</p>
<ul>
<li>one test one assert</li>
<li>Liferay&#x306B;&#x306F;&#x7121;&#x7406;</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1162" class="slide " data-line="1162" data-h="4" data-v="32">
<h2 class="mume-header" id="unit-test-discussion-1">Unit Test Discussion</h2>

<ul>
<li>Liferay&#x306E;&#x7279;&#x6027;&#x306E;&#x5F71;&#x97FF;&#x3067;&#x3001;&#x30C6;&#x30B9;&#x30C8;&#x9805;&#x76EE;&#x306F;&#x5B9F;&#x88C5;&#x65B9;&#x5F0F;&#x306B;&#x5927;&#x304D;&#x306A;&#x5F71;&#x97FF;&#x3092;&#x53D7;&#x3051;&#x3089;&#x308C;&#x3066;&#x3044;&#x308B;
<ul>
<li>&#x4EE5;&#x4E0B;&#x306E;&#x5B9F;&#x88C5;&#x3092;&#x8003;&#x3048;&#x3066;&#x307F;&#x308B;</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token class-name">User</span> u <span class="token operator">=</span> userLocalService<span class="token punctuation">.</span><span class="token function">createUser</span><span class="token punctuation">(</span>counterLocalService<span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
u<span class="token punctuation">.</span><span class="token function">setScreenName</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
u<span class="token punctuation">.</span><span class="token function">setFirstName</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
u<span class="token punctuation">.</span><span class="token function">setLastName</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
u<span class="token punctuation">.</span><span class="token function">setEmailAddress</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
u <span class="token operator">=</span> userLocalService<span class="token punctuation">.</span><span class="token function">addUser</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><ul>
<li>&#x3053;&#x306E;&#x5834;&#x5408;&#x3001;Mockito&#x304C;&#x5404;&#x9805;&#x76EE;&#x304C;&#x6B63;&#x3057;&#x304F;&#x8A2D;&#x5B9A;&#x3055;&#x308C;&#x308B;&#x306E;&#x304B;&#x3092;<code>verify</code>&#x3067;&#x30C6;&#x30B9;&#x30C8;&#x3067;&#x304D;&#x308B;</li>
<li>&#x305F;&#x3060;&#x3057;&#x3001;Liferay&#x306E;&#x4ED5;&#x7D44;&#x307F;&#x306E;&#x539F;&#x56E0;&#x3067;&#x3001;&#x591A;&#x304F;&#x5834;&#x5408;&#x3001;&#x4E0A;&#x8A18;&#x5B9F;&#x88C5;&#x3088;&#x308A;&#x3001;<code>addXXX(xx, xx, xx, xx, xx, ..)</code>&#x306E;&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x306E;&#x4E2D;&#x306B;&#x30A8;&#x30F3;&#x30C6;&#x30A3;&#x30C6;&#x30A3;&#x81EA;&#x8EAB;&#x306E;DB&#x30EC;&#x30B3;&#x30FC;&#x30C9;&#x4F5C;&#x6210;&#x306E;&#x307B;&#x304B;&#x3001;<code>Asset</code>&#x3001;<code>Resource</code>&#x3001;<code>Workflow</code>&#x306A;&#x3069;&#x306E;&#x30EC;&#x30B3;&#x30FC;&#x30C9;&#x3082;&#x4F5C;&#x6210;&#x3059;&#x308B;&#x306E;&#x305F;&#x3081;&#x3001;&#x4E0A;&#x8A18;&#x5B9F;&#x88C5;&#x306F;&#x4F7F;&#x3048;&#x306A;&#x3044;</li>
<li>&#x7D50;&#x5C40;Integration&#x30C6;&#x30B9;&#x30C8;&#x306B;&#x306A;&#x308B;</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1179" class="slide " data-line="1179" data-h="4" data-v="33">
<h2 class="mume-header" id="unit-test-discussion-2">Unit Test Discussion</h2>

<ul>
<li>&#x57FA;&#x672C;&#x7684;&#x306B;Mock&#x3068;interaction&#x3092;&#x3057;&#x306A;&#x3044;
<ul>
<li>eg: <code>set</code>&#x306E;&#x5F8C;&#x3067;<code>get</code>&#x306E;&#x306F;&#x5178;&#x578B;&#x7684;&#x306A;interaction</li>
</ul>
</li>
<li>&#x300C;&#x7D50;&#x679C;&#x300D;&#x3067;&#x306F;&#x306A;&#x304F;&#x300C;&#x904E;&#x7A0B;&#x300D;&#x3092;&#x691C;&#x8A3C;&#x3059;&#x308B;
<ul>
<li>&#x3060;&#x3051;&#x3069;Liferay&#x306E;&#x4ED5;&#x7D44;&#x307F;&#x306E;&#x539F;&#x56E0;&#x3067;&#xFF08;Impl&#x30AF;&#x30E9;&#x30B9;&#x306B;&#x30A2;&#x30AF;&#x30BB;&#x30B9;&#x3067;&#x304D;&#x306A;&#x3044;&#xFF09;&#x3069;&#x3046;&#x3057;&#x3066;&#x3082;<code>get</code>&#x3068;<code>set</code>&#x304C;&#x6B32;&#x3057;&#x3044;&#x5834;&#x5408;&#xFF1F;
<ul>
<li>mock&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x306E;&#x6307;&#x5B9A;getter/setter&#x3092;&#x52D5;&#x7684;&#x306B;override&#x3059;&#x308B;&#xFF08;Proxy&#x30D1;&#x30BF;&#x30FC;&#x30F3;&#xFF09;</li>
</ul>
</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token class-name">User</span> proxyUserMock <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>
  userMock<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> status <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;setStatus&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        status <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;getStatus&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> status<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token class-name">InvocationHandler</span> h <span class="token operator">=</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">getInvocationHandler</span><span class="token punctuation">(</span>userMock<span class="token punctuation">)</span><span class="token punctuation">;</span>
        h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>userMock<span class="token punctuation">,</span> method<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><pre data-role="codeBlock" data-info="java" class="language-java"><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> proxyUserMock<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><ul>
<li>&#x5371;&#x306A;&#x3044;&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x306A;&#x306E;&#x3067;&#x304A;&#x3059;&#x3059;&#x3081;&#x306A;&#x3044;&#x3093;&#x3060;&#x304C;&#x3084;&#x3080;&#x5F97;&#x306A;&#x3044;&#x5834;&#x5408;&#x306A;&#x3089;&#x3044;&#x3051;&#x305D;&#x3046;</li>
</ul>
</li>
</ul>
</section></section><section><section lineno="1211" class="slide " data-line="1211" data-h="5" data-v="0">
<h2 class="mume-header" id="integration-test">Integration Test</h2>

<ul>
<li>&#x958B;&#x767A;&#x3055;&#x308C;&#x305F;Liferay&#x30E2;&#x30B8;&#x30E5;&#x30FC;&#x30EB;&#x3092;&#x52D5;&#x4F5C;&#x3055;&#x305B;&#x3066;&#x30C6;&#x30B9;&#x30C8;&#x3059;&#x308B;
<ul>
<li>Liferay&#x30B7;&#x30B9;&#x30C6;&#x30E0;&#x3068;OSGI&#x74B0;&#x5883;&#x304C;&#x5FC5;&#x8981;</li>
<li>Integration&#x30C6;&#x30B9;&#x30C8;&#x306B;&#x306A;&#x308B;</li>
</ul>
</li>
<li>Liferay&#x306F;Integration&#x30C6;&#x30B9;&#x30C8;&#x306E;&#x74B0;&#x5883;&#x3092;&#x3061;&#x3083;&#x3093;&#x3068;&#x6574;&#x5099;&#x3057;&#x3066;&#x3044;&#x308B;
<ul>
<li>Arquillian based</li>
<li>JUnit</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1220" class="slide " data-line="1220" data-h="5" data-v="1">
<h2 class="mume-header" id="official-version">Official Version</h2>

<ul>
<li>ds-user-info-service/build.gradle<pre data-role="codeBlock" data-info class="language-"><code>buildService {
  apiDir = &quot;../ds-user-info-api/src/main/java&quot;
  testDir = &quot;../ds-user-info-test/src/testIntegration/java&quot;
}
</code></pre><ul>
<li>build-service</li>
<li>&#x30D7;&#x30ED;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3092;&#x30EA;&#x30D5;&#x30EC;&#x30C3;&#x30B7;&#x30E5;&#x3057;&#x3001;<code>ds-user-info-test</code>&#x3092;&#x78BA;&#x8A8D;&#x3059;&#x308B;</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1232" class="slide " data-line="1232" data-h="5" data-v="2">
<h2 class="mume-header" id="official-version-1">Official Version</h2>

<ul>
<li>service-builder&#x30D7;&#x30ED;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x306E;&#x6C38;&#x7D9A;&#x5316;&#x30EC;&#x30A4;&#x30E4;&#x30FC;&#x306E;&#x30C6;&#x30B9;&#x30C8;&#x30AF;&#x30E9;&#x30B9;<code>DsUserInfoPersistenceTest</code>&#x304C;&#x81EA;&#x52D5;&#x7684;&#x306B;&#x4F5C;&#x6210;&#x304F;&#x308C;&#x308B;</li>
<li>&#x305F;&#x3060;&#x3057;&#x3001;Developer Studio / Liferay IDE&#x304C;&#x4F5C;&#x6210;&#x304F;&#x308C;&#x308B;&#x30E2;&#x30B8;&#x30E5;&#x30FC;&#x30EB;&#x306F;&#x4E0D;&#x5B8C;&#x5168;</li>
<li>&#x8FFD;&#x52A0;&#x5FC5;&#x8981;&#x306A;&#x3082;&#x306E;
<ul>
<li>build.gradle&#xFF08;&#x73FE;&#x6642;&#x70B9;&#x306B;&#x306F;&#x4F55;&#x3082;&#x306A;&#x3044;&#xFF09;</li>
<li>bnd.bnd</li>
</ul>
<pre data-role="codeBlock" data-info class="language-"><code>Bundle-Name: ds-user-info-test
Bundle-SymbolicName: test.workaround.ds.user.info.test
Bundle-Version: 1.0.0
</code></pre></li>
</ul>
</section><section vertical="true" lineno="1245" class="slide " data-line="1245" data-h="5" data-v="3">
<h2 class="mume-header" id="official-version-2">Official Version</h2>

<ul>
<li><code>build.gradle</code>
<ul>
<li>&#x30B3;&#x30D4;&#x30DA;&#x30FC;&#x3057;&#x307E;&#x3057;&#x3087;&#x3046;</li>
</ul>
<pre data-role="codeBlock" data-info class="language-"><code>dependencies {

  testIntegrationCompile group: &quot;com.liferay.portal&quot;, name: &quot;release.dxp.api&quot;
  testIntegrationCompile(&apos;com.liferay.portal:com.liferay.portal.test:23.2.1&apos;)
  testIntegrationCompile(&apos;com.liferay.portal:com.liferay.portal.test.integration:6.0.35&apos;)
  testIntegrationCompile(&apos;com.liferay:com.liferay.arquillian.extension.junit.bridge:1.0.20&apos;)

  testIntegrationCompile group: &quot;junit&quot;, name: &quot;junit&quot;, version: &quot;4.13.1&quot;
  testIntegrationCompile(&apos;org.slf4j:slf4j-log4j12:2.0.12&apos;)
  testIntegrationCompile &apos;org.apache.logging.log4j:log4j-core:2.23.0&apos;

  testIntegrationCompile project(&quot;:modules:ds-user-info:ds-user-info-api&quot;)
  testIntegrationCompile project(&quot;:modules:ds-user-info:ds-user-info-service&quot;)

  testModules &apos;com.liferay:com.liferay.arquillian.extension.junit.bridge:1.0.20&apos;
  testModules &apos;com.liferay:com.liferay.arquillian.extension.junit.bridge.connector:1.0.1&apos;
  testModules &apos;com.liferay.portal:com.liferay.portal.test:23.2.1&apos;
  testModules &apos;com.liferay.portal:com.liferay.portal.test.integration:6.0.35&apos;
  testModules project(&quot;:modules:ds-user-info:ds-user-info-api&quot;)
  testModules project(&quot;:modules:ds-user-info:ds-user-info-service&quot;)
}
</code></pre></li>
</ul>
</section><section vertical="true" lineno="1273" class="slide " data-line="1273" data-h="5" data-v="4">
<h2 class="mume-header" id="%E3%81%A1%E3%82%87%E3%81%A3%E3%81%A8%E8%AA%AC%E6%98%8E">&#x3061;&#x3087;&#x3063;&#x3068;&#x8AAC;&#x660E;</h2>

<ul>
<li><code>testIntegrationCompile</code>
<ul>
<li>&#x30C6;&#x30B9;&#x30C8;&#x30E2;&#x30B8;&#x30E5;&#x30FC;&#x30EB;&#x3092;&#x6B63;&#x3057;&#x304F;&#x30D3;&#x30EB;&#x30C9;&#x3059;&#x308B;&#xFF08;IDE&#x306E;&#x81EA;&#x52D5;&#x88DC;&#x5B8C;&#x3082;&#xFF09;&#x305F;&#x3081;&#x306E;&#x3082;&#x306E;</li>
<li>&#x5185;&#x5BB9;
<ul>
<li>Liferay&#x306E;&#x30B3;&#x30A2;api</li>
<li>junit&#x3068;log4j</li>
<li>Liferay&#x306E;<code>Arquillian</code>&#x30B5;&#x30DD;&#x30FC;&#x30C8;&#x30E2;&#x30B8;&#x30E5;&#x30FC;&#x30EB;</li>
<li>Liferay&#x30C6;&#x30B9;&#x30C8;&#x30E2;&#x30B8;&#x30E5;&#x30FC;&#x30EB;</li>
<li>&#x30D7;&#x30ED;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x95A2;&#x4FC2;&#x306E;&#x3082;&#x306E;</li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1285" class="slide " data-line="1285" data-h="5" data-v="5">
<h2 class="mume-header" id="%E3%81%A1%E3%82%87%E3%81%A3%E3%81%A8%E8%AA%AC%E6%98%8E-1">&#x3061;&#x3087;&#x3063;&#x3068;&#x8AAC;&#x660E;</h2>

<ul>
<li><code>testModules</code>
<ul>
<li>&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x6B63;&#x3057;&#x304F;&#x5B9F;&#x884C;&#x3059;&#x308B;&#x305F;&#x3081;&#x306E;&#x5FC5;&#x8981;&#x30E2;&#x30B8;&#x30E5;&#x30FC;&#x30EB;&#x3092;&#x5B9A;&#x7FA9;&#x3059;&#x308B;</li>
<li>&#x5FC5;&#x8981;&#x306A;&#x3082;&#x306E;
<ul>
<li>Liferay&#x306E;arquillian-junit&#x30B5;&#x30DD;&#x30FC;&#x30C8;&#x30E2;&#x30B8;&#x30E5;&#x30FC;&#x30EB;</li>
<li>Liferay&#x306E;&#x30C6;&#x30B9;&#x30C8;&#x30B5;&#x30DD;&#x30FC;&#x30C8;&#x30E2;&#x30B8;&#x30E5;&#x30FC;&#x30EB;</li>
<li>&#x30C6;&#x30B9;&#x30C8;&#x5BFE;&#x8C61;</li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1295" class="slide " data-line="1295" data-h="5" data-v="6">
<h2 class="mume-header" id="%E3%81%A1%E3%82%87%E3%81%A3%E3%81%A8%E8%AA%AC%E6%98%8E-2">&#x3061;&#x3087;&#x3063;&#x3068;&#x8AAC;&#x660E;</h2>

<ul>
<li><code>build.gradle</code>&#x4E2D;&#x3001;Liferay&#x306E;&#x30C6;&#x30B9;&#x30C8;&#x30B5;&#x30DD;&#x30FC;&#x30C8;&#x30E2;&#x30B8;&#x30E5;&#x30FC;&#x30EB;&#x306E;&#x30D0;&#x30FC;&#x30B8;&#x30E7;&#x30F3;&#x306E;&#x8A18;&#x8FF0;&#x304C;&#x5FC5;&#x8981;</li>
<li>&#x7570;&#x306A;&#x308B;Liferay&#x30D0;&#x30FC;&#x30B8;&#x30E7;&#x30F3;&#x306E;&#x6240;&#x8981;&#x30C6;&#x30B9;&#x30C8;&#x30E2;&#x30B8;&#x30E5;&#x30FC;&#x30EB;&#x306E;&#x30D0;&#x30FC;&#x30B8;&#x30E7;&#x30F3;&#x304C;&#x7570;&#x306A;&#x308B;&#xFF08;&#x30B3;&#x30A2;&#x30B3;&#x30FC;&#x30C9;&#x306E;&#x30B7;&#x30B0;&#x30CD;&#x30C1;&#x30E3;&#x30FC;&#x306E;&#x5909;&#x66F4;&#x306E;&#x305F;&#x3081;&#xFF09;:
<ul>
<li>pre-u1xxx&#x7CFB;<pre data-role="codeBlock" data-info class="language-"><code>&apos;com.liferay.portal:com.liferay.portal.test:20.0.0&apos;
</code></pre></li>
<li>u1xxx&#x7CFB;<pre data-role="codeBlock" data-info class="language-"><code>&apos;com.liferay.portal:com.liferay.portal.test:23.2.1&apos;
</code></pre></li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1309" class="slide " data-line="1309" data-h="5" data-v="7">
<h2 class="mume-header" id="lets-run-2">Let&apos;s Run</h2>

<ul>
<li><code>testIntegration</code>&#x30BF;&#x30B9;&#x30AF;
<ul>
<li>Liferay&#x304C;&#x5B9A;&#x7FA9;&#x3059;&#x308B;gradle&#x30BF;&#x30B9;&#x30AF;
<ul>
<li>&#x30C6;&#x30B9;&#x30C8;&#x7528;Liferay&#x30D0;&#x30F3;&#x30C9;&#x30EB;&#x3092;&#x30C0;&#x30A6;&#x30F3;&#x30ED;&#x30FC;&#x30C9;&#x3057;&#x3001;&#x8D77;&#x52D5;&#x3059;&#x308B;
<ul>
<li>&#x30C6;&#x30B9;&#x30C8;&#x7528;&#x306E;Liferay&#x30D0;&#x30F3;&#x30C9;&#x30EB;&#x306F;&#x3001;<code>~/.liferay/bundles</code>&#x306E;&#x3057;&#x305F;&#x306B;<code>.zip</code>&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x5F62;&#x5F0F;&#x3067;&#x30C0;&#x30A6;&#x30F3;&#x30ED;&#x30FC;&#x30C9;&#x3055;&#x308C;&#x308B;</li>
<li>&#x4E8B;&#x524D;&#x306B;&#x30C0;&#x30A6;&#x30F3;&#x30ED;&#x30FC;&#x30C9;&#x3057;&#x3066;&#x7F6E;&#x3044;&#x305F;&#x3089;&#x4E00;&#x756A;&#x6642;&#x9593;&#x304B;&#x304B;&#x308B;&#x4F5C;&#x696D;&#x3092;&#x907F;&#x3051;&#x308B;</li>
</ul>
</li>
<li><code>testModules</code>&#x306E;&#x4E2D;&#x306B;&#x6307;&#x5B9A;&#x3057;&#x305F;&#x30E2;&#x30B8;&#x30E5;&#x30FC;&#x30EB;&#x3092;&#x30C6;&#x30B9;&#x30C8;&#x7528;&#x306E;tomcat&#x306E;<code>/osgi/test</code>&#x306E;&#x3057;&#x305F;&#x306B;&#x30B3;&#x30D4;&#x30FC;</li>
<li>&#x30C6;&#x30B9;&#x30C8;&#x30E2;&#x30B8;&#x30E5;&#x30FC;&#x30EB;&#x306E;&#x30B3;&#x30FC;&#x30C9;&#x3092;&#x5B9F;&#x884C;&#x3059;&#x308B;</li>
<li>&#x30C6;&#x30B9;&#x30C8;Liferay&#x3092;&#x4E2D;&#x6B62;&#x3059;&#x308B;</li>
</ul>
</li>
<li>IDE
<ul>
<li>ds-user-info-test / verification / testIntegration</li>
</ul>
</li>
<li>CMD<pre data-role="codeBlock" data-info class="language-"><code>[WKSPCE_ROOT]/gradlew :modules:ds-user-info:ds-user-info-test:testIntegration
</code></pre></li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1327" class="slide " data-line="1327" data-h="5" data-v="8">
<h2 class="mume-header" id="lets-run-3">Let&apos;s Run</h2>

<ul>
<li>&#x7D50;&#x679C;&#x3092;&#x78BA;&#x8A8D;&#x3057;&#x3066;&#x307F;&#x307E;&#x3057;&#x3087;&#x3046;
<ul>
<li>service-builder&#x304C;&#x81EA;&#x52D5;&#x7684;&#x306B;&#x4F5C;&#x6210;&#x3055;&#x308C;&#x308B;&#x6C38;&#x7D9A;&#x5316;&#x30EC;&#x30A4;&#x30E4;&#x30FC;&#x306E;&#x30C6;&#x30B9;&#x30C8;&#x7D50;&#x679C;</li>
</ul>
<pre data-role="codeBlock" data-info class="language-"><code>/modules/ds-user-info/ds-user-info-test/build/reports/tests/testIntegration/index.html
</code></pre></li>
</ul>
</section><section vertical="true" lineno="1335" class="slide " data-line="1335" data-h="5" data-v="9">
<h2 class="mume-header" id="lets-test-7">Let&apos;s Test</h2>

<ul>
<li>&#x30B5;&#x30F3;&#x30D7;&#x30EB;&#x3068;&#x3057;&#x3066;<code>DsUserInfoLocalServiceImpl</code>&#x306E;&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x4F5C;&#x3063;&#x3066;&#x307F;&#x307E;&#x3057;&#x3087;&#x3046;
<ul>
<li><code>test.workaround.ds.user.info.service.impl.test</code></li>
<li>&#x30B3;&#x30D4;&#x30DA;&#x30FC;</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">Arquillian</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DsUserInfoLocalServiceTest</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@ClassRule</span>
    <span class="token annotation punctuation">@Rule</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">AggregateTestRule</span> aggregateTestRule <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LiferayIntegrationTestRule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Before</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
      testUser <span class="token operator">=</span> <span class="token class-name">UserTestUtil</span><span class="token punctuation">.</span><span class="token function">addUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">createDsUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
      <span class="token class-name">DsUserInfo</span> dsi <span class="token operator">=</span> dsUserInfoLocalService<span class="token punctuation">.</span><span class="token function">addDsUserInfo</span><span class="token punctuation">(</span>
        testUser<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;testLocation&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">assertEquals</span><span class="token punctuation">(</span>testUser<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dsi<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;testLocation&quot;</span><span class="token punctuation">,</span> dsi<span class="token punctuation">.</span><span class="token function">getLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@DeleteAfterTestRun</span>
    <span class="token keyword">private</span> <span class="token class-name">User</span> testUser<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Inject</span>
    <span class="token keyword">private</span> <span class="token class-name">DsUserInfoLocalService</span> dsUserInfoLocalService<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></li>
</ul>
</section><section vertical="true" lineno="1369" class="slide " data-line="1369" data-h="5" data-v="10">
<h2 class="mume-header" id="%E3%82%B3%E3%83%BC%E3%83%89%E8%AA%AC%E6%98%8E">&#x30B3;&#x30FC;&#x30C9;&#x8AAC;&#x660E;</h2>

<ul>
<li>
<p><code>@RunWith(Arqullian.class)</code></p>
<ul>
<li>Liferay&#x306E;wrap&#x3055;&#x308C;&#x305F;JUnit&#x7528;<code>Arquillian</code>&#x30D7;&#x30E9;&#x30B0;&#x30A4;&#x30F3;</li>
</ul>
</li>
<li>
<p><code>@ClassRule</code>&#x3068;<code>@Rule</code></p>
<ul>
<li>JUnit&#x306E;&#x30C6;&#x30B9;&#x30C8;&#x306E;<code>Rule</code>&#x3001;&#x7C21;&#x5358;&#x306B;&#x8A00;&#x3046;&#x3068;&#x30C6;&#x30B9;&#x30C8;&#x306E;&#x5B9F;&#x884C;&#x524D;&#x5F8C;&#x306E;&#x5171;&#x901A;&#x64CD;&#x4F5C;
<ul>
<li><code>@ClassRule</code>&#xFF1A;&#x5168;&#x3066;&#x30C6;&#x30B9;&#x30C8;&#x5B9F;&#x884C;&#x524D;&#x5F8C;&#x4E00;&#x56DE;</li>
<li><code>@Rule</code>&#xFF1A;&#x30C6;&#x30B9;&#x30C8;&#x3054;&#x3068;</li>
</ul>
</li>
<li><code>AggregateTestRule</code>
<ul>
<li>&#x8907;&#x6570;<code>Rule</code>&#x3092;&#x6307;&#x5B9A;&#x53EF;&#x80FD;</li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1381" class="slide " data-line="1381" data-h="5" data-v="11">
<h2 class="mume-header" id="%E3%82%B3%E3%83%BC%E3%83%89%E8%AA%AC%E6%98%8E-1">&#x30B3;&#x30FC;&#x30C9;&#x8AAC;&#x660E;</h2>

<ul>
<li>
<p>Liferay&#x306F;&#x3044;&#x304F;&#x3064;<code>Rule</code>&#x3092;&#x63D0;&#x4F9B;&#x3057;&#x3066;&#x3044;&#x308B;</p>
<ul>
<li>&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x5B9F;&#x884C;&#x3059;&#x308B;&#x305F;&#x3081;<code>LiferayIntegrationTestRule</code>&#x306F;&#x5FC5;&#x9808;</li>
<li><a href="https://github.com/liferay/liferay-portal/tree/master/portal-test/src/com/liferay/portal/test/rule">https://github.com/liferay/liferay-portal/tree/master/portal-test/src/com/liferay/portal/test/rule</a></li>
<li><a href="https://github.com/liferay/liferay-portal/tree/master/portal-test/src/com/liferay/portal/kernel/test/rule">https://github.com/liferay/liferay-portal/tree/master/portal-test/src/com/liferay/portal/kernel/test/rule</a></li>
</ul>
</li>
<li>
<p><code>Rule</code>&#x306E;&#x4E2D;&#x8EAB;&#xFF08;LiferayIntegrationTestRule&#x4F8B;&#xFF09;</p>
<ul>
<li><a href="https://github.com/liferay/liferay-portal/blob/master/portal-test/src/com/liferay/portal/test/rule/LiferayIntegrationTestRule.java">https://github.com/liferay/liferay-portal/blob/master/portal-test/src/com/liferay/portal/test/rule/LiferayIntegrationTestRule.java</a></li>
</ul>
</li>
<li>
<p><code>Rule</code>&#x306E;&#x4F7F;&#x3044;&#x65B9;&#x306F;Liferay&#x306E;&#x30BD;&#x30FC;&#x30B9;&#x30B3;&#x30FC;&#x30C9;&#x306B;&#x78BA;&#x8A8D;&#x3059;&#x308B;&#x3057;&#x304B;&#x306A;&#x3044;&#x306E;&#x3067;&#x4ECA;&#x56DE;&#x306F;&#x6700;&#x3082;&#x57FA;&#x672C;&#x306E;<code>LiferayIntegrationTestRule</code>&#x3060;&#x3051;&#x3092;&#x5229;&#x7528;&#x3059;&#x308B;</p>
</li>
</ul>
</section><section vertical="true" lineno="1393" class="slide " data-line="1393" data-h="5" data-v="12">
<h2 class="mume-header" id="%E3%82%B3%E3%83%BC%E3%83%89%E8%AA%AC%E6%98%8E-2">&#x30B3;&#x30FC;&#x30C9;&#x8AAC;&#x660E;</h2>

<ul>
<li><code>@DeleteAfterTestRun</code>&#x3068;<code>@Inject</code>
<ul>
<li><code>LiferayIntegrationTestRule</code>&#x306B;&#x542B;&#x307E;&#x308C;&#x305F;<code>DeleteAfterTestRunMethodTestRule</code>&#x3068;<code>InjectTestRule</code>&#x306B;&#x30B5;&#x30DD;&#x30FC;&#x30C8;&#x3055;&#x308C;&#x308B;&#x30A2;&#x30CE;&#x30C6;&#x30FC;&#x30B7;&#x30E7;&#x30F3;</li>
<li>&#x6587;&#x9762;&#x306E;&#x610F;&#x5473;
<ul>
<li><code>@DeleteAfterTestRun</code>&#x3067;&#x6307;&#x5B9A;&#x3055;&#x308C;&#x308B;&#x30A8;&#x30F3;&#x30C6;&#x30A3;&#x30C6;&#x30A3;&#x306F;&#x30C6;&#x30B9;&#x30C8;&#x3054;&#x3068;&#xFF08;<code>@@Rule</code>&#xFF09;&#x306B;&#x65B0;&#x898F;&#x4F5C;&#x6210;&#x3055;&#x308C;&#x308B;</li>
<li><code>@Inject</code>&#x306F;Liferay&#x306E;OSGI&#x74B0;&#x5883;&#x4E2D;&#x306E;&#x30B5;&#x30FC;&#x30D3;&#x30B9;&#x3092;&#x30C6;&#x30B9;&#x30C8;&#x74B0;&#x5883;&#x306B;&#x6CE8;&#x5165;&#x3059;&#x308B;&#xFF08;<code>@Component</code>&#x3068;&#x3060;&#x3044;&#x305F;&#x3044;&#x540C;&#x3058;&#xFF09;</li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1402" class="slide " data-line="1402" data-h="5" data-v="13">
<h2 class="mume-header" id="lets-run-4">Let&apos;s Run</h2>

<ul>
<li>IDE
<ul>
<li>ds-user-info-test / verification / testIntegration</li>
</ul>
</li>
<li>CMD &#xFF08;&#x2190;&#x304A;&#x3059;&#x3059;&#x3081;&#xFF09;<pre data-role="codeBlock" data-info class="language-"><code>[WKSPCE_ROOT]/gradlew :modules:ds-user-info:ds-user-info-test:testIntegration
</code></pre></li>
<li>Result<pre data-role="codeBlock" data-info class="language-"><code>/modules/ds-user-info/ds-user-info-test/build/reports/tests/testIntegration/index.html
</code></pre></li>
</ul>
</section><section vertical="true" lineno="1415" class="slide " data-line="1415" data-h="5" data-v="14">
<h2 class="mume-header" id="lets-run-5">Let&apos;s Run</h2>

<ul>
<li>&#x6CE8;&#x610F;&#x70B9;
<ul>
<li>Liferay IDE&#x304B;&#x3089;<code>testIntegration</code>&#x3092;&#x5B9F;&#x884C;&#x3059;&#x308B;&#x3068;&#x3001;&#x30C6;&#x30B9;&#x30C8;&#x7D42;&#x308F;&#x3063;&#x305F;&#x5F8C;&#x306B;&#x3001;&#x8D77;&#x52D5;&#x3055;&#x308C;&#x305F;TestableTomcat&#x304C;&#x6B63;&#x3057;&#x304F;&#x505C;&#x6B62;&#x3055;&#x308C;&#x3066;&#x306A;&#x3044;&#x53EF;&#x80FD;&#x6027;&#x304C;&#x3042;&#x308B;
<ul>
<li>CMD&#x3067;&#x5B9F;&#x884C;&#x3057;&#x3066;&#x3082;&#xFF08;&#x53EF;&#x80FD;&#x6027;&#x304C;&#x5C11;&#x306A;&#x3063;&#x3066;&#x308B;&#x304C;&#xFF09;</li>
<li>&#x305D;&#x306E;&#x6642;&#x306F;tomcat&#x3001;gradle daemon&#x3092;&#x624B;&#x4F5C;&#x696D;&#x3067;kill&#x3057;&#x3066;&#x518D;&#x5B9F;&#x884C;&#x3059;&#x308B;</li>
</ul>
</li>
<li>&#x4E0A;&#x8A18;&#x73FE;&#x8C61;&#x304C;&#x767A;&#x751F;&#x3059;&#x308B;&#x3068;&#x3001;&#x30C6;&#x30B9;&#x30C8;tomcat&#x306E;<code>/osgi/modules</code>&#x306E;&#x4E0B;&#x306B;jar&#x304C;&#x6B8B;&#x3055;&#x308C;&#x308B;&#x306E;&#x3067;&#x524A;&#x9664;&#x3057;&#x306A;&#x3044;&#x3068;&#x30BD;&#x30FC;&#x30B9;&#x30B3;&#x30FC;&#x30C9;&#x306E;&#x66F4;&#x65B0;&#x306F;&#x30C6;&#x30B9;&#x30C8;&#x30B5;&#x30FC;&#x30D0;&#x306B;&#x53CD;&#x6620;&#x3067;&#x304D;&#x306A;&#x3044;&#x53EF;&#x80FD;&#x6027;&#x304C;&#x3042;&#x308B;</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1424" class="slide " data-line="1424" data-h="5" data-v="15">
<h2 class="mume-header" id="lets-test-8">Let&apos;s Test</h2>

<ul>
<li><code>ds-user-import</code>&#x306E;&#x30C6;&#x30B9;&#x30C8;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4F5C;&#x308A;&#x307E;&#x3057;&#x3087;&#x3046;
<ul>
<li>&#x9762;&#x5012;&#x306A;&#x306E;&#x3067;<code>ds-user-info-test</code>&#x306B;&#x8FFD;&#x52A0;&#x3057;&#x307E;&#x3057;&#x3087;&#x3046;</li>
<li>build.gradle
<ul>
<li>&#x4EE5;&#x4E0B;&#x306E;&#x5185;&#x5BB9;&#x3092;&#x8FFD;&#x52A0;&#x3059;&#x308B;</li>
</ul>
<pre data-role="codeBlock" data-info class="language-"><code>testIntegrationCompile project(&quot;:modules:ds-user-info:ds-user-import&quot;)
testModules project(&quot;:modules:ds-user-info:ds-user-import&quot;)
</code></pre></li>
<li>&#x4EE5;&#x4E0B;&#x306E;&#x30D1;&#x30C3;&#x30B1;&#x30FC;&#x30B8;&#x3068;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x8FFD;&#x52A0;&#x3059;&#x308B;
<ul>
<li><code>test.workaround.ds.user.importer.test</code></li>
<li><code>DsiUserImporterTest.java</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1439" class="slide " data-line="1439" data-h="5" data-v="16">
<h2 class="mume-header" id="lets-code-20">Let&apos;s Code</h2>

<ul>
<li>&#x30B3;&#x30D4;&#x30DA;&#x30FC;
<ul>
<li>Liferay&#x30B5;&#x30FC;&#x30D0;&#x4E0A;&#x3067;&#x5B9F;&#x884C;&#x3055;&#x308C;&#x308B;&#x306E;&#x3067;&#x666E;&#x6BB5;&#x306E;&#x66F8;&#x304D;&#x65B9;&#x3067;OK</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">Arquillian</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DsiUserImporterTest</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@ClassRule</span>
    <span class="token annotation punctuation">@Rule</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">AggregateTestRule</span> aggregateTestRule <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LiferayIntegrationTestRule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">createDsiUserNormal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
      <span class="token class-name">JSONObject</span> userObj <span class="token operator">=</span> <span class="token class-name">JSONFactoryUtil</span><span class="token punctuation">.</span><span class="token function">createJSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      userObj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;windowsId&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;testuser1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      userObj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;mail&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;test_mail1@dsi.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      userObj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;enabled&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      userObj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;city&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;city1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      userObj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;state1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      userObj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;country&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;country1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      dsUserImporter<span class="token punctuation">.</span><span class="token function">importUser</span><span class="token punctuation">(</span>userObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
      testUser <span class="token operator">=</span> <span class="token class-name">UserLocalServiceUtil</span><span class="token punctuation">.</span><span class="token function">fetchUserByScreenName</span><span class="token punctuation">(</span><span class="token class-name">PortalUtil</span><span class="token punctuation">.</span><span class="token function">getDefaultCompanyId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;testuser1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      testDui <span class="token operator">=</span> <span class="token class-name">DsUserInfoLocalServiceUtil</span><span class="token punctuation">.</span><span class="token function">getDsUserInfos</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;testuser1&quot;</span><span class="token punctuation">,</span> testUser<span class="token punctuation">.</span><span class="token function">getScreenName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;test_mail1@dsi.com&quot;</span><span class="token punctuation">,</span> testUser<span class="token punctuation">.</span><span class="token function">getEmailAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> testUser<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">assertEquals</span><span class="token punctuation">(</span>testUser<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> testDui<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;city1 country1&quot;</span><span class="token punctuation">,</span> testDui<span class="token punctuation">.</span><span class="token function">getLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@DeleteAfterTestRun</span> <span class="token class-name">User</span> testUser<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@DeleteAfterTestRun</span> <span class="token class-name">DsUserInfo</span> testDui<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Inject</span><span class="token punctuation">(</span>filter <span class="token operator">=</span> <span class="token string">&quot;(&amp;(component.name=test.workaround.ds.user.importer.impl.DsiUserImporterImpl))&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">DsUserImporter</span> dsUserImporter<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</pre></li>
</ul>
</section><section vertical="true" lineno="1477" class="slide " data-line="1477" data-h="5" data-v="17">
<h2 class="mume-header" id="lets-test-9">Let&apos;s Test</h2>

<ul>
<li>
<p>&#x6CE8;&#x610F;&#x70B9;</p>
<ul>
<li>OSGI&#x30B5;&#x30FC;&#x30D3;&#x30B9;&#x3092;&#x5229;&#x7528;&#x3059;&#x308B;&#x6642;&#x306F;<code>@Inject</code>&#x3067;&#x5229;&#x7528;</li>
<li><code>@Inject</code>&#x306B;&#x306F;&#x3001;<code>@Reference</code>&#x306E;<code>target</code>&#x3088;&#x3046;&#x306A;filter&#x3092;&#x6307;&#x5B9A;&#x3067;&#x304D;&#x308B;
<ul>
<li>&#x305F;&#x3060;&#x3057;&#x3001;<code>filter</code>&#x306F;&#x4E00;&#x500B;&#x306E;&#x307F;&#x306E;&#x5834;&#x5408;&#x3082;<code>(&amp;())</code>&#x30D5;&#x30A9;&#x30FC;&#x30DE;&#x30C3;&#x30C8;&#x3067;&#x6307;&#x5B9A;&#x3057;&#x306A;&#x3044;&#x3068;&#x3044;&#x3051;&#x306A;&#x3044;</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Run</p>
<ul>
<li>Error</li>
<li><code>DsiUserImporterImpl</code>&#x306E;&#x5B9F;&#x88C5;&#x554F;&#x984C;&#x3092;&#x4FEE;&#x6B63;&#x3057;&#x3066;&#x518D;&#x5B9F;&#x884C;
<ul>
<li>all green</li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1489" class="slide " data-line="1489" data-h="5" data-v="18">
<h2 class="mume-header" id="lets-test-10">Let&apos;s Test</h2>

<ul>
<li>&#x81EA;&#x7531;&#x306B;&#x30C6;&#x30B9;&#x30C8;&#x30B1;&#x30FC;&#x30B9;&#x3092;&#x8A2D;&#x5B9A;&#x3057;&#x3066;&#x8A66;&#x3057;&#x307E;&#x3057;&#x3087;&#x3046;<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">createDsiUserDisabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

  <span class="token class-name">JSONObject</span> userObj <span class="token operator">=</span> <span class="token class-name">JSONFactoryUtil</span><span class="token punctuation">.</span><span class="token function">createJSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  userObj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;windowsId&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;testuser2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  userObj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;mail&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;test_mail2@dsi.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  userObj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;enabled&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  userObj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;city&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;city2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  userObj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;state2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  userObj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;country&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;country2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  dsUserImporter<span class="token punctuation">.</span><span class="token function">importUser</span><span class="token punctuation">(</span>userObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  testUser <span class="token operator">=</span> <span class="token class-name">UserLocalServiceUtil</span><span class="token punctuation">.</span><span class="token function">fetchUserByScreenName</span><span class="token punctuation">(</span><span class="token class-name">PortalUtil</span><span class="token punctuation">.</span><span class="token function">getDefaultCompanyId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;testuser2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  testDui <span class="token operator">=</span> <span class="token class-name">DsUserInfoLocalServiceUtil</span><span class="token punctuation">.</span><span class="token function">getDsUserInfos</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> testUser<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">createDsiUserNoCity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

  <span class="token class-name">JSONObject</span> userObj <span class="token operator">=</span> <span class="token class-name">JSONFactoryUtil</span><span class="token punctuation">.</span><span class="token function">createJSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  userObj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;windowsId&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;testuser3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  userObj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;mail&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;test_mail3@dsi.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  userObj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;enabled&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  userObj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;city&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  userObj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;state3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  userObj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;country&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;country3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  dsUserImporter<span class="token punctuation">.</span><span class="token function">importUser</span><span class="token punctuation">(</span>userObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  testUser <span class="token operator">=</span> <span class="token class-name">UserLocalServiceUtil</span><span class="token punctuation">.</span><span class="token function">fetchUserByScreenName</span><span class="token punctuation">(</span><span class="token class-name">PortalUtil</span><span class="token punctuation">.</span><span class="token function">getDefaultCompanyId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;testuser3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  testDui <span class="token operator">=</span> <span class="token class-name">DsUserInfoLocalServiceUtil</span><span class="token punctuation">.</span><span class="token function">getDsUserInfos</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;country3&quot;</span><span class="token punctuation">,</span> testDui<span class="token punctuation">.</span><span class="token function">getLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></li>
</ul>
</section><section vertical="true" lineno="1526" class="slide " data-line="1526" data-h="5" data-v="19">
<h2 class="mume-header" id="%E3%81%A1%E3%82%87%E3%81%A3%E3%81%A8%E3%81%BE%E3%81%A8%E3%82%81-2">&#x3061;&#x3087;&#x3063;&#x3068;&#x307E;&#x3068;&#x3081;</h2>

<ul>
<li>Integration&#x30C6;&#x30B9;&#x30C8;
<ul>
<li>One-Click&#x3067;&#x30C6;&#x30B9;&#x30C8;&#xFF08;&#x3044;&#x308D;&#x3044;&#x308D;&#x5236;&#x9650;&#x3042;&#x308B;&#x304C;&#xFF09;</li>
<li>OSGI&#x74B0;&#x5883;&#x3042;&#x308A;
<ul>
<li>arquillian-extension</li>
</ul>
</li>
<li>JUnit&#x74B0;&#x5883;&#x3042;&#x308A;
<ul>
<li><code>Arqullian.class</code>Runner&#x63D0;&#x4F9B;
<ul>
<li>&#x2757;&#xFE0F;Junit4&#x306E;&#x307F;&#x5BFE;&#x5FDC;&#x2757;&#xFE0F;</li>
</ul>
</li>
<li>Mockito&#x4F75;&#x7528;&#x53EF;</li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1537" class="slide " data-line="1537" data-h="5" data-v="20">
<h2 class="mume-header" id="%E3%81%A1%E3%82%87%E3%81%A3%E3%81%A8%E3%81%BE%E3%81%A8%E3%82%81-3">&#x3061;&#x3087;&#x3063;&#x3068;&#x307E;&#x3068;&#x3081;</h2>

<ul>
<li>&#x554F;&#x984C;&#x70B9;
<ul>
<li>&#x6BCE;&#x56DE;&#x30C6;&#x30B9;&#x30C8;&#x7528;Liferay&#x30B5;&#x30FC;&#x30D0;&#x306E;&#x8D77;&#x52D5;&#x30FB;&#x505C;&#x6B62;&#x304C;&#x5FC5;&#x8981;
<ul>
<li>&#x30E6;&#x30CB;&#x30C3;&#x30C8;&#x30C6;&#x30B9;&#x30C8;&#x3068;&#x3057;&#x3066;&#x306E;&#x5229;&#x7528;&#x306F;&#x4E0D;&#x4FBF;</li>
</ul>
</li>
<li>Gradle Daemon&#x306B;&#x3044;&#x308D;&#x3044;&#x308D;&#x30C8;&#x30E9;&#x30D6;&#x30EB;&#x304C;&#x3042;&#x308B;
<ul>
<li><code>kill gradle; kill java; kill tomcat;</code> etc...</li>
<li>&#x500B;&#x4EBA;&#x306E;&#x74B0;&#x5883;&#x3067;&#x3001;&#x540C;&#x3058;&#x30D5;&#x30A9;&#x30EB;&#x30C0;&#x30EC;&#x30D9;&#x30EB;&#x306E;&#x3057;&#x305F;&#x306B;&#x8907;&#x6570;testIntegration&#x30D7;&#x30ED;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x304C;&#x5B58;&#x5728;&#x3059;&#x308B;&#x3068;&#x30C6;&#x30B9;&#x30C8;tomcat&#x306E;&#x30A2;&#x30AF;&#x30BB;&#x30B9;lock&#x304C;&#x72C2;&#x3063;&#x3066;&#x8D77;&#x52D5;&#x3067;&#x304D;&#x306A;&#x3044;&#x30B1;&#x30FC;&#x30B9;&#x3082;&#x3042;&#x308B;</li>
</ul>
</li>
</ul>
</li>
<li>&#x5BFE;&#x7B56;
<ul>
<li>&#x4E8B;&#x524D;&#x306B;&#x30C6;&#x30B9;&#x30C8;&#x3067;&#x304D;&#x308B;Liferay&#x30B5;&#x30FC;&#x30D0;&#x3092;&#x8D77;&#x52D5;&#x3059;&#x308B;
<ul>
<li>&#x305F;&#x3060;&#x3057;<code>startTestableTomcat</code>&#x306F;&#x305F;&#x3060;<code>testIntegration</code>&#x306E;&#x30B5;&#x30D6;&#x30BF;&#x30B9;&#x30AF;&#x306E;&#x305F;&#x3081;&#x3001;&#x8D77;&#x52D5;&#x3055;&#x308C;&#x308B;tomcat&#x30B5;&#x30FC;&#x30D0;&#x306F;&#x3059;&#x3050;&#x306B;&#x505C;&#x6B62;&#x3055;&#x308C;&#x308B;</li>
</ul>
</li>
</ul>
</li>
<li>&#x88CF;&#x6280;
<ul>
<li>&#x958B;&#x767A;&#x7528;Liferay&#x30B5;&#x30FC;&#x30D0;&#x3092;&#x30C6;&#x30B9;&#x30C8;&#x5BFE;&#x5FDC;&#x306B;&#x3059;&#x308B;</li>
<li>&#x81EA;&#x5DF1;&#x8CAC;&#x4EFB;</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1552" class="slide " data-line="1552" data-h="5" data-v="21">
<h2 class="mume-header" id="liferay-for-test">Liferay for Test</h2>

<ul>
<li>tomcat&#x306E;<code>jmx</code>&#x30B5;&#x30DD;&#x30FC;&#x30C8;&#x3092;&#x30AA;&#x30F3;&#x306B;&#x3059;&#x308B;
<ul>
<li><code>[LIFERAY]/tomcat/bin/setenv.sh</code>&#x306B;&#x4EE5;&#x4E0B;&#x306E;&#x5185;&#x5BB9;&#x3092;&#x8FFD;&#x52A0;&#x3059;&#x308B;
<ul>
<li><code>testIntegration</code>&#x30BF;&#x30B9;&#x30AF;&#x306E;&#x30DD;&#x30FC;&#x30C8;&#x756A;&#x53F7;&#x306F;&#x30CF;&#x30FC;&#x30C9;&#x30B3;&#x30FC;&#x30C9;&#x3055;&#x308C;&#x308B;&#x306E;&#x305F;&#x3081;&#x5909;&#x66F4;&#x3067;&#x304D;&#x306A;&#x3044;</li>
</ul>
</li>
</ul>
<pre data-role="codeBlock" data-info="sh" class="language-bash">CATALINA_OPTS<span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$CATALINA_OPTS</span> \
-Dcom.sun.management.jmxremote \
-Dcom.sun.management.jmxremote.authenticate=false \
-Dcom.sun.management.jmxremote.port=8099 \
-Dcom.sun.management.jmxremote.ssl=false&quot;</span>
</pre></li>
</ul>
</section><section vertical="true" lineno="1564" class="slide " data-line="1564" data-h="5" data-v="22">
<h2 class="mume-header" id="liferay-for-test-1">Liferay for Test</h2>

<ul>
<li>Optional: &#x30C6;&#x30B9;&#x30C8;&#x306E;&#x74B0;&#x5883;&#x5909;&#x6570;&#x306E;&#x8A2D;&#x5B9A;
<ul>
<li>Liferay&#x306E;&#x30C7;&#x30D5;&#x30A9;&#x30EB;&#x30C8;&#x30C6;&#x30B9;&#x30C8;&#x5909;&#x6570;&#x306F;<code>portal-test/src/test-portal-impl.properties</code>&#x306B;&#x3042;&#x308B;</li>
</ul>
<pre data-role="codeBlock" data-info class="language-"><code>include-and-override=test-portal-impl-ext.properties
assert.logs=true
ci.test.timeout.time=1200000
company.web.id=liferay.com
dl.file.entry.processors.trigger.synchronously=true
journal.transformer.regex.pattern.0=beta.sample.com
journal.transformer.regex.replacement.0=production.sample.com
junit.delay.factor=1
portal.url=http://localhost:8080
user.password=test
</code></pre><ul>
<li>&#x5024;&#x306F;<code>testableTomcat</code>&#x306B;&#x3042;&#x308F;&#x308C;&#x3066;&#x8A2D;&#x5B9A;&#x3055;&#x308C;&#x308B;&#x306E;&#x3067;&#x3001;&#x624B;&#x5143;&#x306E;Liferay&#x3092;&#x5229;&#x7528;&#x3059;&#x308B;&#x3068;<code>test-portal-impl-ext.properties</code>&#x3067;&#x30AA;&#x30FC;&#x30D0;&#x30FC;&#x30E9;&#x30A4;&#x30C9;&#x3057;&#x306A;&#x3044;&#x3068;&#x3044;&#x3051;&#x306A;&#x3044;
<ul>
<li>eg: &#x500B;&#x4EBA;&#x306E;&#x30ED;&#x30FC;&#x30AB;&#x30EB;&#x306E;Liferay&#x306E;<code>company.web.id</code>&#x306F;<code>liferay.lf.com</code>&#x306E;&#x305F;&#x3081;&#x30AA;&#x30FC;&#x30D0;&#x30FC;&#x30E9;&#x30A4;&#x30C9;&#x304C;&#x5FC5;&#x8981;</li>
</ul>
</li>
<li>&#x8A2D;&#x5B9A;&#x5834;&#x6240;
<ul>
<li><code>[LIFERAY]/tomcat/webapps/ROOT/WEB-INF/classes/</code>
<ul>
<li>Portal&#x306E;ClassLoader&#x306E;&#x30C7;&#x30D5;&#x30A9;&#x30EB;&#x30C8;&#x30D1;&#x30B9;&#xFF08;TestPropsUtil.java&#x3092;&#x53C2;&#x7167;&#xFF09;</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1586" class="slide " data-line="1586" data-h="5" data-v="23">
<h2 class="mume-header" id="liferay-for-test-2">Liferay for Test</h2>

<ul>
<li>&#x5FC5;&#x9808;&#x30E2;&#x30B8;&#x30E5;&#x30FC;&#x30EB;&#x306E;&#x30C7;&#x30D7;&#x30ED;&#x30A4;&#xFF08;<code>build.gradle</code>&#x306E;<code>testModules</code>&#x306E;&#x5185;&#x5BB9;&#xFF09;
<ul>
<li><code>com.liferay.arquillian.extension.junit.bridge, 1.0.20</code></li>
<li><code>com.liferay.arquillian.extension.junit.bridge.connector, 1.0.1</code></li>
<li><code>com.liferay.portal.test, 23.2.1</code></li>
<li><code>com.liferay.portal.test.integration, 6.0.35</code></li>
<li><code>biz.aQute.bndlib.jar</code></li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1596" class="slide " data-line="1596" data-h="5" data-v="24">
<h2 class="mume-header" id="liferay-for-test-3">Liferay for Test</h2>

<ul>
<li>&#x4EE5;&#x4E0A;&#x306E;&#x6761;&#x4EF6;&#x3092;&#x63C3;&#x3063;&#x305F;&#x3089;Liferay&#x3092;&#x8D77;&#x52D5;&#x3059;&#x308B;
<ul>
<li>log&#x306B;&#x4EE5;&#x4E0B;&#x306E;&#x5185;&#x5BB9;&#x3092;&#x78BA;&#x8A8D;&#x3067;&#x304D;&#x305F;&#x3089;ArquillianConnect&#x304C;&#x8D77;&#x52D5;&#x3055;&#x308C;&#x308B;&#x306E;&#x3053;&#x3068;&#x3092;&#x78BA;&#x8A8D;&#x3067;&#x304D;&#x308B;<pre data-role="codeBlock" data-info class="language-"><code>[ArquillianConnector:50] Listening on port 32763
</code></pre></li>
<li>VisualVM&#x304C;&#x3042;&#x308C;&#x3070;&#x3001;<code>localhost:8099</code>&#x306B;non-ssl&#x3067;&#x63A5;&#x7D9A;&#x3059;&#x308B;
<ul>
<li>JMX&#x304C;&#x6B63;&#x3057;&#x304F;&#x8D77;&#x52D5;&#x3055;&#x308C;&#x308B;&#x3053;&#x3068;&#x304C;&#x78BA;&#x8A8D;&#x3067;&#x304D;&#x308B;</li>
</ul>
<pre data-role="codeBlock" data-info class="language-"><code>The application is managed by a JMX connection. See the JMX Connection tab for details.
</code></pre></li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1609" class="slide " data-line="1609" data-h="5" data-v="25">
<h2 class="mume-header" id="lets-code-21">Let&apos;s Code</h2>

<ul>
<li>&#x305D;&#x308C;&#x3067;&#x306F;&#x8D77;&#x52D5;&#x3055;&#x308C;&#x305F;Liferay&#x30B5;&#x30FC;&#x30D0;&#x3067;<code>testIntegration</code>&#x3092;&#x884C;&#x3046;
<ul>
<li><code>modules/ds-user-info/ds-user-impor-test</code>&#x306B;
<ul>
<li><code>src/testIntegration/java</code>&#x30D5;&#x30A9;&#x30EB;&#x30C0;&#x30FC;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;</li>
</ul>
</li>
<li>bnd.bnd<pre data-role="codeBlock" data-info class="language-"><code>Bundle-Name: ds-user-import-test
Bundle-SymbolicName: test.workaround.ds.user.importer.test
Bundle-Version: 1.0.0
</code></pre></li>
<li>build.gradle
<ul>
<li><code>testModules</code>&#x304C;&#x306A;&#x304F;&#x306A;&#x308B;</li>
</ul>
<pre data-role="codeBlock" data-info class="language-"><code>dependencies {
  testIntegrationCompile group: &quot;com.liferay.portal&quot;, name: &quot;release.dxp.api&quot;
  testIntegrationCompile(&apos;com.liferay:com.liferay.arquillian.extension.junit.bridge:1.0.20&apos;)
  testIntegrationCompile(&apos;com.liferay.portal:com.liferay.portal.test:23.2.1&apos;)
  testIntegrationCompile(&apos;com.liferay.portal:com.liferay.portal.test.integration:6.0.35&apos;)
  testIntegrationCompile group: &quot;junit&quot;, name: &quot;junit&quot;, version: &quot;4.13.1&quot;
  testIntegrationCompile(&apos;org.slf4j:slf4j-log4j12:2.0.12&apos;)
  testIntegrationCompile &apos;org.apache.logging.log4j:log4j-core:2.23.0&apos;
  testIntegrationCompile project(&quot;:modules:ds-user-info:ds-user-import&quot;)
  testIntegrationCompile project(&quot;:modules:ds-user-info:ds-user-info-api&quot;)
  testIntegrationCompile project(&quot;:modules:ds-user-info:ds-user-info-service&quot;)
}
</code></pre></li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1638" class="slide " data-line="1638" data-h="5" data-v="26">
<h2 class="mume-header" id="lets-code-22">Let&apos;s Code</h2>

<ul>
<li>
<p>&#x30C6;&#x30B9;&#x30C8;&#x30B3;&#x30FC;&#x30C9;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;</p>
<ul>
<li><code>test.workaround.ds.user.importer.test</code>&#x30D1;&#x30C3;&#x30B1;&#x30FC;&#x30B8;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;</li>
<li><code>DsiUserImporterTset.java</code>&#x3092;&#x4F5C;&#x6210;&#x3057;&#x3001;&#x9069;&#x5F53;&#x306B;<code>ds-user-info-test</code>&#x304B;&#x3089;&#x4E2D;&#x8EAB;&#x3092;&#x30B3;&#x30D4;&#x30DA;&#x30FC;&#x3059;&#x308B;</li>
</ul>
</li>
<li>
<p>&#x30D3;&#x30EB;&#x30C9;&amp;&#x30C7;&#x30D7;&#x30ED;&#x30A4;</p>
<ul>
<li><code>testIntegration</code>&#x306E;&#x81EA;&#x52D5;<code>osgi/test</code>&#x30D5;&#x30A9;&#x30EB;&#x30C0;&#x30FC;&#x30B3;&#x30D4;&#x30FC;&#x6A5F;&#x80FD;&#x306F;&#x305D;&#x306E;&#x30BF;&#x30B9;&#x30AF;&#x304C;&#x8D77;&#x52D5;&#x3057;&#x305F;<code>testableTomcat</code>&#x30B5;&#x30FC;&#x30D0;&#x306E;&#x307F;&#x6709;&#x52B9;</li>
<li>&#x30ED;&#x30FC;&#x30AB;&#x30EB;&#x306E;Liferay&#x306B;&#x30C6;&#x30B9;&#x30C8;&#x3057;&#x305F;&#x3044;&#x306A;&#x3089;<code>testIntegrationCompile project</code>&#x306E;&#x90E8;&#x5206;&#x3092;&#x624B;&#x4F5C;&#x696D;&#x3067;&#x30D3;&#x30EB;&#x30C9;&#x3057;&#x3066;&#x30C7;&#x30D7;&#x30ED;&#x30A4;&#x304C;&#x5FC5;&#x8981;</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1649" class="slide " data-line="1649" data-h="5" data-v="27">
<h2 class="mume-header" id="lets-test-11">Let&apos;s Test</h2>

<ul>
<li>
<p>Liferay&#x30B5;&#x30FC;&#x30D0;&#x304C;&#x8D77;&#x52D5;&#x3057;&#x3066;&#x3044;&#x308B;&#x72B6;&#x614B;&#x3067;<code>ds-user-import-test</code>&#x306E;<code>testIntegration</code>&#x30BF;&#x30B9;&#x30AF;&#x3092;&#x5B9F;&#x884C;&#x3059;&#x308B;</p>
<ul>
<li><code>testIntegration</code>&#x306F;<code>32763</code>&#x306B;&#x7A3C;&#x50CD;&#x3057;&#x3066;&#x3044;&#x308B;ArquillianConnector&#x3092;&#x8A8D;&#x8B58;&#x3057;&#x3001;&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x5B9F;&#x884C;&#x3067;&#x304D;&#x308B;tomcat&#x304C;&#x5B58;&#x5728;&#x3059;&#x308B;&#x3053;&#x3068;&#x3092;&#x8A8D;&#x8B58;&#x3059;&#x308B;</li>
<li>&#x305D;&#x306E;&#x305F;&#x3081;<code>startTestableTomcat</code>&#x30B5;&#x30D6;&#x30BF;&#x30B9;&#x30AF;&#x3092;&#x98DB;&#x3070;&#x3057;&#x3001;Arquillian-JUnit&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x5B9F;&#x884C;&#x3059;&#x308B;</li>
<li>all green</li>
</ul>
</li>
<li>
<p>&#x6C17;&#x306B;&#x306A;&#x308B;&#x65B9;&#x306F;Liferay&#x306E;DB&#x306B;&#x78BA;&#x8A8D;&#x3057;&#x3001;<code>@DeleteAfterTestRun</code>&#x306E;&#x52B9;&#x679C;&#x3092;&#x78BA;&#x304B;&#x3081;&#x307E;&#x3057;&#x3087;&#x3046;</p>
</li>
</ul>
</section><section vertical="true" lineno="1658" class="slide " data-line="1658" data-h="5" data-v="28">
<h2 class="mume-header" id="%E3%81%A1%E3%82%87%E3%81%A3%E3%81%A8%E3%81%BE%E3%81%A8%E3%82%81-4">&#x3061;&#x3087;&#x3063;&#x3068;&#x307E;&#x3068;&#x3081;</h2>

<ul>
<li>&#x30AA;&#x30D5;&#x30A3;&#x30B7;&#x30E3;&#x30EB;&#x65B9;&#x5F0F;&#x306B;&#x6BD4;&#x3079;&#x308B;&#x3068;
<ul>
<li>Liferay&#x30B5;&#x30FC;&#x30D0;&#x306E;&#x90FD;&#x5EA6;&#x8D77;&#x52D5;&#x304C;&#x5FC5;&#x8981;&#x306A;&#x3044;</li>
<li>&#x30C6;&#x30B9;&#x30C8;&#x5BFE;&#x8C61;&#x306E;&#x30E2;&#x30B8;&#x30E5;&#x30FC;&#x30EB;&#x3092;&#x4FEE;&#x6B63;&#x3057;&#x305F;&#x3089;&#x624B;&#x4F5C;&#x696D;&#x3067;build/deploy&#x304C;&#x5FC5;&#x8981;</li>
<li>&#x5168;&#x4F53;&#x7684;&#x306B;&#x6240;&#x8981;&#x6642;&#x9593;&#x304C;&#x6E1B;&#x308B;&#x306E;&#x3067;&#x3001;Unit Test&#x3068;&#x540C;&#x3058;&#x304F;&#x300C;&#x30C6;&#x30B9;&#x30C8;&#x30FC;&#x5B9F;&#x88C5;&#x30FC;&#x30C6;&#x30B9;&#x30C8;&#x300D;&#x30EB;&#x30FC;&#x30D7;&#x4E2D;&#x306B;&#x3061;&#x3087;&#x3053;&#x3061;&#x3087;&#x3053;Integration&#x30C6;&#x30B9;&#x30C8;&#x3059;&#x308B;&#x3053;&#x3068;&#x304C;&#x3067;&#x304D;&#x308B;</li>
<li>&#x65E2;&#x5B58;DB&#x30C7;&#x30FC;&#x30BF;&#x3078;&#x306E;&#x5F71;&#x97FF;&#x306F;&#x5C11;&#x306A;&#x3044;&#x3089;&#x3057;&#x3044;</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1666" class="slide " data-line="1666" data-h="5" data-v="29">
<h2 class="mume-header" id="lets-code%E6%99%82%E9%96%93%E3%81%8C%E3%81%82%E3%82%8C%E3%81%B0">Let&apos;s Code&#xFF08;&#x6642;&#x9593;&#x304C;&#x3042;&#x308C;&#x3070;&#xFF09;</h2>

<ul>
<li>&#x305B;&#x3063;&#x304B;&#x304F;&#x74B0;&#x5883;&#x304C;&#x6574;&#x5099;&#x3067;&#x304D;&#x305F;&#x306E;&#x3067;&#x3001;DseUserImporterImpl&#x3092;&#x5B9F;&#x88C5;&#x3057;&#x3066;&#x307F;&#x307E;&#x3057;&#x3087;&#x3046;</li>
</ul>
</section></section><section><section lineno="1670" class="slide " data-line="1670" data-h="6" data-v="0">
<h2 class="mume-header" id="summary">Summary</h2>

<ul>
<li>Liferay&#x958B;&#x767A;&#x306B;&#x5F79;&#x7ACB;&#x3064;&#xFF08;&#x5F53;&#x793E;&#x8ABF;&#x3079;&#xFF09;&#x30E6;&#x30CB;&#x30C3;&#x30C8;&#x30C6;&#x30B9;&#x30C8;&#x3068;&#xFF08;&#x30E6;&#x30CB;&#x30C3;&#x30C8;&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x771F;&#x4F3C;&#x3057;&#x3066;&#x308B;&#xFF09;Integration&#x30C6;&#x30B9;&#x30C8;&#x306E;&#x3084;&#x308A;&#x65B9;&#x306E;&#x5171;&#x6709;
<ul>
<li>Unit Test
<ul>
<li>Liferay&#x306E;OSGI&#x74B0;&#x5883;&#x306A;&#x3057;</li>
<li>testCompile&#x306E;jar&#x3060;&#x3051;&#x3067;&#x5B9F;&#x884C;&#x3059;&#x308B;</li>
<li>&#x30C4;&#x30FC;&#x30EB;
<ul>
<li>JUnit + Mockito</li>
</ul>
</li>
<li>&#x8EFD;&#x3044;</li>
</ul>
</li>
<li>Integration Test
<ul>
<li>Liferay&#x306E;OSGI&#x74B0;&#x5883;&#x3042;&#x308A;</li>
<li>testModules&#x306E;jar&#x3092;&#x30C7;&#x30D7;&#x30ED;&#x30A4;&#x3057;&#x3066;&#x5B9F;&#x884C;&#x3059;&#x308B;</li>
<li>&#x30C4;&#x30FC;&#x30EB;
<ul>
<li>Arquillian-Extension + Liferay-Test + JUnit</li>
</ul>
</li>
<li>&#x91CD;&#x3044;
<ul>
<li>&#x3042;&#x308B;&#x7A0B;&#x5EA6;&#x306E;&#x5BFE;&#x7B56;&#x304C;&#x3067;&#x304D;&#x308B;</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1687" class="slide " data-line="1687" data-h="6" data-v="1">
<h2 class="mume-header" id="summary-1">Summary</h2>

<ul>
<li>&#x3061;&#x3087;&#x3063;&#x3068;&#x3060;&#x3051;<strong>TDD</strong>&#x306E;&#x611F;&#x60F3;&#xFF08;&#x5F53;&#x793E;&#x8ABF;&#x3079;&#xFF09;
<ul>
<li>&#x30E1;&#x30EA;&#x30C3;&#x30C8;
<ul>
<li>&#x5B89;&#x5FC3;&#x611F;&#x629C;&#x7FA4;
<ul>
<li>Refactoring&#x3001;&#x4ED5;&#x69D8;&#x5909;&#x66F4;&#x3082;&#x6016;&#x304F;&#x306A;&#x3044;</li>
</ul>
</li>
<li>&#x3061;&#x3083;&#x3093;&#x3068;&#x30C4;&#x30FC;&#x30EB;&#x3068;&#x74B0;&#x5883;&#x3092;&#x6574;&#x7406;&#x3067;&#x304D;&#x305F;&#x3089;&#x624B;&#x8EFD;&#x3044;</li>
</ul>
</li>
<li>&#x30C7;&#x30E1;&#x30EA;&#x30C3;&#x30C8;
<ul>
<li>&#x30B3;&#x30FC;&#x30C9;&#x306E;&#x91CF;&#x306F;&#x500D;&#x4EE5;&#x4E0A;</li>
<li>Liferay&#x306E;&#x4ED5;&#x69D8;&#x306E;&#x554F;&#x984C;&#x3067;&#x3001;&#x30BD;&#x30FC;&#x30B9;&#x30B3;&#x30FC;&#x30C9;&#x3068;&#x30C6;&#x30B9;&#x30C8;&#x30B3;&#x30FC;&#x30C9;&#x306F;&#x4E92;&#x3044;&#x306B;&#x5F71;&#x97FF;&#x3092;&#x4E0E;&#x3048;&#x3066;&#x308B;
<ul>
<li>&#x30B3;&#x30FC;&#x30C9;&#x306E;&#x91CF;&#x306F;&#x3055;&#x3089;&#x306B;&#x5897;&#x3084;&#x3059;</li>
</ul>
</li>
<li>&#x30C6;&#x30B9;&#x30C8;&#x30B3;&#x30FC;&#x30C9;&#x306E;&#x8AA4;&#x308A;&#x306F;&#x30BD;&#x30FC;&#x30B9;&#x30B3;&#x30FC;&#x30C9;&#x306E;&#x6B63;&#x78BA;&#x6027;&#x3092;&#x5F71;&#x97FF;&#x3057;&#x3066;&#x3044;&#x308B;</li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section vertical="true" lineno="1701" class="slide " data-line="1701" data-h="6" data-v="2">
<h2 class="mume-header" id="discussion">Discussion</h2>

<ul>
<li>&#x30E6;&#x30CB;&#x30C3;&#x30C8;&#x30C6;&#x30B9;&#x30C8;&#x306F;&#x5168;&#x3066;&#x30B3;&#x30FC;&#x30C9;&#x3092;&#x30AB;&#x30D0;&#x30FC;&#x3059;&#x308B;&#x5FC5;&#x8981;&#x304C;&#x3042;&#x308B;&#x306E;&#x304B;&#xFF1F;
<ul>
<li>&#x539F;&#x7406;&#x4E3B;&#x7FA9;</li>
</ul>
</li>
<li>Integration&#x30C6;&#x30B9;&#x30C8;&#x3092;&#x884C;&#x3046; <code>vs</code> &#x30C6;&#x30B9;&#x30C8;&#x7528;&#x306E;OSGI&#x30E2;&#x30B8;&#x30E5;&#x30FC;&#x30EB;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;
<ul>
<li>&#x6C7A;&#x3081;&#x624B;&#x306F;Mock&#x304C;&#x5FC5;&#x8981;&#x304B;&#x3069;&#x3046;&#x304B;&#x3068;&#x601D;&#x3046;</li>
</ul>
</li>
<li>&#x300C;&#x958B;&#x767A;&#x8005;&#x300D;&#x8996;&#x70B9;&#x306E;&#x30C6;&#x30B9;&#x30C8;&#x3068;&#x300C;&#x304A;&#x5BA2;&#x3055;&#x3093;/&#x30D7;&#x30ED;&#x30DE;&#x30CD;&#x300D;&#x8996;&#x70B9;&#x306E;&#x30C6;&#x30B9;&#x30C8;&#x533A;&#x5225;
<ul>
<li>eg: <code>Mockito.verify</code></li>
<li>&#x300C;&#x30B3;&#x30FC;&#x30C9;&#x306E;&#x8AA4;&#x308A;&#x300D; <code>vs</code> &#x300C;&#x30D3;&#x30B8;&#x30CD;&#x30B9;&#x30ED;&#x30B8;&#x30C3;&#x30AF;&#x3092;&#x53CD;&#x6620;&#x3059;&#x308B;&#x300D;</li>
</ul>
</li>
<li>&#x30E6;&#x30CB;&#x30C3;&#x30C8;&#x30C6;&#x30B9;&#x30C8;&#x3068;Integration&#x30C6;&#x30B9;&#x30C8;&#x306E;&#x91CD;&#x8907;
<ul>
<li>eg: <code>getLocation</code>&#x30C6;&#x30B9;&#x30C8;&#x30B1;&#x30FC;&#x30B9;</li>
<li>&#x300C;&#x30B3;&#x30FC;&#x30C9;&#x3092;&#x5B89;&#x5FC3;&#x3067;&#x66F8;&#x3051;&#x308B;&#x305F;&#x3081;&#x300D; <code>vs</code> &#x300C;&#x30C6;&#x30B9;&#x30C8;&#x4ED5;&#x69D8;&#x66F8;&#x306E;&#x305F;&#x3081;&#x300D;</li>
</ul>
</li>
<li>JUnit4 vs JUnit5
<ul>
<li>&#x30E6;&#x30CB;&#x30C3;&#x30C8;&#x30C6;&#x30B9;&#x30C8;&#x306F;JUnit5&#x3001;testIntegration&#x3060;&#x3051;&#x304C;JUnit4&#x3092;&#x5229;&#x7528;&#x3059;&#x308B;&#x624B;&#x6BB5;&#x3082;&#x3042;&#x308A;</li>
</ul>
</li>
<li>Open Discussions</li>
</ul>
</section></section><section lineno="1717" class="slide " data-line="1717" data-h="7" data-v="0">
<h2 class="mume-header" id="end">END</h2>

</section>
      </div>
    </div>
    
      </div>
      
      
    
    
      <script>
        Reveal.initialize({"margin":0.1,"width":1600,"height":1200,"slideNumber":true,"dependencies":[]})
      </script>
      
    
    
    
    
    
    
  
    </body></html>